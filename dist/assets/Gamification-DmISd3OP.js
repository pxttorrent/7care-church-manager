import{j as e}from"./ui-CM4P41nz.js";import{r as a}from"./vendor-v6ZOr5pf.js";import{l as s,U as o,d as t,N as i,h as n,C as r,a as l,b as c,c as d,P as m,B as u,f as p,k as x,e as h,R as g,T as b}from"./index-llgJGm1A.js";import{T as f,a as j,b as N,c as v}from"./tabs-BC37FRoR.js";import{D as w,a as C,b as y,c as P}from"./dialog-ta3o2X_W.js";import{g as z,M as A,d as S,e as B,G as $,a as T,b as k,c as V,h as M}from"./mount-icon-DKUggKtl.js";import{T as D}from"./trending-up-DynrlBKD.js";import{G as E,M as L}from"./mountain-DeBkKssb.js";import{H as q}from"./heart-DZI9XFHa.js";import{A as U}from"./award-Dox6R0dT.js";import{B as F,C as O}from"./crown-Ce0iY7Et.js";import{T as R}from"./target-DOgEASvb.js";import{A as I,u as G}from"./useUserPoints-2uWyWocZ.js";import{C as J}from"./circle-alert-CnpGPCry.js";import"./charts-56rtB2he.js";import"./pointsCalculator-BwBrJ8sV.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=s("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),W=({userData:s,showDetails:p=!0})=>{const[x,h]=a.useState(null),[g,b]=a.useState(!0),f=x?{engajamento:x.engajamento||{baixo:0,medio:0,alto:0},classificacao:x.classificacao||{frequente:0,naoFrequente:0},dizimista:x.dizimista||{naoDizimista:0,pontual:0,sazonal:0,recorrente:0},ofertante:x.ofertante||{naoOfertante:0,pontual:0,sazonal:0,recorrente:0},tempoBatismo:x.tempoBatismo||{doisAnos:0,cincoAnos:0,dezAnos:0,vinteAnos:0,maisVinte:0},cargos:x.cargos||{umCargo:0,doisCargos:0,tresOuMais:0},nomeUnidade:x.nomeUnidade||{comUnidade:0},temLicao:x.temLicao||{comLicao:0},totalPresenca:x.totalPresenca||{zeroATres:0,quatroASete:0,oitoATreze:0},escolaSabatina:x.escolaSabatina||{comunhao:0,missao:0,estudoBiblico:0,batizouAlguem:0,discipuladoPosBatismo:0},cpfValido:x.cpfValido||{valido:0},camposVaziosACMS:x.camposVaziosACMS||{completos:0}}:null;a.useEffect(()=>{(async()=>{try{const e=await fetch("/api/system/points-config");if(e.ok){const a=await e.json();h(a)}}catch(e){}finally{b(!1)}})()},[]);const j=e=>{if(!x||!f)return[];const a=[];switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();e.includes("baixo")?(a.push("🔸 Participe mais ativamente dos cultos e eventos"),a.push("🔸 Envolva-se em grupos de estudo bíblico"),a.push("🔸 Ofereça-se para ajudar em atividades da igreja"),a.push(`🔸 Potencial de ganhar +${f.engajamento.medio-f.engajamento.baixo} pontos`)):(e.includes("médio")||e.includes("medio"))&&(a.push("🔸 Assuma mais responsabilidades na igreja"),a.push("🔸 Liderança em ministérios específicos"),a.push(`🔸 Potencial de ganhar +${f.engajamento.alto-f.engajamento.medio} pontos`))}else a.push("🔸 Informe seu nível de engajamento para receber pontos");break;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){s.classificacao.toLowerCase().includes("frequente")||(a.push("🔸 Aumente sua frequência nos cultos"),a.push("🔸 Participe regularmente das atividades"),a.push(`🔸 Potencial de ganhar +${f.classificacao.frequente-f.classificacao.naoFrequente} pontos`))}else a.push("🔸 Informe sua classificação para receber pontos");break;case"Fidelidade Regular com Dízimo":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();e.includes("não dizimista")||e.includes("nao dizimista")?(a.push("🔸 Comece a contribuir com dízimo"),a.push(`🔸 Potencial de ganhar +${f.dizimista.pontual-f.dizimista.naoDizimista} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se dizimista sazonal"),a.push(`🔸 Potencial de ganhar +${f.dizimista.sazonal-f.dizimista.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se dizimista recorrente"),a.push(`🔸 Potencial de ganhar +${f.dizimista.recorrente-f.dizimista.sazonal} pontos`))}else a.push("🔸 Informe seu status de dizimista para receber pontos");break;case"Fidelidade Regular com Ofertas":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();e.includes("não ofertante")||e.includes("nao ofertante")?(a.push("🔸 Comece a contribuir com ofertas"),a.push(`🔸 Potencial de ganhar +${f.ofertante.pontual-f.ofertante.naoOfertante} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se ofertante sazonal"),a.push(`🔸 Potencial de ganhar +${f.ofertante.sazonal-f.ofertante.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se ofertante recorrente"),a.push(`🔸 Potencial de ganhar +${f.ofertante.recorrente-f.ofertante.sazonal} pontos`))}else a.push("🔸 Informe seu status de ofertante para receber pontos");break;case"Tempo de Batismo":if(s.tempoBatismo){const e=s.tempoBatismo;"number"==typeof e&&(e<2?(a.push("🔸 Continue crescendo espiritualmente"),a.push(`🔸 Potencial de ganhar +${x.tempoBatismo?.doisAnos||0} pontos em 2 anos`)):e<5?a.push(`🔸 Potencial de ganhar +${(x.tempoBatismo?.cincoAnos||0)-(x.tempoBatismo?.doisAnos||0)} pontos em 3 anos`):e<10?a.push(`🔸 Potencial de ganhar +${(x.tempoBatismo?.dezAnos||0)-(x.tempoBatismo?.cincoAnos||0)} pontos em 5 anos`):e<20&&a.push(`🔸 Potencial de ganhar +${(x.tempoBatismo?.vinteAnos||0)-(x.tempoBatismo?.dezAnos||0)} pontos em 10 anos`))}else a.push("🔸 Informe seu tempo de batismo para receber pontos");break;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;0===e?(a.push("🔸 Candidate-se a um cargo na igreja"),a.push(`🔸 Potencial de ganhar +${f.cargos.umCargo} pontos`)):1===e?(a.push("🔸 Assuma um segundo cargo"),a.push(`🔸 Potencial de ganhar +${f.cargos.doisCargos-f.cargos.umCargo} pontos`)):2===e&&(a.push("🔸 Assuma um terceiro cargo"),a.push(`🔸 Potencial de ganhar +${f.cargos.tresOuMais-f.cargos.doisCargos} pontos`))}else a.push("🔸 Candidate-se a cargos na igreja para receber pontos");break;case"Nome da Unidade":s.nomeUnidade&&s.nomeUnidade.trim()||(a.push("🔸 Cadastre-se em uma unidade"),a.push(`🔸 Potencial de ganhar +${f.nomeUnidade.comUnidade} pontos`));break;case"Tem Lição":s.temLicao||(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${f.temLicao.comLicao} pontos`));break;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;e<=3?(a.push("🔸 Aumente sua frequência nos cultos"),a.push(`🔸 Potencial de ganhar +${f.totalPresenca.quatroASete-f.totalPresenca.zeroATres} pontos`)):e<=7&&(a.push("🔸 Continue aumentando sua presença"),a.push(`🔸 Potencial de ganhar +${f.totalPresenca.oitoATreze-f.totalPresenca.quatroASete} pontos`))}else a.push("🔸 Informe sua frequência para receber pontos");break;case"Batizou Alguém":s.batizouAlguem&&0!==s.batizouAlguem||(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"CPF Válido":s.cpfValido&&"Sim"===s.cpfValido||(a.push("🔸 Atualize seu CPF no sistema"),a.push(`🔸 Potencial de ganhar +${f.cpfValido.valido} pontos`));break;case"Campos Vazios ACMS":!0===s.camposVaziosACMS&&(a.push("🔸 Complete todos os campos do seu perfil"),a.push(`🔸 Potencial de ganhar +${f.camposVaziosACMS.completos} pontos`));break;case"Comunhão (ES)":s.escolaSabatina?.comunhao&&0!==s.escolaSabatina.comunhao?(a.push("🔸 Continue participando de comunhões"),a.push(`🔸 Cada atividade vale +${f.escolaSabatina.comunhao} pontos`)):(a.push("🔸 Participe de atividades de comunhão"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.comunhao} pontos por atividade`));break;case"Missão (ES)":s.escolaSabatina?.missao&&0!==s.escolaSabatina.missao?(a.push("🔸 Continue com o trabalho missionário"),a.push(`🔸 Cada atividade vale +${f.escolaSabatina.missao} pontos`)):(a.push("🔸 Envolva-se em atividades missionárias"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.missao} pontos por atividade`));break;case"Estudo Bíblico (ES)":s.escolaSabatina?.estudoBiblico&&0!==s.escolaSabatina.estudoBiblico?(a.push("🔸 Continue estudando a Bíblia"),a.push(`🔸 Cada estudo vale +${f.escolaSabatina.estudoBiblico} pontos`)):(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.estudoBiblico} pontos por estudo`));break;case"Batizou Alguém (ES)":s.escolaSabatina?.batizouAlguem&&0!==s.escolaSabatina.batizouAlguem?(a.push("🔸 Continue liderando batismos"),a.push(`🔸 Cada batismo vale +${f.escolaSabatina.batizouAlguem} pontos`)):(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"Discipulado Pós-Batismo (ES)":s.escolaSabatina?.discipuladoPosBatismo&&0!==s.escolaSabatina.discipuladoPosBatismo?(a.push("🔸 Continue o discipulado"),a.push(`🔸 Cada acompanhamento vale +${f.escolaSabatina.discipuladoPosBatismo} pontos`)):(a.push("🔸 Acompanhe novos batizados"),a.push(`🔸 Potencial de ganhar +${f.escolaSabatina.discipuladoPosBatismo} pontos por acompanhamento`))}return a},N=s.actualPoints||0,v=z(N),w=e=>{if(!x||!f)return 0;try{switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();if(e.includes("baixo"))return f.engajamento.baixo;if(e.includes("médio")||e.includes("medio"))return f.engajamento.medio;if(e.includes("alto"))return f.engajamento.alto}return 0;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){return s.classificacao.toLowerCase().includes("frequente")?f.classificacao.frequente:f.classificacao.naoFrequente}return 0;case"Dizimista":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();if(e.includes("não dizimista")||e.includes("nao dizimista"))return f.dizimista.naoDizimista;if(e.includes("pontual"))return f.dizimista.pontual;if(e.includes("sazonal"))return f.dizimista.sazonal;if(e.includes("recorrente"))return f.dizimista.recorrente}return 0;case"Ofertante":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();if(e.includes("não ofertante")||e.includes("nao ofertante"))return f.ofertante.naoOfertante;if(e.includes("pontual"))return f.ofertante.pontual;if(e.includes("sazonal"))return f.ofertante.sazonal;if(e.includes("recorrente"))return f.ofertante.recorrente}return 0;case"Tempo de Batismo":if(s.tempoBatismo)if("string"==typeof s.tempoBatismo&&s.tempoBatismo.length>0){if(s.tempoBatismo.includes("2 a 4"))return x.tempoBatismo?.doisAnos||0;if(s.tempoBatismo.includes("5 a 9"))return x.tempoBatismo?.cincoAnos||0;if(s.tempoBatismo.includes("10 a 14"))return x.tempoBatismo?.dezAnos||0;if(s.tempoBatismo.includes("15 a 19"))return x.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo.includes("20 a 29")||s.tempoBatismo.includes("30+"))return x.tempoBatismo?.maisVinte||0}else if("number"==typeof s.tempoBatismo){if(s.tempoBatismo>=2&&s.tempoBatismo<5)return x.tempoBatismo?.doisAnos||0;if(s.tempoBatismo>=5&&s.tempoBatismo<10)return x.tempoBatismo?.dezAnos||0;if(s.tempoBatismo>=10&&s.tempoBatismo<20)return x.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo>=20&&s.tempoBatismo<30)return x.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo>=30)return x.tempoBatismo?.maisVinte||0}return 0;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;if(1===e)return x.cargos?.umCargo||0;if(2===e)return x.cargos?.doisCargos||0;if(e>=3)return x.cargos?.tresOuMais||0}return 0;case"Nome da Unidade":return s.nomeUnidade&&s.nomeUnidade.trim()?f.nomeUnidade.comUnidade:0;case"Tem Lição":return s.temLicao?f.temLicao.comLicao:0;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;if(e>=0&&e<=3)return f.totalPresenca.zeroATres;if(e>=4&&e<=7)return f.totalPresenca.quatroASete;if(e>=8&&e<=13)return f.totalPresenca.oitoATreze}return 0;case"Batizou Alguém":return s.batizouAlguem?"number"==typeof s.batizouAlguem?s.batizouAlguem>0?f.escolaSabatina.batizouAlguem:0:s.batizouAlguem?f.escolaSabatina.batizouAlguem:0:0;case"CPF Válido":return s.cpfValido?"string"==typeof s.cpfValido?"Sim"===s.cpfValido?f.cpfValido.valido:0:s.cpfValido?f.cpfValido.valido:0:0;case"Campos Vazios ACMS":return!1===s.camposVaziosACMS?f.camposVaziosACMS.completos:0;default:return 0}}catch(a){return 0}},C=e=>{if(!x||!f)return 0;if(!s.escolaSabatina)return 0;try{switch(e){case"comunhao":return(s.escolaSabatina.comunhao||0)*f.escolaSabatina.comunhao;case"missao":return(s.escolaSabatina.missao||0)*f.escolaSabatina.missao;case"estudoBiblico":return(s.escolaSabatina.estudoBiblico||0)*f.escolaSabatina.estudoBiblico;case"batizouAlguem":return(s.escolaSabatina.batizouAlguem||0)*f.escolaSabatina.batizouAlguem;case"discipuladoPosBatismo":return(s.escolaSabatina.discipuladoPosBatismo||0)*f.escolaSabatina.discipuladoPosBatismo;default:return 0}}catch(a){return 0}},y=[{name:"Engajamento",points:w("Engajamento"),icon:D,color:"text-blue-600",bgColor:"bg-blue-50",description:"Nível de participação e envolvimento"},{name:"Classificação",points:w("Classificação"),icon:o,color:"text-green-600",bgColor:"bg-green-50",description:"Status de frequência na igreja"},{name:"Fidelidade Regular com Dízimo",points:w("Dizimista"),icon:E,color:"text-purple-600",bgColor:"bg-purple-50",description:"Fidelidade regular com dízimo"},{name:"Fidelidade Regular com Ofertas",points:w("Ofertante"),icon:q,color:"text-red-600",bgColor:"bg-red-50",description:"Contribuição com ofertas"},{name:"Tempo de Batismo",points:w("Tempo de Batismo"),icon:t,color:"text-orange-600",bgColor:"bg-orange-50",description:"Anos desde o batismo"},{name:"Cargos",points:w("Cargos"),icon:U,color:"text-indigo-600",bgColor:"bg-indigo-50",description:"Funções na igreja"},{name:"Nome da Unidade",points:w("Nome da Unidade"),icon:i,color:"text-emerald-600",bgColor:"bg-emerald-50",description:"Unidade cadastrada"},{name:"Tem Lição",points:w("Tem Lição"),icon:F,color:"text-amber-600",bgColor:"bg-amber-50",description:"Participação em estudos"},{name:"Total de Presença",points:w("Total de Presença"),icon:t,color:"text-violet-600",bgColor:"bg-violet-50",description:"Frequência nos cultos"},{name:"CPF Válido",points:w("CPF Válido"),icon:i,color:"text-sky-600",bgColor:"bg-sky-50",description:"Documentação em dia"},{name:"Campos Vazios ACMS",points:w("Campos Vazios ACMS"),icon:L,color:"text-stone-600",bgColor:"bg-stone-50",description:"Perfil completo no sistema"}],P=[{name:"Comunhão (ES)",points:C("comunhao"),icon:o,color:"text-blue-600",bgColor:"bg-blue-50",description:"Participação em comunhão"},{name:"Missão (ES)",points:C("missao"),icon:R,color:"text-green-600",bgColor:"bg-green-50",description:"Atividades missionárias"},{name:"Estudo Bíblico (ES)",points:C("estudoBiblico"),icon:F,color:"text-purple-600",bgColor:"bg-purple-50",description:"Estudos bíblicos realizados"},{name:"Batizou Alguém (ES)",points:C("batizouAlguem"),icon:O,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Liderança em batismos"},{name:"Discipulado Pós-Batismo (ES)",points:C("discipuladoPosBatismo"),icon:n,color:"text-orange-600",bgColor:"bg-orange-50",description:"Acompanhamento pós-batismo"}],$=P.reduce((e,a)=>e+a.points,0),T=y.reduce((e,a)=>e+a.points,0)+$;return g?e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(d,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando configuração de pontos..."})]})})})]}):x?e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais do Usuário"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{iconType:S(N),className:"h-5 w-5"}),e.jsx("div",{className:"text-sm font-medium",children:B(N)})]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.name})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(N/1e3*100),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completude"}),e.jsx(m,{value:Math.round(N/1e3*100),className:"h-2 mt-2"})]})]}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Categorias Principais"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:y.map(a=>{const s=a.icon,o=j(a.name),t=o.length>0,i=(e=>{if(!x||!f)return 0;switch(e){case"Engajamento":return f.engajamento.alto;case"Classificação":return f.classificacao.frequente;case"Fidelidade Regular com Dízimo":case"Fidelidade regular com dízimo":return f.dizimista.recorrente;case"Fidelidade Regular com Ofertas":return f.ofertante.recorrente;case"Tempo de Batismo":{const e=f.tempoBatismo;return Math.max(e.doisAnos||0,e.cincoAnos||0,e.dezAnos||0,e.vinteAnos||0,e.maisVinte||0)}case"Cargos":return f.cargos.tresOuMais;case"Nome da Unidade":return f.nomeUnidade.comUnidade;case"Tem Lição":return f.temLicao.comLicao;case"Total de Presença":return f.totalPresenca.oitoATreze;case"CPF Válido":return f.cpfValido.valido;case"Campos Vazios ACMS":return f.camposVaziosACMS.completos;default:return 0}})(a.name),n=i>0&&a.points>=i;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0 ${n?"ring-2 ring-green-200 border-green-300":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(u,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),n&&e.jsx(u,{variant:"outline",className:"text-[10px] bg-green-50 text-green-700 border-green-200",children:"Máximo"}),t&&e.jsxs(u,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Escola Sabatina"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:P.map(a=>{const s=a.icon,o=j(a.name),t=o.length>0;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(u,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),t&&e.jsxs(u,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resumo dos Totais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Calculado"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:$}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Escola Sabatina"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais"})]})]})]})]})]})]}):e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Erro ao carregar configuração de pontos"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-primary hover:underline",children:"Tentar novamente"})]})})]})},K=({userPoints:s=0,showCurrent:o=!0,className:t=""})=>{const i="number"==typeof s?s:s?.actualPoints||0,[m,p]=a.useState(null),[x,h]=a.useState(!1),g=$.find(e=>i>=e.minPoints&&(!e.maxPoints||i<=e.maxPoints));return e.jsxs(r,{className:`bg-gradient-to-br from-slate-50 to-blue-50 border-slate-200 ${t}`,children:[e.jsxs(l,{children:[e.jsxs(c,{className:"flex items-center gap-2 text-xl",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600"}),"Jornada dos Montes Espirituais"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sua ascensão espiritual através dos montes bíblicos"})]}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-9 gap-2 md:gap-3",children:$.map((a,s)=>{const o=i>=a.minPoints&&(!a.maxPoints||i<=a.maxPoints),t=i>(a.maxPoints||a.minPoints),l=s===(g?.id||0)+1;return e.jsxs("div",{className:"relative group cursor-pointer transition-all duration-300 "+(o?"scale-110 z-10":t?"scale-105":"scale-100"),onClick:()=>(e=>{p(e),h(!0)})(a),children:[e.jsx(r,{className:`h-32 md:h-40 transition-all duration-300 border-2 ${o?"ring-4 ring-orange-400 border-orange-300 bg-gradient-to-b from-orange-50 to-orange-100 shadow-lg":t?"border-green-300 bg-gradient-to-b from-green-50 to-green-100 shadow-md":l?"border-blue-300 bg-gradient-to-b from-blue-50 to-blue-100 shadow-sm":"border-gray-200 bg-gradient-to-b from-gray-50 to-gray-100"} hover:shadow-lg hover:scale-105`,children:e.jsxs(d,{className:"p-2 md:p-3 h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-2xl md:text-4xl mb-2 transition-all duration-300 "+(o?"scale-125":"scale-100"),children:e.jsx(A,{iconType:a.icon,className:"h-8 w-8 md:h-12 md:w-12 "+(o?"text-orange-600":t?"text-green-600":"text-gray-600")})}),e.jsx("div",{className:"text-center font-bold text-xs md:text-sm mb-1 transition-colors duration-300 "+(o?"text-orange-700":t?"text-green-700":"text-gray-600"),children:a.mount}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:[a.minPoints,"+ pts"]})]})}),o&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(u,{className:"bg-orange-500 text-white text-xs px-2 py-1 animate-pulse",children:[e.jsx(n,{className:"h-3 w-3 mr-1"}),"Atual"]})}),t&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(u,{className:"bg-green-500 text-white text-xs px-2 py-1",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Concluído"]})})]},a.id)})})}),e.jsx(w,{modalId:"mountain-journey-modal",open:x,onOpenChange:h,children:e.jsxs(C,{className:"max-w-2xl max-h-[85vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(y,{className:"pb-6",children:e.jsxs(P,{className:"text-center text-3xl font-bold text-amber-800",children:[m?.mount," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col items-center space-y-6 p-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-56 h-56 flex items-center justify-center bg-white rounded-2xl shadow-lg p-6",children:e.jsx(A,{iconType:m?.icon||"",className:"w-full h-full"})})}),e.jsxs("div",{className:"w-full text-center space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-3xl font-bold ${m?.color||"text-gray-600"}`,children:m?.mount}),e.jsx("div",{className:"text-xl text-amber-700 font-medium",children:m?.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-base",children:m?.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Necessários"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-800",children:[m?.minPoints," - ",m?.maxPoints||"∞"," pts"]})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Status Atual"}),e.jsx("div",{className:"text-base font-semibold text-amber-800",children:i>=m?.minPoints&&(!m?.maxPoints||i<=m.maxPoints)?"Conquistado":i>(m?.maxPoints||m?.minPoints||0)?"Superado":"Em Progresso"})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Situações espirituais alcançadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:(e=>{if(!e)return[];const a=(e.mount||"").toLowerCase();return a.includes("jordão")?["Compromisso público com Deus renovado","Início de jornada espiritual intencional","Decisão de seguir os passos de Jesus no cotidiano"]:a.includes("sinai")?["Aliança reafirmada com os princípios divinos","Obediência e reverência aprofundadas","Disciplina espiritual fortalecida"]:a.includes("carmelo")?["Fé provada e fortalecida diante de desafios","Ousadia em testemunhar","Confiança em milagres e providência de Deus"]:a.includes("oliveiras")?["Vida de oração constante","Comunhão diária cultivada","Entrega de ansiedades ao Senhor"]:a.includes("morias")||a.includes("moríah")||a.includes("moriá")?["Confiança plena nos planos de Deus","Entrega de áreas sensíveis do coração","Adoração mesmo em meio a provas"]:a.includes("tabor")?["Transformação do caráter em Cristo","Sensibilidade à voz do Espírito","Iluminação espiritual para novas etapas"]:a.includes("sião")?["Pertencimento ao povo de Deus","Alegria no culto e na adoração","Esperança consolidada nas promessas"]:a.includes("nebo")?["Visão do propósito e do futuro","Resiliência em períodos de espera","Gratidão pelas etapas vencidas"]:a.includes("canaã")?["Descanso nas promessas cumpridas","Frutificação e serviço abençoador","Novo ciclo de missão com maturidade espiritual"]:["Crescimento na fé e na comunhão","Perseverança em oração e estudo","Testemunho prático no dia a dia"]})(m).map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 mt-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 text-sm leading-relaxed",children:a})]},s))})]})]})]})]})})]})};function Q(){p();const{data:s,isLoading:o,error:t,refetch:i}=G(),[n,u]=a.useState("my-progress"),[$,D]=a.useState(!1);if(o)return e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando sua pontuação..."})]})})});if(t||!s)return e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||"Erro ao carregar dados de pontuação"}),e.jsxs(h,{onClick:i,className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),"Tentar novamente"]})]})})});const{total:E,breakdown:q,userData:U}=s,F=z(E),R=T(E),I=k(E),H=V(E);return e.jsxs(x,{children:[e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(b,{className:"h-8 w-8 text-yellow-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Minha Pontuação"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Acompanhe seu progresso na jornada espiritual"})]}),e.jsxs(f,{value:n,onValueChange:u,className:"w-full",children:[e.jsx(j,{className:"grid w-full grid-cols-1",children:e.jsx(N,{value:"my-progress",children:"Meu Progresso"})}),e.jsxs(v,{value:"my-progress",className:"space-y-6",children:[e.jsxs(r,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:[e.jsx(l,{className:"pb-3",children:e.jsxs(c,{className:"flex items-center gap-2 text-lg",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),"Seu Monte Atual"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("div",{className:"cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>D(!0),children:e.jsx(A,{iconType:S(E),className:"h-72 w-72 mx-auto"})})}),e.jsx("div",{className:M(E)+" text-2xl font-bold mb-2",children:B(E)}),e.jsx("div",{className:"text-lg text-muted-foreground",children:F.name})]}),R&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progresso para ",R.mount]}),e.jsxs("span",{children:[Math.round(I),"%"]})]}),e.jsx(m,{value:I,className:"h-2"}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:H>0?`${H} pontos para ${R.mount}`:"Monte máximo alcançado!"})]}),E>=1e3&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 bg-yellow-50 rounded-lg",children:[e.jsx(O,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Status Máximo Alcançado!"})]})]})]}),e.jsx(K,{userPoints:E,showCurrent:!0}),e.jsx(W,{userData:U,showDetails:!0})]})]})]}),e.jsx(w,{modalId:"gamification-icon-modal",open:$,onOpenChange:D,children:e.jsxs(C,{className:"max-w-5xl max-h-[95vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(y,{className:"pb-6",children:e.jsxs(P,{className:"text-center text-3xl font-bold text-amber-800",children:[B(E)," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start space-y-8 lg:space-y-0 lg:space-x-12 p-8",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-80 h-80 lg:w-96 lg:h-96 flex items-center justify-center bg-white rounded-2xl shadow-lg p-8",children:e.jsx(A,{iconType:S(E),className:"w-full h-full"})})}),e.jsxs("div",{className:"flex-1 text-center lg:text-left space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:M(E)+" text-4xl font-bold",children:B(E)}),e.jsx("div",{className:"text-2xl text-amber-700 font-medium",children:F.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-lg",children:F.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Atuais"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:E})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Próximo Nível"}),e.jsx("div",{className:"text-lg font-semibold text-amber-800",children:T(E)?.name||"Máximo Alcançado"})]}),T(E)&&e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Restantes"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:V(E)})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-4",children:"Conquistas Desbloqueadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:F.benefits.map((a,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 font-medium",children:a})]},s))})]})]})]})]})})]})}export{Q as default};
