import{j as e}from"./ui-CM4P41nz.js";import{r as s}from"./vendor-v6ZOr5pf.js";import{f as a,g as t,k as i,C as l,c as r,e as n,a as c,ao as o,b as d,_ as m,d as x,B as h,U as j}from"./index-VUVhhWWU.js";import{L as u}from"./loader-circle-DokKKoRz.js";import{V as g}from"./vote-XGXhr6f7.js";import{C as p}from"./circle-alert-DfniVKgV.js";import{A as N}from"./arrow-right-Drssls_T.js";import"./charts-56rtB2he.js";function f(){const{user:f}=a();t();const[v,b]=s.useState([]),[w,y]=s.useState(!0);s.useEffect(()=>{C()},[f?.id]);const C=async()=>{try{if(!f?.id)return void b([]);const e=await fetch("/api/elections/active",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache","x-user-id":f.id.toString()}});if(e.ok){const s=await e.json();b(s.elections||[])}else if(400===e.status){await e.json();b([])}else b([])}catch(e){b([])}finally{y(!1)}};return w?e.jsx(i,{children:e.jsxs("div",{className:"p-4 flex items-center justify-center min-h-[400px]",children:[e.jsx(u,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Carregando nomeações..."})]})}):e.jsx(i,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Nomeações de Liderança"}),e.jsx("p",{className:"text-muted-foreground",children:"Acesse as eleições ativas da sua igreja"})]})]}),0===v.length?e.jsx(l,{children:e.jsxs(r,{className:"pt-6 text-center",children:[e.jsx(p,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Nenhuma Nomeação Disponível"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:f?.id?"Você não está incluído em nenhuma nomeação ativa no momento.":"Você precisa estar logado para ver suas nomeações."}),!f?.id&&e.jsx(n,{onClick:()=>window.location.href="/login",className:"bg-blue-600 hover:bg-blue-700",children:"Fazer Login"})]})}):e.jsx("div",{className:"space-y-4",children:v.map(s=>{return e.jsxs(l,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg",children:s.church_name}),e.jsxs(m,{className:"flex items-center gap-2 mt-1",children:[e.jsx(x,{className:"h-4 w-4"}),"Iniciada em ",(a=s.created_at,new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]}),e.jsx(h,{className:"bg-blue-100 text-blue-800",children:"Nomeação Ativa"})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Cargo Atual"}),e.jsxs("span",{children:[s.current_position+1," de ",s.positions.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:(s.current_position+1)/s.positions.length*100+"%"}})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.positions[s.current_position]||"Aguardando início"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.voters.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Votantes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.positions.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargos"})]})]}),e.jsxs(n,{onClick:()=>(e=>{window.location.href=`/election-vote/${e.config_id}`})(s),className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),"Acessar Nomeação"]})]})]},s.election_id);var a})}),e.jsxs(l,{className:"bg-blue-50 border-blue-200",children:[e.jsx(c,{children:e.jsxs(d,{className:"text-blue-800 flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Como Participar"]})}),e.jsx(r,{children:e.jsxs("div",{className:"text-blue-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1."}),' Clique em "Acessar Nomeação" na eleição da sua igreja']}),e.jsxs("p",{children:[e.jsx("strong",{children:"2."})," Siga as instruções na tela do seu celular"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3."})," Indique ou vote conforme solicitado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4."})," Acompanhe os resultados em tempo real"]})]})})]})]})})}export{f as default};
