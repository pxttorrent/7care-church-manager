import{j as e}from"./ui-CM4P41nz.js";import{r as s}from"./vendor-v6ZOr5pf.js";import{l as a,f as i,g as r,k as t,A as n,a1 as o,a2 as c,C as d,a as l,b as m,ao as u,_ as h,c as x,L as p,p as j,q as f,r as g,s as v,t as N,N as b,U as C,I as y,B as w,e as S,X as A,R as P,v as D}from"./index-D70VTpdx.js";import{C as M}from"./checkbox-upgGMBYy.js";import{S as T}from"./separator-DBaXD0RT.js";import{C as k}from"./circle-alert-DYhrv_OE.js";import{U as z}from"./user-check-CTYNmGOQ.js";import{T as E}from"./target-DyoA5yk5.js";import{V as I}from"./vote-D2MN-Xcs.js";import{P as q}from"./plus-CyAQkdCq.js";import{S as _}from"./save-Bm76LmTw.js";import{S as R}from"./square-pen-B6cZGImf.js";import{F as O}from"./file-text-BfbkqsuC.js";import{T as F}from"./trash-2-A-lluTIe.js";import{L}from"./loader-circle-Dnlx1PdD.js";import{T as J}from"./triangle-alert-BrRjOozJ.js";import{U}from"./user-plus-mqTeLC7p.js";import{P as V}from"./play-CbowbPHu.js";import"./charts-56rtB2he.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=a("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$=["Ancião/Anciã Teen","Ancião/Anciã Jovem","Primeiro Ancião(ã)","Secretário(a)","Secretário(a) Associado(a)","Secretário(a) Teen","Tesoureiro(a)","Tesoureiro(a) Associado(a)","Tesoureiro(a) Teen","Patrimônio","Diáconos","Diácono(s) Teen","Diaconisas","Diaconisa(s) Teen","Primeiro Diácono","Primeira Diaconisa","Diretor(a)","Diretor(a) Associado(a)","Discípulo Teen","Ministério da Criança – Coordenador(a)","Ministério da Criança – Coordenador(a) Associado(a)","Ministério dos Adolescentes – Coordenador(a)","Ministério dos Adolescentes – Coordenador(a) Associado(a)","Ministério Jovem – Diretor(a)","Ministério Jovem – Diretor(a) Associado(a)","Clube de Aventureiros – Diretor(a)","Clube de Aventureiros – Diretor(a) Associado(a)","Clube de Aventureiros – Discípulo Teen","Clube de Desbravadores – Diretor(a)","Clube de Desbravadores – Diretor(a) Associado(a)","Clube de Desbravadores – Discípulo Teen","Professores(as) das Unidades: Bebês","Professores(as) das Unidades: Iniciantes","Professores(as) das Unidades: Infantis","Professores(as) das Unidades: Primários","Professores(as) das Unidades: Pré-adolescentes","Professores(as) das Unidades: Adolescentes","Secretário(a) Escola Sabatina","Diretor(a) Associado(a) Escola Sabatina","Discípulo Teen Escola Sabatina","Diretor(a) Ministério Pessoal","Diretor(a) Associado(a) Ministério Pessoal","Discípulo Teen Ministério Pessoal","Evangelismo – Diretor(a)","Evangelismo – Diretor(a) Associado(a)","Evangelismo – Secretário(a)","Evangelismo – Discípulo Teen","Coordenador(a) de Classes Bíblicas","Coordenador(a) de Interessados","Diretor(a) ASA","Diretor(a) Associado(a) ASA","Discípulo Teen ASA","Casal Diretor","Casal Associado","Discípulo Teen Ministério da Família","Diretora Ministério da Mulher","Diretora Associada Ministério da Mulher","Discípulo Teen Ministério da Mulher","Líder Ministério da Recepção","Equipe Ministério da Recepção","Diretor Ministério do Homem","Diretor Associado Ministério do Homem","Discípulo Teen Ministério do Homem","Diretor(a) Ministério da Saúde","Diretor(a) Associado(a) Ministério da Saúde","Discípulo Teen Ministério da Saúde","Diretor(a) Ministério das Possibilidades","Diretor(a) Associado(a) Ministério das Possibilidades","Discípulo Teen Ministério das Possibilidades","Diretor(a) Ministério da Música","Diretor(a) Associado(a) Ministério da Música","Discípulo Teen Ministério da Música","Diretor(a) Comunicação","Diretor(a) Associado(a) Comunicação","Social Media (redes sociais)","Discípulo Teen Comunicação","Diretor(a) Sonoplastia","Diretor(a) Associado(a) Sonoplastia","Equipe Sonoplastia"];function B(){const{user:a}=i(),{toast:B}=r(),[G,H]=s.useState([]),[K,Q]=s.useState([]),[X,W]=s.useState(1),[Z,ee]=s.useState(!1),[se,ae]=s.useState([]),[ie,re]=s.useState([]),[te,ne]=s.useState(!1),[oe,ce]=s.useState({churchId:0,churchName:"",voters:[],criteria:{faithfulness:{enabled:!0,punctual:!0,seasonal:!0,recurring:!0},attendance:{enabled:!0,punctual:!0,seasonal:!0,recurring:!0},churchTime:{enabled:!0,minimumMonths:12},positionLimit:{enabled:!0,maxPositions:2},eldersCount:{enabled:!0,count:1}},positions:[],status:"draft"}),[de,le]=s.useState(!0),[me,ue]=s.useState(!1),[he,xe]=s.useState(""),[pe,je]=s.useState([]),[fe,ge]=s.useState({}),[ve,Ne]=s.useState(!1),[be,Ce]=s.useState(""),[ye,we]=s.useState(null),[Se,Ae]=s.useState(""),[Pe,De]=s.useState(null),[Me,Te]=s.useState("");s.useEffect(()=>{(async()=>{le(!0);try{await Promise.all([ke(),ze(),Ee()]),je(e=>{const s=[...$],a=e||[],i=s.filter(e=>!a.includes(e));return[...a,...i]}),ge(e=>({...e,"Secretário(a)":"Atribuições:\n• Cuidar do sistema de gerenciamento de membros (ACMS);\n• Criar e manter registro de membros e frequentadores;\n• Formar, treinar e gerenciar uma equipe de secretaria;\n• Preparar agenda e participar das reuniões de comissões da igreja;\n• Preparar relatórios de acordo com a necessidade da administração da igreja e dos diversos ministérios;\n• Entregar certificados das cerimônias (batismos e profissões de fé).","Tesoureiro(a)":"Atribuições:\n• Receber todos os recursos financeiros, gerando os recibos e devidos relatórios;\n• Preparar o orçamento anual e acompanhar os gastos dos ministérios;\n• Prestar contas ao campo local no momento indicado para a auditoria anual;\n• Efetuar os pagamentos autorizados pelo pastorado e/ou Subcomissão Administrativa;\n• Formar, treinar e gerenciar uma equipe de tesouraria.","Diretor(a) ASA":"Atribuições:\n• Desenvolver projetos que atendam e aliviem o sofrimento de pessoas em estado de vulnerabilidade em nosso bairro;\n• Organizar recebimento e saídas de alimentos/roupas para famílias que necessitam de ajuda (sejam elas membros da Igreja, amigos ou interessados);\n• Disponibilizar seu tempo durante a semana para atendimentos e distribuição de alimentos;\n• Apoiar projetos sociais de outros ministérios da Igreja.","Diretor(a) Comunicação":"Atribuições:\n• Elaboração de textos informativos e promoção de informações assertivas;\n• Produção de artes para as divulgações de eventos e séries;\n• Gerenciamento das redes sociais da igreja e site da igreja;\n• Preservar e manter a imagem da Instituição;\n• Preservar a identidade visual da igreja.","Primeiro Diácono":"Atribuições:\n• Prover equipes de trabalho semanais por escala;\n• Prover treinamento para o corpo de diáconos e diaconisas;\n• Auxiliar nas cerimônias especiais da igreja;\n• Participar da equipe de visitação da igreja.","Primeira Diaconisa":"Atribuições:\n• Prover equipes de trabalho semanais por escala;\n• Prover treinamento para o corpo de diáconos e diaconisas;\n• Auxiliar nas cerimônias especiais da igreja;\n• Participar da equipe de visitação da igreja.","Diretor(a) Associado(a) Escola Sabatina":"Atribuições:\n• Recrutar, capacitar e gerenciar a equipe de professores;\n• Em parceria com o ancionato, promover o pastoreio através das classes;\n• Organizar a programação semanal da escola sabatina;\n• Incentivar e promover o estudo e aquisição da lição (Projeto Maná).","Coordenador(a) de Interessados":"Atribuições:\n• Manter atualizada a lista de interessados da igreja;\n• Encaminhar novos interessados para os instrutores através do Ministério Pessoal;\n• Gerenciar e atualizar periodicamente o progresso dos estudos bíblicos;\n• Trabalhar em parceria com a Secretaria da Escola Sabatina e Secretaria da Igreja para atualizar os sistemas com as informações.","Ministério da Criança – Coordenador(a)":"Atribuições:\n• Recrutar e gerenciar a equipe de professores;\n• Dar suporte aos coordenadores que auxiliam nas áreas de coral, eventos e programações;\n• Compra de materiais para o departamento e classes infantis;\n• Trabalhar em parceria com a distrital para aplicar o programa da associação.","Casal Diretor":"Atribuições:\n• Realizar reuniões de fortalecimento do casamento;\n• Apresentar palestras sobre paternidade/maternidade e educação cristã sobre sexualidade;\n• Fornecer orientações para evangelismo entre famílias;\n• Oferecer aconselhamento familiar;\n• Promover encontros de celebração e instrução para as famílias.\nNormalmente é liderado pelo casal, apesar de apenas um nome ser indicado como líder.","Diretora Ministério da Mulher":"Atribuições:\n• Organizar e planejar encontros espirituais e sociais com as mulheres da Igreja;\n• Implementar o programa da associação (com adaptações, se necessário);\n• Mobilizar as mulheres da igreja em diversas frentes missionárias.","Diretor(a) Ministério da Música":"Atribuições:\n• Recrutar, capacitar e gerenciar voluntários com aptidões musicais variadas;\n• Organizar repertório e equipes para o louvor congregacional;\n• Promover encontros musicais e eventos;\n• Recrutar e dar suporte aos diretores e regentes dos grupos vocais e instrumentais da igreja.","Líder Ministério da Recepção":"Atribuições:\n• Recrutar, capacitar e gerenciar voluntários para equipe de recepção;\n• Organizar equipes de atuação semanal;\n• Perfil de pessoa que seja simpática, converse com empatia e gentileza;\n• Orientar os visitantes.","Diretor(a) Ministério da Saúde":"Atribuições:\n• Organizar o Clube Vida e Saúde;\n• Organizar palestras de saúde (físico, mental, espiritual) que possam incentivar uma vida saudável para membros e interessados da Igreja;\n• Planejar feiras de saúde e projetos evangelísticos nessa área;\n• Auxiliar nos cursos de saúde que sejam promovidos pela Igreja.","Diretor(a) Ministério das Possibilidades":"Atribuições:\n• Desenvolver atividades para o grupo de terceira idade da Igreja e interessados;\n• Identificar e atender necessidades dessa faixa etária (enfermos, unções, visitas);\n• Organizar equipe de visitação de idosos;\n• Mobilizar visitas em asilos;\n• Realizar viagens e excursões de idosos da Igreja.","Ministério dos Adolescentes – Coordenador(a)":"Atribuições:\n• Motivar o grupo de adolescentes da Igreja a terem um encontro com Deus;\n• Organizar as atividades da Escola Sabatina de adolescentes;\n• Planejar atividades sociais e missionárias com adolescentes;\n• Acompanhar os projetos realizados com Adolescentes por nossa Associação;\n• Mobilizar adolescentes para que participem ativamente de outros ministérios da Igreja.","Ministério Jovem – Diretor(a)":"Atribuições:\n• Planejar atividades voltadas para jovens;\n• Organizar encontros sociais com a juventude da Igreja;\n• Desenvolver novos jovens na liderança;\n• Realizar encontros de pequenos grupos com jovens;\n• Pastorear novos jovens vindos de outros estados e jovens universitários.","Diretor(a) Ministério Pessoal":"Atribuições:\n• Envolver os membros através dos ministérios da Igreja e unidades de ação da Escola Sabatina nos projetos evangelísticos da Igreja;\n• Identificar e capacitar membros que dão estudos bíblicos para atendimento de interessados levantados pela Coordenação de Interessados;\n• Acompanhar junto com o Coordenador de Pequenos Grupos os pequenos grupos da Igreja;\n• Em parceria com o Coordenador de Interessados, conectar interessados com instrutores bíblicos.","Diretor(a)":"Atribuições:\n• Ter uma compreensão do ministério espiritual e financeiro da igreja;\n• Promover encontros e eventos sobre mordomia cristã;\n• Aplicar (ou adaptar, se necessário) os programas de mordomia denominacionais;\n• Trabalhar em parceria com outros ministérios que auxiliam no crescimento espiritual e desenvolvimento dos dons."}))}finally{le(!1)}})()},[]);const ke=async()=>{try{const e=await fetch("/api/churches");if(e.ok){const s=await e.json();H(s||[])}else B({title:"Erro",description:"Erro ao carregar lista de igrejas",variant:"destructive"})}catch(e){B({title:"Erro",description:"Erro de conexão ao carregar igrejas",variant:"destructive"})}},ze=async()=>{try{const e=await fetch("/api/users");if(e.ok){const s=(await e.json()||[]).filter(e=>e.role&&e.role.includes("member")&&("approved"===e.status||"pending"===e.status));Q(s)}else B({title:"Erro",description:"Erro ao carregar lista de membros",variant:"destructive"})}catch(e){B({title:"Erro",description:"Erro de conexão ao carregar membros",variant:"destructive"})}},Ee=async()=>{try{const e=await fetch("/api/elections/config",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(e.ok){const s=await e.json();if(s.error)return;if(s&&s.church_id){const e={id:s.id,churchId:s.church_id||0,churchName:s.church_name||"",voters:s.voters||[],criteria:{faithfulness:{enabled:s.criteria?.faithfulness?.enabled??!0,punctual:s.criteria?.faithfulness?.punctual??!1,seasonal:s.criteria?.faithfulness?.seasonal??!1,recurring:s.criteria?.faithfulness?.recurring??!1},attendance:{enabled:s.criteria?.attendance?.enabled??!0,punctual:s.criteria?.attendance?.punctual??!1,seasonal:s.criteria?.attendance?.seasonal??!1,recurring:s.criteria?.attendance?.recurring??!1},churchTime:{enabled:s.criteria?.churchTime?.enabled??!0,minimumMonths:s.criteria?.churchTime?.minimumMonths??12},positionLimit:{enabled:s.criteria?.positionLimit?.enabled??!0,maxPositions:s.criteria?.positionLimit?.maxPositions??2},eldersCount:{enabled:s.criteria?.eldersCount?.enabled??!0,count:s.criteria?.eldersCount?.count??1}},positions:s.positions||[],status:s.status||"draft"};ce(e),s.custom_positions?je(s.custom_positions):je($),ge(e=>({...e,"Secretário(a)":"Atribuições:\n• Cuidar do sistema de gerenciamento de membros (ACMS);\n• Criar e manter registro de membros e frequentadores;\n• Formar, treinar e gerenciar uma equipe de secretaria;\n• Preparar agenda e participar das reuniões de comissões da igreja;\n• Preparar relatórios de acordo com a necessidade da administração da igreja e dos diversos ministérios;\n• Entregar certificados das cerimônias (batismos e profissões de fé)."})),s.position_descriptions&&ge(s.position_descriptions)}}else{if(404!==e.status)throw new Error(`HTTP ${e.status}`);je($),ge({"Secretário(a)":"Atribuições:\n• Cuidar do sistema de gerenciamento de membros (ACMS);\n• Criar e manter registro de membros e frequentadores;\n• Formar, treinar e gerenciar uma equipe de secretaria;\n• Preparar agenda e participar das reuniões de comissões da igreja;\n• Preparar relatórios de acordo com a necessidade da administração da igreja e dos diversos ministérios;\n• Entregar certificados das cerimônias (batismos e profissões de fé)."})}}catch(e){B({title:"Erro",description:"Erro ao carregar configuração de eleição",variant:"destructive"})}},Ie=(e,s)=>{ce(a=>{const i={...a};if(i.criteria||(i.criteria={faithfulness:{enabled:!0,punctual:!0,seasonal:!0,recurring:!0},attendance:{enabled:!0,threshold:75},churchTime:{enabled:!0,minimumMonths:12},positionLimit:{enabled:!0,maxPositions:2},eldersCount:{enabled:!0,count:1}}),e.includes(".")){const[a,r]=e.split(".");i.criteria[a]||(i.criteria[a]={}),i.criteria[a][r]=s}else i.criteria[e]=s;return i})},qe=()=>{be.trim()&&!pe.includes(be.trim())&&(je(e=>[...e,be.trim()]),Ce(""),Ne(!1))},_e=()=>{ye&&Se.trim()&&!pe.includes(Se.trim())&&(je(e=>e.map(e=>e===ye?Se.trim():e)),ce(e=>({...e,positions:e.positions?.map(e=>e===ye?Se.trim():e)})),we(null),Ae(""))},Re=()=>{we(null),Ae("")},Oe=()=>{Pe&&(ge(e=>({...e,[Pe]:Me})),De(null),Te(""))},Fe=()=>{De(null),Te("")},Le=async()=>{if(oe.churchId&&oe.churchName){ne(!0);try{const e=await fetch("/api/users",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw new Error("Erro ao carregar usuários");{const s=(await e.json()).filter(e=>e.church===oe.churchName&&(e.role?.includes("member")||e.role?.includes("admin"))&&("approved"===e.status||"pending"===e.status)),a=[],i=[];for(const e of s){let s=!0,r=[];if(2227===e.id&&(e.extra_data={dizimistaType:"Pontual (1-3)",ofertanteType:"Recorrente (8-13)",teveParticipacao:"Recorrente (8-13/14)",tempoBatismoAnos:5}),oe.criteria?.faithfulness?.enabled){let a=!1;"string"==typeof e.extra_data?JSON.parse(e.extra_data||"{}"):e.extra_data;const i=e.dizimista_type;if((e.is_donor||e.isDonor||i)&&(oe.criteria.faithfulness.punctual&&i?.includes("Pontual")&&(a=!0),oe.criteria.faithfulness.seasonal&&i?.includes("Sazonal")&&(a=!0),oe.criteria.faithfulness.recurring&&i?.includes("Recorrente")&&(a=!0)),!a){const s=e.ofertante_type;(e.isOffering||s)&&(oe.criteria.faithfulness.punctual&&s?.includes("Pontual")&&(a=!0),oe.criteria.faithfulness.seasonal&&s?.includes("Sazonal")&&(a=!0),oe.criteria.faithfulness.recurring&&s?.includes("Recorrente")&&(a=!0))}a||(s=!1,r.push("Não atende aos critérios de fidelidade"))}if(oe.criteria?.attendance?.enabled){let a=!1;const i=("string"==typeof e.extra_data?JSON.parse(e.extra_data||"{}"):e.extra_data||{}).teveParticipacao;i&&"Não informado"!==i&&(oe.criteria.attendance.punctual&&i.includes("Pontual")&&(a=!0),oe.criteria.attendance.seasonal&&i.includes("Sazonal")&&(a=!0),oe.criteria.attendance.recurring&&i.includes("Recorrente")&&(a=!0)),a||(s=!1,r.push("Não atende aos critérios de presença"))}if(oe.criteria?.churchTime?.enabled){"string"==typeof e.extra_data?JSON.parse(e.extra_data||"{}"):e.extra_data;const a=e.tempo_batismo_anos||0,i=Math.round((oe.criteria.churchTime.minimumMonths||12)/12);a<i&&(s=!1,r.push(`Tempo de batismo insuficiente (${a} anos, mínimo: ${i} anos)`))}const t="string"==typeof e.extra_data?JSON.parse(e.extra_data||"{}"):e.extra_data||{},n={id:e.id,name:e.name,email:e.email,church:e.church,role:e.role,status:e.status,isTither:e.dizimista_type||(e.is_donor||e.isDonor?"Sim":"Não"),isDonor:e.ofertante_type||(e.isOffering?"Sim":"Não"),attendance:t.teveParticipacao||"Não informado",churchTime:e.tempo_batismo_anos?`${e.tempo_batismo_anos} anos`:"Não informado",churchTimeYears:e.tempo_batismo_anos||0,extraData:e.extra_data,eligibilityReasons:r};s?a.push(n):i.push(n)}ae(a),re(i)}}catch(e){B({title:"Erro",description:"Erro ao carregar candidatos elegíveis",variant:"destructive"})}finally{ne(!1)}}},Je=K.filter(e=>{const s=e.church===oe.churchName||""===oe.churchName,a=""===he||e.name.toLowerCase().includes(he.toLowerCase())||e.email.toLowerCase().includes(he.toLowerCase());return s&&a}),Ue=K.filter(e=>oe.voters?.includes(e.id)||!1);if(de)return e.jsx(t,{children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Carregando..."}),e.jsx("p",{className:"text-muted-foreground",children:"Preparando configuração de eleição"})]})});return"admin"===a?.role||a?.role?.includes("admin")||a?.email?.includes("admin")||a?.name?.toLowerCase().includes("admin")||a?.name?.toLowerCase().includes("pastor")?e.jsx(t,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Configuração de Nomeações"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure os parâmetros da nomeação de liderança"})]})]}),e.jsx("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[1,2,3,4,5].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+(X>=s?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"),children:s}),e.jsxs("span",{className:"ml-2 text-sm font-medium "+(X>=s?"text-blue-600":"text-gray-500"),children:[1===s&&"Igreja",2===s&&"Votantes",3===s&&"Critérios",4===s&&"Cargos",5===s&&"Candidatos"]}),s<5&&e.jsx("div",{className:"w-8 h-0.5 mx-2 "+(X>s?"bg-blue-600":"bg-gray-200")})]},s))}),Z&&e.jsxs(o,{className:"mb-4",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs(c,{children:[e.jsx("strong",{children:"Configuração já existe!"})," Já existe uma configuração para esta igreja. Você pode editar a configuração existente ou criar uma nova."]})]}),e.jsxs("div",{className:"space-y-4",children:[1===X&&e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Seleção da Igreja"]}),e.jsx(h,{children:"Selecione qual igreja será feita a eleição de liderança"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"church",children:"Igreja"}),e.jsxs(j,{value:oe.churchId?.toString()||"",onValueChange:async e=>{const s=G.find(s=>s.id?.toString()===e);if(s){ce(e=>({...e,churchId:s.id,churchName:s.name}));try{const e=await fetch("/api/elections/configs",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(e.ok){(await e.json()).find(e=>e.church_id===s.id);ee(!1)}}catch(a){}ze(s.name)}},children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Selecione uma igreja"})}),e.jsx(v,{children:G.map(s=>e.jsx(N,{value:s.id?.toString()||"",children:s.name},s.id))})]})]}),oe.churchName&&e.jsxs(o,{children:[e.jsx(b,{className:"h-4 w-4"}),e.jsxs(c,{children:["Eleição será realizada na igreja: ",e.jsx("strong",{children:oe.churchName})]})]})]})]}),2===X&&e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Seleção de Votantes"]}),e.jsxs(h,{children:['Selecione quais membros da igreja "',oe.churchName||"Selecione uma igreja",'" poderão votar na eleição']})]}),e.jsx(x,{className:"space-y-4",children:oe.churchId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"voter-search",children:"Buscar membros"}),e.jsx(y,{id:"voter-search",type:"text",placeholder:"Digite o nome ou email do membro para pesquisar...",value:he,onChange:e=>xe(e.target.value),className:"w-full"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsxs("span",{children:[Je.length," membro(s) encontrado(s)"]}),e.jsxs("span",{children:[Ue.length," votante(s) selecionado(s)"]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Je.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(M,{id:`voter-${s.id}`,checked:oe.voters?.includes(s.id)||!1,onCheckedChange:()=>{return e=s.id,void ce(s=>({...s,voters:(s.voters||[]).includes(e)?(s.voters||[]).filter(s=>s!==e):[...s.voters||[],e]}));var e}}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(w,{variant:"secondary",className:"text-xs",children:s.role}),e.jsx(w,{variant:"approved"===s.status?"default":"outline",className:"text-xs",children:"approved"===s.status?"Ativo":"Pendente"}),e.jsx(w,{variant:"outline",className:"text-xs",children:s.church})]})]})})]},s.id))}),0===Je.length&&he&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground mb-2",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:['Nenhum membro encontrado para "',he,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Tente usar um termo de busca diferente"})]})}),0===Je.length&&!he&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground mb-2",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:['Nenhum membro encontrado para a igreja "',oe.churchName,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Verifique se a igreja foi selecionada corretamente"})]})}),Je.length>0&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>{const e=Je.map(e=>e.id);ce(s=>({...s,voters:e}))},className:"flex-1",children:"Selecionar Todos"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>{ce(e=>({...e,voters:[]}))},className:"flex-1",children:"Limpar Seleção"})]}),Ue.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{children:["Votantes selecionados (",Ue.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ue.map(s=>e.jsxs(w,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),s.name]},s.id))})]})]}):e.jsxs(o,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(c,{children:'Selecione uma igreja na aba "Configuração Básica" para visualizar os membros disponíveis.'})]})})]}),3===X&&e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Critérios de Candidatos"]}),e.jsx(h,{children:"Defina os critérios que os candidatos devem atender"})]}),e.jsx(x,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"faithfulness-enabled",checked:oe.criteria?.faithfulness?.enabled||!1,onCheckedChange:e=>Ie("faithfulness.enabled",e)}),e.jsx(p,{htmlFor:"faithfulness-enabled",className:"cursor-pointer",children:"Fidelidade nos dízimos e ofertas"})]})}),oe.criteria?.faithfulness?.enabled&&e.jsxs("div",{className:"ml-6 space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{className:"text-sm font-medium",children:"Tipos de fidelidade obrigatórios:"}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-blue-600",children:"P"})}),e.jsxs("div",{children:[e.jsx(p,{className:"font-medium text-sm",children:"Pontual"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dízimos pagos no prazo"})]})]}),e.jsx(M,{id:"punctual",checked:oe.criteria?.faithfulness?.punctual||!1,onCheckedChange:e=>Ie("faithfulness.punctual",e)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-green-600",children:"S"})}),e.jsxs("div",{children:[e.jsx(p,{className:"font-medium text-sm",children:"Sazonal"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ofertas especiais e campanhas"})]})]}),e.jsx(M,{id:"seasonal",checked:oe.criteria?.faithfulness?.seasonal||!1,onCheckedChange:e=>Ie("faithfulness.seasonal",e)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-purple-600",children:"R"})}),e.jsxs("div",{children:[e.jsx(p,{className:"font-medium text-sm",children:"Recorrente"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contribuições regulares"})]})]}),e.jsx(M,{id:"recurring",checked:oe.criteria?.faithfulness?.recurring||!1,onCheckedChange:e=>Ie("faithfulness.recurring",e)})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx(p,{className:"text-sm font-medium text-blue-800",children:"Critérios Ativos:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[oe.criteria?.faithfulness?.punctual&&e.jsx(w,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:"Pontual"}),oe.criteria?.faithfulness?.seasonal&&e.jsx(w,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Sazonal"}),oe.criteria?.faithfulness?.recurring&&e.jsx(w,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-700",children:"Recorrente"}),!oe.criteria?.faithfulness?.punctual&&!oe.criteria?.faithfulness?.seasonal&&!oe.criteria?.faithfulness?.recurring&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"Nenhum critério selecionado"})]})]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"attendance-enabled",checked:oe.criteria?.attendance?.enabled||!1,onCheckedChange:e=>Ie("attendance.enabled",e)}),e.jsx(p,{htmlFor:"attendance-enabled",className:"cursor-pointer",children:"Presença regular (teveParticipacao)"})]}),oe.criteria?.attendance?.enabled&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Tipos de participação aceitos:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"attendance-punctual",checked:oe.criteria?.attendance?.punctual||!1,onCheckedChange:e=>Ie("attendance.punctual",e)}),e.jsx(p,{htmlFor:"attendance-punctual",className:"cursor-pointer text-sm",children:"Pontual (Recorrente)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"attendance-seasonal",checked:oe.criteria?.attendance?.seasonal||!1,onCheckedChange:e=>Ie("attendance.seasonal",e)}),e.jsx(p,{htmlFor:"attendance-seasonal",className:"cursor-pointer text-sm",children:"Sazonal (Sazonal + Recorrente)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"attendance-recurring",checked:oe.criteria?.attendance?.recurring||!1,onCheckedChange:e=>Ie("attendance.recurring",e)}),e.jsx(p,{htmlFor:"attendance-recurring",className:"cursor-pointer text-sm",children:"Recorrente (apenas Recorrente)"})]})]}),e.jsxs(o,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs(c,{className:"text-xs",children:[e.jsx("strong",{children:"Critérios de participação:"}),e.jsx("br",{}),"• ",e.jsx("strong",{children:"Pontual:"}),' Apenas membros com participação "Recorrente"',e.jsx("br",{}),"• ",e.jsx("strong",{children:"Sazonal:"}),' Membros com participação "Sazonal" ou "Recorrente"',e.jsx("br",{}),"• ",e.jsx("strong",{children:"Recorrente:"}),' Apenas membros com participação "Recorrente"',e.jsx("br",{}),"• ",e.jsx("strong",{children:"Exclusão:"}),' Membros com "Sem participação" são automaticamente excluídos']})]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"church-time-enabled",checked:oe.criteria?.churchTime?.enabled||!1,onCheckedChange:e=>Ie("churchTime.enabled",e)}),e.jsx(p,{htmlFor:"church-time-enabled",className:"cursor-pointer",children:"Tempo mínimo de batismo"})]}),oe.criteria?.churchTime?.enabled&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx(p,{htmlFor:"minimumYears",children:"Tempo mínimo em anos"}),e.jsx(y,{id:"minimumYears",type:"number",min:"1",max:"50",value:Math.round((oe.criteria?.churchTime?.minimumMonths||12)/12),onChange:e=>Ie("churchTime.minimumMonths",12*(parseInt(e.target.value)||1))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Membros com menos de ",Math.round((oe.criteria?.churchTime?.minimumMonths||12)/12)," anos de batismo não poderão ser candidatos"]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"position-limit-enabled",checked:oe.criteria?.positionLimit?.enabled||!1,onCheckedChange:e=>Ie("positionLimit.enabled",e)}),e.jsx(p,{htmlFor:"position-limit-enabled",className:"cursor-pointer",children:"Limite de cargos por pessoa"})]}),oe.criteria?.positionLimit?.enabled&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx(p,{htmlFor:"maxPositions",children:"Máximo de cargos por pessoa"}),e.jsx(y,{id:"maxPositions",type:"number",min:"1",max:"4",value:oe.criteria?.positionLimit?.maxPositions||2,onChange:e=>Ie("positionLimit.maxPositions",parseInt(e.target.value))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Uma pessoa pode ser eleita para no máximo ",oe.criteria?.positionLimit?.maxPositions||2," cargo(s)"]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"elders-count-enabled",checked:oe.criteria?.eldersCount?.enabled||!1,onCheckedChange:e=>Ie("eldersCount.enabled",e)}),e.jsx(p,{htmlFor:"elders-count-enabled",className:"cursor-pointer",children:"Quantidade de anciãos a serem eleitos"})]}),oe.criteria?.eldersCount?.enabled&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx(p,{htmlFor:"eldersCount",children:"Número de anciãos"}),e.jsx(y,{id:"eldersCount",type:"number",min:"1",max:"10",value:oe.criteria?.eldersCount?.count||1,onChange:e=>Ie("eldersCount.count",parseInt(e.target.value))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Serão eleitos ",oe.criteria?.eldersCount?.count||1," ancião(s) para a igreja"]})]})]})]})})]}),4===X&&e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Cargos para Eleição"]}),e.jsx(h,{children:"Gerencie todos os cargos disponíveis para eleição. Você pode adicionar, editar e excluir cargos conforme necessário."})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("h3",{className:"font-semibold text-orange-700",children:"TODOS OS CARGOS"})]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>Ne(!0),className:"h-8 px-3",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]}),ve&&e.jsx("div",{className:"ml-4 p-3 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{placeholder:"Nome do cargo",value:be,onChange:e=>Ce(e.target.value),className:"flex-1",onKeyPress:e=>"Enter"===e.key&&qe()}),e.jsx(S,{size:"sm",onClick:qe,disabled:!be.trim(),children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>{Ne(!1),Ce("")},children:e.jsx(A,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"ml-4",children:0!==pe.length||ve?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-orange-200",children:[e.jsx("th",{className:"text-left p-2 text-xs font-medium text-orange-700",children:"Selecionar"}),e.jsx("th",{className:"text-left p-2 text-xs font-medium text-orange-700",children:"Departamento/Ministério"}),e.jsx("th",{className:"text-left p-2 text-xs font-medium text-orange-700",children:"Descrição/Atribuições"}),e.jsx("th",{className:"text-left p-2 text-xs font-medium text-orange-700",children:"Ações"})]})}),e.jsx("tbody",{children:pe.map(s=>e.jsxs("tr",{className:"border-b border-orange-100 hover:bg-orange-25",children:[e.jsx("td",{className:"p-2",children:e.jsx(M,{id:`custom-position-${s}`,checked:(oe.positions||[]).includes(s),onCheckedChange:()=>(e=>{ce(s=>({...s,positions:(s.positions||[]).includes(e)?(s.positions||[]).filter(s=>s!==e):[...s.positions||[],e]}))})(s)})}),e.jsx("td",{className:"p-2",children:ye===s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{value:Se,onChange:e=>Ae(e.target.value),className:"flex-1 text-sm",onKeyPress:e=>"Enter"===e.key&&_e()}),e.jsx(S,{size:"sm",onClick:_e,disabled:!Se.trim(),className:"h-6 w-6 p-0",children:e.jsx(_,{className:"h-3 w-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:Re,className:"h-6 w-6 p-0",children:e.jsx(A,{className:"h-3 w-3"})})]}):e.jsx(p,{htmlFor:`custom-position-${s}`,className:"cursor-pointer text-sm font-medium",children:s})}),e.jsx("td",{className:"p-2",children:Pe===s?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:Me,onChange:e=>Te(e.target.value),className:"w-full min-h-[60px] p-2 text-xs border rounded-md resize-none",placeholder:"Digite as atribuições e responsabilidades deste cargo..."}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(S,{size:"sm",onClick:Oe,className:"h-6 w-6 p-0",children:e.jsx(_,{className:"h-3 w-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:Fe,className:"h-6 w-6 p-0",children:e.jsx(A,{className:"h-3 w-3"})})]})]}):e.jsx("div",{className:"space-y-1",children:fe[s]?e.jsx("div",{className:"text-xs text-gray-700 bg-white/50 rounded p-2 border max-h-20 overflow-y-auto",children:fe[s]}):e.jsx("div",{className:"text-xs text-muted-foreground italic",children:"Nenhuma descrição adicionada"})})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>(e=>{we(e),Ae(e)})(s),className:"h-6 w-6 p-0",title:"Editar nome do cargo",children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>(e=>{De(e),Te(fe[e]||"")})(s),className:"h-6 w-6 p-0",title:"Editar descrição",children:e.jsx(O,{className:"h-3 w-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>(e=>{je(s=>s.filter(s=>s!==e)),ce(s=>({...s,positions:s.positions?.filter(s=>s!==e)}))})(s),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"Excluir cargo",children:e.jsx(F,{className:"h-3 w-3"})})]})})]},s))})]})}):e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum cargo disponível"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[oe.positions?.length||0," cargo(s) selecionado(s)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>{ce(e=>({...e,positions:[]}))},disabled:!oe.positions?.length,children:"Desmarcar Todos"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>{ce(e=>({...e,positions:[...pe]}))},children:"Marcar Todos"})]})]})]})]}),5===X&&e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Candidatos Elegíveis"]}),e.jsx(h,{children:"Visualize os membros que atendem aos critérios definidos e podem ser candidatos nas nomeações."})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(S,{onClick:Le,disabled:te||!oe.churchId,variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2 "+(te?"animate-spin":"")}),te?"Carregando...":"Atualizar Lista"]}),se.length>0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[se.length," candidato(s) elegível(eis)"]})]}),te?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Carregando candidatos..."})]}):0===se.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum candidato elegível"}),e.jsx("p",{className:"text-gray-500 mb-4",children:oe.churchId?"Nenhum membro da igreja selecionada atende aos critérios definidos.":"Selecione uma igreja primeiro para visualizar os candidatos."}),oe.churchId&&e.jsxs(S,{onClick:Le,variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:se.map(s=>e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(D,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"approved"===s.status?"default":"secondary",children:"approved"===s.status?"Ativo":"Pendente"}),e.jsx(w,{variant:"outline",children:s.role})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Tempo de batismo:"}),e.jsx(w,{variant:s.churchTime?.includes("Não")?"secondary":"default",children:s.churchTimeYears>0?`${s.churchTimeYears} anos`:"Não informado"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Dizimista:"}),e.jsx(w,{variant:s.isTither?.includes("Não")||"Não informado"===s.isTither?"secondary":"default",children:s.isTither})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Ofertante:"}),e.jsx(w,{variant:s.isDonor?.includes("Não")||"Não informado"===s.isDonor?"secondary":"default",children:s.isDonor})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Presença:"}),e.jsx(w,{variant:s.attendance?.includes("Não")||"Não informado"===s.attendance?"secondary":"default",children:s.attendance})]})]})})]},s.id))}),e.jsxs(o,{children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx(c,{children:"Esta lista mostra apenas os membros que atendem aos critérios definidos. Durante a nomeação, apenas estes membros poderão ser indicados como candidatos."})]})]}),ie.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-orange-700 flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Candidatos Não Elegíveis (",ie.length,")"]})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Membros que não atendem aos critérios definidos, mas podem ser adicionados manualmente pelo administrador."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ie.map(s=>e.jsx(d,{className:"border-orange-200",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-orange-800",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(w,{variant:"approved"===s.status?"default":"secondary",children:"approved"===s.status?"Ativo":"Pendente"}),e.jsx(w,{variant:"outline",children:s.role})]})]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>(e=>{re(s=>s.filter(s=>s.id!==e.id)),ae(s=>[...s,e])})(s),className:"ml-2 border-orange-300 text-orange-700 hover:bg-orange-50",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-orange-100",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Tempo de batismo:"}),e.jsx(w,{variant:0===s.churchTimeYears?"secondary":"default",children:s.churchTimeYears>0?`${s.churchTimeYears} anos`:"Não informado"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Dizimista:"}),e.jsx(w,{variant:s.isTither?.includes("Não")||"Não informado"===s.isTither?"secondary":"default",children:s.isTither})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Ofertante:"}),e.jsx(w,{variant:s.isDonor?.includes("Não")||"Não informado"===s.isDonor?"secondary":"default",children:s.isDonor})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Presença:"}),e.jsx(w,{variant:s.attendance?.includes("Não")||"Não informado"===s.attendance?"secondary":"default",children:s.attendance})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-orange-100",children:[e.jsx("p",{className:"text-sm font-medium text-orange-700 mb-2",children:"Motivos:"}),e.jsx("div",{className:"space-y-1",children:s.eligibilityReasons.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-600",children:[e.jsx(J,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{children:s})]},a))})]})]})]})},s.id))}),e.jsxs(o,{className:"mt-4 border-orange-200",children:[e.jsx(J,{className:"h-4 w-4 text-orange-600"}),e.jsx(c,{className:"text-orange-800",children:'Estes membros não atendem aos critérios definidos, mas podem ser adicionados manualmente clicando no botão "Adicionar" se o administrador considerar apropriado.'})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsx(S,{variant:"outline",onClick:()=>W(Math.max(1,X-1)),disabled:1===X,children:"Anterior"}),e.jsx("div",{className:"flex gap-3",children:X<5?e.jsx(S,{onClick:()=>W(Math.min(5,X+1)),disabled:!(()=>{switch(X){case 1:return oe.churchId&&oe.churchName;case 2:return oe.voters&&oe.voters.length>0;case 3:case 5:return!0;case 4:return oe.positions&&oe.positions.length>0;default:return!1}})(),children:"Próximo"}):e.jsxs(e.Fragment,{children:[e.jsxs(S,{onClick:async()=>{ue(!0);try{if(!oe.churchId||!oe.churchName||0===oe.positions.length)return B({title:"Erro",description:"Por favor, selecione uma igreja e pelo menos um cargo.",variant:"destructive"}),void ue(!1);const e={...oe,custom_positions:pe,position_descriptions:fe},s=await fetch("/api/elections/config",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},body:JSON.stringify(e)});if(!s.ok){const e=await s.json();throw new Error(e.error||"Erro ao salvar configuração")}{const e=await s.json();ee(!0),ce(s=>({...s,id:e.id})),B({title:"Configuração salva",description:"Os parâmetros da nomeação foram salvos com sucesso."}),W(2)}}catch(e){B({title:"Erro",description:"Não foi possível salvar a configuração.",variant:"destructive"})}finally{ue(!1)}},disabled:me||Z,variant:"outline",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),me?"Salvando...":"Salvar Configuração"]}),e.jsxs(S,{onClick:async()=>{if(oe.voters&&0!==oe.voters.length)if(oe.positions&&0!==oe.positions.length){le(!0);try{if(!(await fetch("/api/elections/start",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},body:JSON.stringify({...oe,configId:oe.id})})).ok)throw new Error("Erro ao iniciar eleição");ce(e=>({...e,status:"active"})),B({title:"Eleição iniciada",description:"A eleição foi iniciada com sucesso. Os votantes já podem acessar a página de votação."})}catch(e){B({title:"Erro",description:"Não foi possível iniciar a eleição.",variant:"destructive"})}finally{le(!1)}}else B({title:"Erro",description:"Selecione pelo menos um cargo.",variant:"destructive"});else B({title:"Erro",description:"Selecione pelo menos um votante.",variant:"destructive"})},disabled:de,variant:"default",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),de?"Iniciando...":"Iniciar Nomeação"]})]})})]}),"active"===oe.status&&e.jsxs(o,{children:[e.jsx(b,{className:"h-4 w-4"}),e.jsxs(c,{children:[e.jsx("strong",{children:"Nomeação ativa!"})," Os votantes já podem acessar a página de votação."]})]})]})}):e.jsx(t,{children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(k,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-muted-foreground",children:"Apenas administradores podem configurar eleições."}),e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg text-left",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Usuário atual:"}),e.jsx("br",{}),"Nome: ",a?.name||"N/A",e.jsx("br",{}),"Email: ",a?.email||"N/A",e.jsx("br",{}),"Role: ",a?.role||"N/A"]})})]})})}export{B as default};
