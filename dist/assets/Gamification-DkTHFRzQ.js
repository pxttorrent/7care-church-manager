import{j as e}from"./ui-CM4P41nz.js";import{r as s}from"./vendor-v6ZOr5pf.js";import{l as a,U as o,H as t,d as i,K as n,h as r,C as l,a as c,b as d,c as m,P as u,B as p,f as x,k as h,e as g,T as f}from"./index-UvOP1Hmf.js";import{T as b,a as j,b as N,c as v}from"./tabs-iK_nd5SO.js";import{D as C,a as w,b as y,c as P}from"./dialog-DDlAo3P4.js";import{g as z,M as A,d as B,e as S,G as $,a as T,b as k,c as E,h as M}from"./mount-icon-DKUggKtl.js";import{T as D}from"./trending-up-BNVUV8Js.js";import{G as V,M as L}from"./mountain-DrIJ4-cp.js";import{A as q}from"./award-CY5yYJZ2.js";import{B as F,C as U}from"./crown-DjHQ8SCf.js";import{T as O}from"./target-ByOQD0_J.js";import{A as R,u as I}from"./useUserPoints-DttAPaVu.js";import{C as G}from"./circle-alert-B-2TOBxx.js";import{R as J}from"./refresh-cw-Dvdmsj6I.js";import"./charts-56rtB2he.js";import"./pointsCalculator-BwBrJ8sV.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=a("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),K=({userData:a,showDetails:x=!0})=>{const[h,g]=s.useState(null),[f,b]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const e=await fetch("/api/system/points-config");if(e.ok){const s=await e.json();g(s)}}catch(e){}finally{b(!1)}})()},[]);const j=e=>{if(!h)return[];const s=h.engajamento||{baixo:0,medio:0,alto:0},o=h.classificacao||{frequente:0,naoFrequente:0},t=h.dizimista||{naoDizimista:0,pontual:0,sazonal:0,recorrente:0},i=h.ofertante||{naoOfertante:0,pontual:0,sazonal:0,recorrente:0},n=(h.tempoBatismo,h.cargos||{umCargo:0,doisCargos:0,tresOuMais:0}),r=h.nomeUnidade||{comUnidade:0},l=h.temLicao||{comLicao:0},c=h.totalPresenca||{zeroATres:0,quatroASete:0,oitoATreze:0},d=h.escolaSabatina||{comunhao:0,missao:0,estudoBiblico:0,batizouAlguem:0,discipuladoPosBatismo:0},m=h.cpfValido||{valido:0},u=h.camposVaziosACMS||{completos:0},p=[];switch(e){case"Engajamento":if(a.engajamento&&"string"==typeof a.engajamento){const e=a.engajamento.toLowerCase();e.includes("baixo")?(p.push("🔸 Participe mais ativamente dos cultos e eventos"),p.push("🔸 Envolva-se em grupos de estudo bíblico"),p.push("🔸 Ofereça-se para ajudar em atividades da igreja"),p.push(`🔸 Potencial de ganhar +${s.medio-s.baixo} pontos`)):(e.includes("médio")||e.includes("medio"))&&(p.push("🔸 Assuma mais responsabilidades na igreja"),p.push("🔸 Liderança em ministérios específicos"),p.push(`🔸 Potencial de ganhar +${s.alto-s.medio} pontos`))}else p.push("🔸 Informe seu nível de engajamento para receber pontos");break;case"Classificação":if(a.classificacao&&"string"==typeof a.classificacao){a.classificacao.toLowerCase().includes("frequente")||(p.push("🔸 Aumente sua frequência nos cultos"),p.push("🔸 Participe regularmente das atividades"),p.push(`🔸 Potencial de ganhar +${o.frequente-o.naoFrequente} pontos`))}else p.push("🔸 Informe sua classificação para receber pontos");break;case"Fidelidade Regular com Dízimo":if(a.dizimista&&"string"==typeof a.dizimista){const e=a.dizimista.toLowerCase();e.includes("não dizimista")||e.includes("nao dizimista")?(p.push("🔸 Comece a contribuir com dízimo"),p.push(`🔸 Potencial de ganhar +${t.pontual-t.naoDizimista} pontos`)):e.includes("pontual")?(p.push("🔸 Torne-se dizimista sazonal"),p.push(`🔸 Potencial de ganhar +${t.sazonal-t.pontual} pontos`)):e.includes("sazonal")&&(p.push("🔸 Torne-se dizimista recorrente"),p.push(`🔸 Potencial de ganhar +${t.recorrente-t.sazonal} pontos`))}else p.push("🔸 Informe seu status de dizimista para receber pontos");break;case"Fidelidade Regular com Ofertas":if(a.ofertante&&"string"==typeof a.ofertante){const e=a.ofertante.toLowerCase();e.includes("não ofertante")||e.includes("nao ofertante")?(p.push("🔸 Comece a contribuir com ofertas"),p.push(`🔸 Potencial de ganhar +${i.pontual-i.naoOfertante} pontos`)):e.includes("pontual")?(p.push("🔸 Torne-se ofertante sazonal"),p.push(`🔸 Potencial de ganhar +${i.sazonal-i.pontual} pontos`)):e.includes("sazonal")&&(p.push("🔸 Torne-se ofertante recorrente"),p.push(`🔸 Potencial de ganhar +${i.recorrente-i.sazonal} pontos`))}else p.push("🔸 Informe seu status de ofertante para receber pontos");break;case"Tempo de Batismo":if(a.tempoBatismo){const e=a.tempoBatismo;"number"==typeof e&&(e<2?(p.push("🔸 Continue crescendo espiritualmente"),p.push(`🔸 Potencial de ganhar +${h.tempoBatismo?.doisAnos||0} pontos em 2 anos`)):e<5?p.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.cincoAnos||0)-(h.tempoBatismo?.doisAnos||0)} pontos em 3 anos`):e<10?p.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.dezAnos||0)-(h.tempoBatismo?.cincoAnos||0)} pontos em 5 anos`):e<20&&p.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.vinteAnos||0)-(h.tempoBatismo?.dezAnos||0)} pontos em 10 anos`))}else p.push("🔸 Informe seu tempo de batismo para receber pontos");break;case"Cargos":if(a.cargos&&Array.isArray(a.cargos)){const e=a.cargos.length;0===e?(p.push("🔸 Candidate-se a um cargo na igreja"),p.push(`🔸 Potencial de ganhar +${n.umCargo} pontos`)):1===e?(p.push("🔸 Assuma um segundo cargo"),p.push(`🔸 Potencial de ganhar +${n.doisCargos-n.umCargo} pontos`)):2===e&&(p.push("🔸 Assuma um terceiro cargo"),p.push(`🔸 Potencial de ganhar +${n.tresOuMais-n.doisCargos} pontos`))}else p.push("🔸 Candidate-se a cargos na igreja para receber pontos");break;case"Nome da Unidade":a.nomeUnidade&&a.nomeUnidade.trim()||(p.push("🔸 Cadastre-se em uma unidade"),p.push(`🔸 Potencial de ganhar +${r.comUnidade} pontos`));break;case"Tem Lição":a.temLicao||(p.push("🔸 Participe de estudos bíblicos"),p.push(`🔸 Potencial de ganhar +${l.comLicao} pontos`));break;case"Total de Presença":if(void 0!==a.totalPresenca){const e=a.totalPresenca;e<=3?(p.push("🔸 Aumente sua frequência nos cultos"),p.push(`🔸 Potencial de ganhar +${c.quatroASete-c.zeroATres} pontos`)):e<=7&&(p.push("🔸 Continue aumentando sua presença"),p.push(`🔸 Potencial de ganhar +${c.oitoATreze-c.quatroASete} pontos`))}else p.push("🔸 Informe sua frequência para receber pontos");break;case"Batizou Alguém":a.batizouAlguem&&0!==a.batizouAlguem||(p.push("🔸 Envolva-se em evangelismo"),p.push(`🔸 Potencial de ganhar +${d.batizouAlguem} pontos por batismo`));break;case"CPF Válido":a.cpfValido&&"Sim"===a.cpfValido||(p.push("🔸 Atualize seu CPF no sistema"),p.push(`🔸 Potencial de ganhar +${m.valido} pontos`));break;case"Campos Vazios ACMS":!0===a.camposVaziosACMS&&(p.push("🔸 Complete todos os campos do seu perfil"),p.push(`🔸 Potencial de ganhar +${u.completos} pontos`));break;case"Comunhão (ES)":a.escolaSabatina?.comunhao&&0!==a.escolaSabatina.comunhao?(p.push("🔸 Continue participando de comunhões"),p.push(`🔸 Cada atividade vale +${d.comunhao} pontos`)):(p.push("🔸 Participe de atividades de comunhão"),p.push(`🔸 Potencial de ganhar +${d.comunhao} pontos por atividade`));break;case"Missão (ES)":a.escolaSabatina?.missao&&0!==a.escolaSabatina.missao?(p.push("🔸 Continue com o trabalho missionário"),p.push(`🔸 Cada atividade vale +${d.missao} pontos`)):(p.push("🔸 Envolva-se em atividades missionárias"),p.push(`🔸 Potencial de ganhar +${d.missao} pontos por atividade`));break;case"Estudo Bíblico (ES)":a.escolaSabatina?.estudoBiblico&&0!==a.escolaSabatina.estudoBiblico?(p.push("🔸 Continue estudando a Bíblia"),p.push(`🔸 Cada estudo vale +${d.estudoBiblico} pontos`)):(p.push("🔸 Participe de estudos bíblicos"),p.push(`🔸 Potencial de ganhar +${d.estudoBiblico} pontos por estudo`));break;case"Batizou Alguém (ES)":a.escolaSabatina?.batizouAlguem&&0!==a.escolaSabatina.batizouAlguem?(p.push("🔸 Continue liderando batismos"),p.push(`🔸 Cada batismo vale +${d.batizouAlguem} pontos`)):(p.push("🔸 Envolva-se em evangelismo"),p.push(`🔸 Potencial de ganhar +${d.batizouAlguem} pontos por batismo`));break;case"Discipulado Pós-Batismo (ES)":a.escolaSabatina?.discipuladoPosBatismo&&0!==a.escolaSabatina.discipuladoPosBatismo?(p.push("🔸 Continue o discipulado"),p.push(`🔸 Cada acompanhamento vale +${d.discipuladoPosBatismo} pontos`)):(p.push("🔸 Acompanhe novos batizados"),p.push(`🔸 Potencial de ganhar +${d.discipuladoPosBatismo} pontos por acompanhamento`))}return p},N=a.actualPoints||0,v=z(N),C=e=>{if(!h)return 0;try{switch(e){case"Engajamento":if(a.engajamento&&"string"==typeof a.engajamento){const e=a.engajamento.toLowerCase();if(e.includes("baixo"))return safeConfig.engajamento.baixo;if(e.includes("médio")||e.includes("medio"))return safeConfig.engajamento.medio;if(e.includes("alto"))return safeConfig.engajamento.alto}return 0;case"Classificação":if(a.classificacao&&"string"==typeof a.classificacao){return a.classificacao.toLowerCase().includes("frequente")?safeConfig.classificacao.frequente:safeConfig.classificacao.naoFrequente}return 0;case"Dizimista":if(a.dizimista&&"string"==typeof a.dizimista){const e=a.dizimista.toLowerCase();if(e.includes("não dizimista")||e.includes("nao dizimista"))return safeConfig.dizimista.naoDizimista;if(e.includes("pontual"))return safeConfig.dizimista.pontual;if(e.includes("sazonal"))return safeConfig.dizimista.sazonal;if(e.includes("recorrente"))return safeConfig.dizimista.recorrente}return 0;case"Ofertante":if(a.ofertante&&"string"==typeof a.ofertante){const e=a.ofertante.toLowerCase();if(e.includes("não ofertante")||e.includes("nao ofertante"))return safeConfig.ofertante.naoOfertante;if(e.includes("pontual"))return safeConfig.ofertante.pontual;if(e.includes("sazonal"))return safeConfig.ofertante.sazonal;if(e.includes("recorrente"))return safeConfig.ofertante.recorrente}return 0;case"Tempo de Batismo":if(a.tempoBatismo)if("string"==typeof a.tempoBatismo&&a.tempoBatismo.length>0){if(a.tempoBatismo.includes("2 a 4"))return h.tempoBatismo?.doisAnos||0;if(a.tempoBatismo.includes("5 a 9"))return h.tempoBatismo?.cincoAnos||0;if(a.tempoBatismo.includes("10 a 14"))return h.tempoBatismo?.dezAnos||0;if(a.tempoBatismo.includes("15 a 19"))return h.tempoBatismo?.vinteAnos||0;if(a.tempoBatismo.includes("20 a 29")||a.tempoBatismo.includes("30+"))return h.tempoBatismo?.maisVinte||0}else if("number"==typeof a.tempoBatismo){if(a.tempoBatismo>=2&&a.tempoBatismo<5)return h.tempoBatismo?.doisAnos||0;if(a.tempoBatismo>=5&&a.tempoBatismo<10)return h.tempoBatismo?.dezAnos||0;if(a.tempoBatismo>=10&&a.tempoBatismo<20)return h.tempoBatismo?.vinteAnos||0;if(a.tempoBatismo>=20&&a.tempoBatismo<30)return h.tempoBatismo?.vinteAnos||0;if(a.tempoBatismo>=30)return h.tempoBatismo?.maisVinte||0}return 0;case"Cargos":if(a.cargos&&Array.isArray(a.cargos)){const e=a.cargos.length;if(1===e)return h.cargos?.umCargo||0;if(2===e)return h.cargos?.doisCargos||0;if(e>=3)return h.cargos?.tresOuMais||0}return 0;case"Nome da Unidade":return a.nomeUnidade&&a.nomeUnidade.trim()?safeConfig.nomeUnidade.comUnidade:0;case"Tem Lição":return a.temLicao?safeConfig.temLicao.comLicao:0;case"Total de Presença":if(void 0!==a.totalPresenca){const e=a.totalPresenca;if(e>=0&&e<=3)return safeConfig.totalPresenca.zeroATres;if(e>=4&&e<=7)return safeConfig.totalPresenca.quatroASete;if(e>=8&&e<=13)return safeConfig.totalPresenca.oitoATreze}return 0;case"Batizou Alguém":return a.batizouAlguem?"number"==typeof a.batizouAlguem?a.batizouAlguem>0?safeConfig.escolaSabatina.batizouAlguem:0:a.batizouAlguem?safeConfig.escolaSabatina.batizouAlguem:0:0;case"CPF Válido":return a.cpfValido?"string"==typeof a.cpfValido?"Sim"===a.cpfValido?safeConfig.cpfValido.valido:0:a.cpfValido?safeConfig.cpfValido.valido:0:0;case"Campos Vazios ACMS":return!1===a.camposVaziosACMS?safeConfig.camposVaziosACMS.completos:0;default:return 0}}catch(s){return 0}},w=e=>{if(!h)return 0;if(!a.escolaSabatina)return 0;try{switch(e){case"comunhao":return(a.escolaSabatina.comunhao||0)*safeConfig.escolaSabatina.comunhao;case"missao":return(a.escolaSabatina.missao||0)*safeConfig.escolaSabatina.missao;case"estudoBiblico":return(a.escolaSabatina.estudoBiblico||0)*safeConfig.escolaSabatina.estudoBiblico;case"batizouAlguem":return(a.escolaSabatina.batizouAlguem||0)*safeConfig.escolaSabatina.batizouAlguem;case"discipuladoPosBatismo":return(a.escolaSabatina.discipuladoPosBatismo||0)*safeConfig.escolaSabatina.discipuladoPosBatismo;default:return 0}}catch(s){return 0}},y=[{name:"Engajamento",points:C("Engajamento"),icon:D,color:"text-blue-600",bgColor:"bg-blue-50",description:"Nível de participação e envolvimento"},{name:"Classificação",points:C("Classificação"),icon:o,color:"text-green-600",bgColor:"bg-green-50",description:"Status de frequência na igreja"},{name:"Fidelidade Regular com Dízimo",points:C("Dizimista"),icon:V,color:"text-purple-600",bgColor:"bg-purple-50",description:"Fidelidade regular com dízimo"},{name:"Fidelidade Regular com Ofertas",points:C("Ofertante"),icon:t,color:"text-red-600",bgColor:"bg-red-50",description:"Contribuição com ofertas"},{name:"Tempo de Batismo",points:C("Tempo de Batismo"),icon:i,color:"text-orange-600",bgColor:"bg-orange-50",description:"Anos desde o batismo"},{name:"Cargos",points:C("Cargos"),icon:q,color:"text-indigo-600",bgColor:"bg-indigo-50",description:"Funções na igreja"},{name:"Nome da Unidade",points:C("Nome da Unidade"),icon:n,color:"text-emerald-600",bgColor:"bg-emerald-50",description:"Unidade cadastrada"},{name:"Tem Lição",points:C("Tem Lição"),icon:F,color:"text-amber-600",bgColor:"bg-amber-50",description:"Participação em estudos"},{name:"Total de Presença",points:C("Total de Presença"),icon:i,color:"text-violet-600",bgColor:"bg-violet-50",description:"Frequência nos cultos"},{name:"CPF Válido",points:C("CPF Válido"),icon:n,color:"text-sky-600",bgColor:"bg-sky-50",description:"Documentação em dia"},{name:"Campos Vazios ACMS",points:C("Campos Vazios ACMS"),icon:L,color:"text-stone-600",bgColor:"bg-stone-50",description:"Perfil completo no sistema"}],P=[{name:"Comunhão (ES)",points:w("comunhao"),icon:o,color:"text-blue-600",bgColor:"bg-blue-50",description:"Participação em comunhão"},{name:"Missão (ES)",points:w("missao"),icon:O,color:"text-green-600",bgColor:"bg-green-50",description:"Atividades missionárias"},{name:"Estudo Bíblico (ES)",points:w("estudoBiblico"),icon:F,color:"text-purple-600",bgColor:"bg-purple-50",description:"Estudos bíblicos realizados"},{name:"Batizou Alguém (ES)",points:w("batizouAlguem"),icon:U,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Liderança em batismos"},{name:"Discipulado Pós-Batismo (ES)",points:w("discipuladoPosBatismo"),icon:r,color:"text-orange-600",bgColor:"bg-orange-50",description:"Acompanhamento pós-batismo"}],$=P.reduce((e,s)=>e+s.points,0),T=y.reduce((e,s)=>e+s.points,0)+$;return f?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando configuração de pontos..."})]})})})]}):h?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais do Usuário"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{iconType:B(N),className:"h-5 w-5"}),e.jsx("div",{className:"text-sm font-medium",children:S(N)})]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.name})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(N/1e3*100),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completude"}),e.jsx(u,{value:Math.round(N/1e3*100),className:"h-2 mt-2"})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Categorias Principais"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:y.map(s=>{const a=s.icon,o=j(s.name),t=o.length>0,i=(e=>{if(!h)return 0;switch(e){case"Engajamento":return safeConfig.engajamento.alto;case"Classificação":return safeConfig.classificacao.frequente;case"Fidelidade Regular com Dízimo":case"Fidelidade regular com dízimo":return safeConfig.dizimista.recorrente;case"Fidelidade Regular com Ofertas":return safeConfig.ofertante.recorrente;case"Tempo de Batismo":{const e=h.tempoBatismo;return Math.max(e.doisAnos||0,e.cincoAnos||0,e.dezAnos||0,e.vinteAnos||0,e.maisVinte||0)}case"Cargos":return safeConfig.cargos.tresOuMais;case"Nome da Unidade":return safeConfig.nomeUnidade.comUnidade;case"Tem Lição":return safeConfig.temLicao.comLicao;case"Total de Presença":return safeConfig.totalPresenca.oitoATreze;case"CPF Válido":return safeConfig.cpfValido.valido;case"Campos Vazios ACMS":return safeConfig.camposVaziosACMS.completos;default:return 0}})(s.name),n=i>0&&s.points>=i;return e.jsxs("div",{className:`p-3 rounded-lg border ${s.bgColor} hover:shadow-md transition-shadow group min-w-0 ${n?"ring-2 ring-green-200 border-green-300":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(a,{className:`h-4 w-4 ${s.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[s.points," pts"]}),n&&e.jsx(p,{variant:"outline",className:"text-[10px] bg-green-50 text-green-700 border-green-200",children:"Máximo"}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:s.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((s,a)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:s},a))})]})]},s.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Escola Sabatina"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:P.map(s=>{const a=s.icon,o=j(s.name),t=o.length>0;return e.jsxs("div",{className:`p-3 rounded-lg border ${s.bgColor} hover:shadow-md transition-shadow group min-w-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(a,{className:`h-4 w-4 ${s.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[s.points," pts"]}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:s.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((s,a)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:s},a))})]})]},s.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resumo dos Totais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Calculado"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:$}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Escola Sabatina"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais"})]})]})]})]})]})]}):e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Erro ao carregar configuração de pontos"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-primary hover:underline",children:"Tentar novamente"})]})})]})},Q=({userPoints:a=0,showCurrent:o=!0,className:t=""})=>{const i="number"==typeof a?a:a?.actualPoints||0,[n,u]=s.useState(null),[x,h]=s.useState(!1),g=$.find(e=>i>=e.minPoints&&(!e.maxPoints||i<=e.maxPoints));return e.jsxs(l,{className:`bg-gradient-to-br from-slate-50 to-blue-50 border-slate-200 ${t}`,children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-xl",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600"}),"Jornada dos Montes Espirituais"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sua ascensão espiritual através dos montes bíblicos"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-9 gap-2 md:gap-3",children:$.map((s,a)=>{const o=i>=s.minPoints&&(!s.maxPoints||i<=s.maxPoints),t=i>(s.maxPoints||s.minPoints),n=a===(g?.id||0)+1;return e.jsxs("div",{className:"relative group cursor-pointer transition-all duration-300 "+(o?"scale-110 z-10":t?"scale-105":"scale-100"),onClick:()=>(e=>{u(e),h(!0)})(s),children:[e.jsx(l,{className:`h-32 md:h-40 transition-all duration-300 border-2 ${o?"ring-4 ring-orange-400 border-orange-300 bg-gradient-to-b from-orange-50 to-orange-100 shadow-lg":t?"border-green-300 bg-gradient-to-b from-green-50 to-green-100 shadow-md":n?"border-blue-300 bg-gradient-to-b from-blue-50 to-blue-100 shadow-sm":"border-gray-200 bg-gradient-to-b from-gray-50 to-gray-100"} hover:shadow-lg hover:scale-105`,children:e.jsxs(m,{className:"p-2 md:p-3 h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-2xl md:text-4xl mb-2 transition-all duration-300 "+(o?"scale-125":"scale-100"),children:e.jsx(A,{iconType:s.icon,className:"h-8 w-8 md:h-12 md:w-12 "+(o?"text-orange-600":t?"text-green-600":"text-gray-600")})}),e.jsx("div",{className:"text-center font-bold text-xs md:text-sm mb-1 transition-colors duration-300 "+(o?"text-orange-700":t?"text-green-700":"text-gray-600"),children:s.mount}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:[s.minPoints,"+ pts"]})]})}),o&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-orange-500 text-white text-xs px-2 py-1 animate-pulse",children:[e.jsx(r,{className:"h-3 w-3 mr-1"}),"Atual"]})}),t&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-green-500 text-white text-xs px-2 py-1",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Concluído"]})})]},s.id)})})}),e.jsx(C,{open:x,onOpenChange:h,children:e.jsxs(w,{className:"max-w-2xl max-h-[85vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(y,{className:"pb-6",children:e.jsxs(P,{className:"text-center text-3xl font-bold text-amber-800",children:[n?.mount," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col items-center space-y-6 p-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-56 h-56 flex items-center justify-center bg-white rounded-2xl shadow-lg p-6",children:e.jsx(A,{iconType:n?.icon||"",className:"w-full h-full"})})}),e.jsxs("div",{className:"w-full text-center space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-3xl font-bold ${n?.color||"text-gray-600"}`,children:n?.mount}),e.jsx("div",{className:"text-xl text-amber-700 font-medium",children:n?.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-base",children:n?.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Necessários"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-800",children:[n?.minPoints," - ",n?.maxPoints||"∞"," pts"]})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Status Atual"}),e.jsx("div",{className:"text-base font-semibold text-amber-800",children:i>=n?.minPoints&&(!n?.maxPoints||i<=n.maxPoints)?"Conquistado":i>(n?.maxPoints||n?.minPoints||0)?"Superado":"Em Progresso"})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Situações espirituais alcançadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:(e=>{if(!e)return[];const s=(e.mount||"").toLowerCase();return s.includes("jordão")?["Compromisso público com Deus renovado","Início de jornada espiritual intencional","Decisão de seguir os passos de Jesus no cotidiano"]:s.includes("sinai")?["Aliança reafirmada com os princípios divinos","Obediência e reverência aprofundadas","Disciplina espiritual fortalecida"]:s.includes("carmelo")?["Fé provada e fortalecida diante de desafios","Ousadia em testemunhar","Confiança em milagres e providência de Deus"]:s.includes("oliveiras")?["Vida de oração constante","Comunhão diária cultivada","Entrega de ansiedades ao Senhor"]:s.includes("morias")||s.includes("moríah")||s.includes("moriá")?["Confiança plena nos planos de Deus","Entrega de áreas sensíveis do coração","Adoração mesmo em meio a provas"]:s.includes("tabor")?["Transformação do caráter em Cristo","Sensibilidade à voz do Espírito","Iluminação espiritual para novas etapas"]:s.includes("sião")?["Pertencimento ao povo de Deus","Alegria no culto e na adoração","Esperança consolidada nas promessas"]:s.includes("nebo")?["Visão do propósito e do futuro","Resiliência em períodos de espera","Gratidão pelas etapas vencidas"]:s.includes("canaã")?["Descanso nas promessas cumpridas","Frutificação e serviço abençoador","Novo ciclo de missão com maturidade espiritual"]:["Crescimento na fé e na comunhão","Perseverança em oração e estudo","Testemunho prático no dia a dia"]})(n).map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 mt-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 text-sm leading-relaxed",children:s})]},a))})]})]})]})]})})]})};function W(){x();const{data:a,isLoading:o,error:t,refetch:i}=I(),[n,r]=s.useState("my-progress"),[p,$]=s.useState(!1);if(o)return e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando sua pontuação..."})]})})});if(t||!a)return e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||"Erro ao carregar dados de pontuação"}),e.jsxs(g,{onClick:i,className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Tentar novamente"]})]})})});const{total:D,breakdown:V,userData:q}=a,F=z(D),O=T(D),R=k(D),H=E(D);return e.jsxs(h,{children:[e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(f,{className:"h-8 w-8 text-yellow-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Minha Pontuação"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Acompanhe seu progresso na jornada espiritual"})]}),e.jsxs(b,{value:n,onValueChange:r,className:"w-full",children:[e.jsx(j,{className:"grid w-full grid-cols-1",children:e.jsx(N,{value:"my-progress",children:"Meu Progresso"})}),e.jsxs(v,{value:"my-progress",className:"space-y-6",children:[e.jsxs(l,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:[e.jsx(c,{className:"pb-3",children:e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),"Seu Monte Atual"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("div",{className:"cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>$(!0),children:e.jsx(A,{iconType:B(D),className:"h-72 w-72 mx-auto"})})}),e.jsx("div",{className:M(D)+" text-2xl font-bold mb-2",children:S(D)}),e.jsx("div",{className:"text-lg text-muted-foreground",children:F.name})]}),O&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progresso para ",O.mount]}),e.jsxs("span",{children:[Math.round(R),"%"]})]}),e.jsx(u,{value:R,className:"h-2"}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:H>0?`${H} pontos para ${O.mount}`:"Monte máximo alcançado!"})]}),D>=1e3&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 bg-yellow-50 rounded-lg",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Status Máximo Alcançado!"})]})]})]}),e.jsx(Q,{userPoints:D,showCurrent:!0}),e.jsx(K,{userData:q,showDetails:!0})]})]})]}),e.jsx(C,{open:p,onOpenChange:$,children:e.jsxs(w,{className:"max-w-5xl max-h-[95vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(y,{className:"pb-6",children:e.jsxs(P,{className:"text-center text-3xl font-bold text-amber-800",children:[S(D)," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start space-y-8 lg:space-y-0 lg:space-x-12 p-8",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-80 h-80 lg:w-96 lg:h-96 flex items-center justify-center bg-white rounded-2xl shadow-lg p-8",children:e.jsx(A,{iconType:B(D),className:"w-full h-full"})})}),e.jsxs("div",{className:"flex-1 text-center lg:text-left space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:M(D)+" text-4xl font-bold",children:S(D)}),e.jsx("div",{className:"text-2xl text-amber-700 font-medium",children:F.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-lg",children:F.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Atuais"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:D})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Próximo Nível"}),e.jsx("div",{className:"text-lg font-semibold text-amber-800",children:T(D)?.name||"Máximo Alcançado"})]}),T(D)&&e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Restantes"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:E(D)})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-4",children:"Conquistas Desbloqueadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:F.benefits.map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 font-medium",children:s})]},a))})]})]})]})]})})]})}export{W as default};
