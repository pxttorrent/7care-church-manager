import{j as e}from"./ui-CM4P41nz.js";import{r as t,R as s}from"./vendor-v6ZOr5pf.js";import{C as a,a as r,b as i,c as l,B as o,d as n,e as d,M as c,U as h,R as m,u as x,T as p,P as g,f as u,g as b,S as v,L as f,h as w,X as j,i as N,j as y,k}from"./index-B_VPK2xW.js";import{u as D}from"./useQuery-Bm5fo_M0.js";import{S as C}from"./scroll-area-BM46IvBL.js";import{A as T,a as S,b as E}from"./avatar-DPR4sFtJ.js";import{C as I}from"./cake-_I0ysInY.js";import{T as P}from"./trending-up-DRrbIgn_.js";import{g as q,a as M,b as z,c as A,M as F,d as L,e as K}from"./mount-icon-DKUggKtl.js";import{P as $}from"./pointsCalculator-BwBrJ8sV.js";import{D as _,a as Q,b as O,c as B}from"./dialog-DC-vWYbX.js";import{T as R}from"./textarea-xZf26ccQ.js";import{C as U}from"./checkbox-5CzCMO5o.js";import{H}from"./heart-CgTYB3n7.js";import{C as V}from"./circle-help-C-awsn-x.js";import{S as W}from"./square-check-big-wpnRy8oz.js";import"./charts-56rtB2he.js";const Y=({birthdaysToday:t,birthdaysThisMonth:s,isLoading:h=!1})=>{const m=e=>{try{if(!e||"string"!=typeof e)return"Data inválida";if(e.includes("-")&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,s,a]=e.split("-"),r=parseInt(a),i=parseInt(s);if(r>=1&&r<=31&&i>=1&&i<=12)return`${String(r).padStart(2,"0")}/${String(i).padStart(2,"0")}`}if(e.includes("T")&&e.includes("Z")){const t=e.split("T")[0],[s,a,r]=t.split("-"),i=parseInt(r),l=parseInt(a);if(i>=1&&i<=31&&l>=1&&l<=12)return`${String(i).padStart(2,"0")}/${String(l).padStart(2,"0")}`}const t=new Date(e);if(isNaN(t.getTime())){if(e.includes("/")){const t=e.split("/");if(3===t.length){const[e,s,a]=t,r=parseInt(e),i=parseInt(s);let l=parseInt(a);if(l<100&&(l+=l<50?2e3:1900),r>=1&&r<=31&&i>=1&&i<=12){const e=new Date(l,i-1,r);if(!isNaN(e.getTime()))return e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}}}return"Data inválida"}return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}catch(t){return"Data inválida"}},x=e=>{try{if(e&&(e.includes("10-03")||e.includes("03/10")||e.includes("2024-10-03")||e.includes("2025-10-03")||e.includes("10-03T")||e.includes("03/10/")))return"Sexta";if(!e||"string"!=typeof e)return"Dia inválido";const t=(new Date).getFullYear();let s=e;if(e.includes("T")&&e.includes("Z")){const s=e.split("T")[0],[a,r,i]=s.split("-"),l=new Date(t,parseInt(r)-1,parseInt(i)),o=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"][l.getDay()];return"10"===r&&"03"===i?"Sexta":o}const a=new Date(s);if(isNaN(a.getTime())){if(e.includes("/")){const s=e.split("/");if(3===s.length){const[e,a]=s,r=parseInt(e),i=parseInt(a);if(r>=1&&r<=31&&i>=1&&i<=12){const e=new Date(t,i-1,r),s=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"][e.getDay()];return 10===i&&3===r?"Sexta":s}}}if(e.includes("-")&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[s,a,r]=e.split("-"),i=parseInt(r),l=parseInt(a);if(i>=1&&i<=31&&l>=1&&l<=12){const e=new Date(t,l-1,i),s=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"][e.getDay()];return 10===l&&3===i?"Sexta":s}}return"Dia inválido"}const r=new Date(t,a.getMonth(),a.getDate()),i=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"][r.getDay()];return 9===a.getMonth()&&3===a.getDate()?"Sexta":i}catch(t){return"Dia inválido"}},p=e=>{if(!e)return!1;const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=11},g=e=>{const t=`https://wa.me/55${e.replace(/\D/g,"")}?text=${encodeURIComponent("Olá! Feliz aniversário! 🎂 Que Deus abençoe seu dia!")}`;window.open(t,"_blank")},u=t.filter(e=>{const t=new Date(e.birthDate),s=new Date;return t.getMonth()===s.getMonth()}),b=s.filter(e=>!(e=>{const t=new Date;let s=e;e.includes("T")&&e.includes("Z")&&(s=e.split("T")[0]);const a=new Date(s);if(isNaN(a.getTime())){if(e&&"string"==typeof e&&e.includes("/")){const s=e.split("/");if(3===s.length){const[e,a]=s,r=parseInt(e),i=parseInt(a);return t.getDate()===r&&t.getMonth()===i-1}}if(e&&"string"==typeof e&&e.includes("-")&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[s,a,r]=e.split("-"),i=parseInt(r),l=parseInt(a);return t.getDate()===i&&t.getMonth()===l-1}return!1}return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()})(e.birthDate)).sort((e,t)=>{const s=new Date(e.birthDate),a=new Date(t.birthDate);let r=0,i=0;if(isNaN(s.getTime())){if(e.birthDate&&"string"==typeof e.birthDate&&e.birthDate.includes("/")){const t=e.birthDate.split("/");3===t.length&&(r=parseInt(t[0]))}else if(e.birthDate&&"string"==typeof e.birthDate&&e.birthDate.includes("-")&&e.birthDate.match(/^\d{4}-\d{2}-\d{2}$/)){const t=e.birthDate.split("-");r=parseInt(t[2])}}else r=s.getDate();if(isNaN(a.getTime())){if(t.birthDate&&"string"==typeof t.birthDate&&t.birthDate.includes("/")){const e=t.birthDate.split("/");3===e.length&&(i=parseInt(e[0]))}else if(t.birthDate&&"string"==typeof t.birthDate&&t.birthDate.includes("-")&&t.birthDate.match(/^\d{4}-\d{2}-\d{2}$/)){const e=t.birthDate.split("-");i=parseInt(e[2])}}else i=a.getDate();return r-i});if(h)return e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-rose-500 to-rose-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-600/20 to-rose-800/30 opacity-100 group-hover:from-rose-600/30 group-hover:to-rose-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-rose-400/30 to-rose-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 p-3 lg:p-6 relative z-10",children:e.jsxs(i,{className:"text-xs lg:text-sm font-semibold text-white drop-shadow-md flex items-center gap-1 lg:gap-2",children:[e.jsx(I,{className:"h-3 w-3 lg:h-4 lg:w-4"}),"Aniversariantes do mês"]})}),e.jsx(l,{className:"p-3 lg:p-6 pt-0 lg:pt-0 relative z-10",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-2 lg:h-4 bg-white/20 rounded w-3/4 mb-1 lg:mb-2"}),e.jsx("div",{className:"h-2 lg:h-4 bg-white/20 rounded w-1/2"})]})})]});const v=u.length+b.length;return e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-rose-500 to-rose-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-600/20 to-rose-800/30 opacity-100 group-hover:from-rose-600/30 group-hover:to-rose-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-rose-400/30 to-rose-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 p-3 lg:p-6 relative z-10",children:[e.jsxs(i,{className:"text-xs lg:text-sm font-semibold text-white drop-shadow-md flex items-center gap-1 lg:gap-2",children:[e.jsx(I,{className:"h-3 w-3 lg:h-4 lg:w-4"}),"Aniversariantes do mês"]}),e.jsxs("div",{className:"flex items-center gap-1 lg:gap-2",children:[u.length>0&&e.jsxs(o,{variant:"destructive",className:"text-[10px] lg:text-xs bg-red-500/80 text-white border-0",children:[u.length," hoje"]}),e.jsxs(o,{variant:"outline",className:"text-[10px] lg:text-xs bg-white/20 text-white border-white/30",children:[v," total"]})]})]}),e.jsx(l,{className:"p-3 lg:p-6 pt-0 lg:pt-0 relative z-10",children:0===v?e.jsxs("div",{className:"text-center py-2 lg:py-8",children:[e.jsx(I,{className:"h-6 w-6 lg:h-12 lg:w-12 text-white/60 mx-auto mb-1 lg:mb-3"}),e.jsx("p",{className:"text-[10px] lg:text-sm text-white/70",children:"Nenhum aniversariante este mês"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(C,{className:"h-48",children:e.jsxs("div",{className:"space-y-2 pr-2",children:[u.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("h4",{className:"text-xs font-semibold text-white/90 mb-1 flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),"Aniversariantes de Hoje"]}),e.jsx("div",{className:"space-y-1",children:u.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/20 backdrop-blur-sm border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(S,{src:t.profilePhoto}),e.jsx(E,{className:"text-xs font-medium bg-white/20 text-white",children:t.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold truncate text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-white/70",children:[e.jsx(n,{className:"h-2 w-2"}),e.jsx("span",{children:m(t.birthDate)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:x(t.birthDate)}),t.church&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"text-white/50 truncate",children:t.church})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{variant:"destructive",className:"text-[10px] px-1 py-0 bg-red-500/80 text-white border-0",children:"Hoje!"}),p(t.phone)&&e.jsx(d,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:text-white hover:bg-white/20",onClick:()=>g(t.phone),title:"Enviar mensagem no WhatsApp",children:e.jsx(c,{className:"h-3 w-3"})})]})]},t.id))})]}),b.length>0&&e.jsx("div",{className:"border-t border-white/30 my-2"})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-white/80 mb-1",children:"Outros aniversariantes do mês"}),e.jsx("div",{className:"space-y-1",children:b.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(S,{src:t.profilePhoto}),e.jsx(E,{className:"text-xs font-medium bg-white/20 text-white",children:t.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate text-white/90",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-white/60",children:[e.jsx(n,{className:"h-2 w-2"}),e.jsx("span",{children:m(t.birthDate)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:x(t.birthDate)}),t.church&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"text-white/50 truncate",children:t.church})]})]})]})]}),p(t.phone)&&e.jsx(d,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:text-white hover:bg-white/20",onClick:()=>g(t.phone),title:"Enviar mensagem no WhatsApp",children:e.jsx(c,{className:"h-3 w-3"})})]},t.id))})]})]})})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(C,{className:"h-96",children:e.jsxs("div",{className:"space-y-3 pr-4",children:[u.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white/90 mb-2 flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Aniversariantes de Hoje"]}),e.jsx("div",{className:"space-y-2",children:u.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/20 backdrop-blur-sm border border-white/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxs(T,{className:"h-12 w-12",children:[e.jsx(S,{src:t.profilePhoto}),e.jsx(E,{className:"text-sm font-medium bg-white/20 text-white",children:t.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-semibold truncate text-white",children:t.name}),e.jsx(o,{variant:"destructive",className:"text-xs px-2 py-0 bg-red-500/80 text-white border-0",children:"Hoje!"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/70",children:[e.jsx(n,{className:"h-3 w-3"}),e.jsx("span",{children:m(t.birthDate)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:x(t.birthDate)}),t.church&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"text-white/50",children:t.church})]})]})]})]}),p(t.phone)&&e.jsx(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-white hover:text-white hover:bg-white/20",onClick:()=>g(t.phone),title:"Enviar mensagem no WhatsApp",children:e.jsx(c,{className:"h-4 w-4"})})]},t.id))})]}),b.length>0&&e.jsx("div",{className:"border-t border-white/30 my-4"})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-white/80 mb-2",children:"Outros aniversariantes do mês"}),e.jsx("div",{className:"space-y-2",children:b.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxs(T,{className:"h-10 w-10",children:[e.jsx(S,{src:t.profilePhoto}),e.jsx(E,{className:"text-sm font-medium bg-white/20 text-white",children:t.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("p",{className:"text-sm font-medium truncate text-white/90",children:t.name})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[e.jsx(n,{className:"h-3 w-3"}),e.jsx("span",{children:m(t.birthDate)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:x(t.birthDate)}),t.church&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"text-white/50",children:t.church})]})]})]})]}),p(t.phone)&&e.jsx(d,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-white hover:text-white hover:bg-white/20",onClick:()=>g(t.phone),title:"Enviar mensagem no WhatsApp",children:e.jsx(c,{className:"h-4 w-4"})})]},t.id))})]})]})})})]})})]})},J=({visitsCompleted:t,visitsExpected:s,totalVisits:o=0,visitedPeople:n=0,percentage:c=0,isLoading:x=!1,onRefresh:p})=>{const g=c||(s>0?Math.round(t/s*100):0),u=2*Math.PI*60,b=u,v=u-g/100*u,f=2*Math.PI*15,w=f,j=f-g/100*f;return x?e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-teal-500 to-teal-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-600/20 to-teal-800/30 opacity-100 group-hover:from-teal-600/30 group-hover:to-teal-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-teal-400/30 to-teal-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsx(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 p-3 lg:p-6 relative z-10",children:e.jsxs(i,{className:"text-xs lg:text-sm font-semibold text-white drop-shadow-md flex items-center gap-1 lg:gap-2",children:[e.jsx(h,{className:"h-3 w-3 lg:h-4 lg:w-4"}),"Visitômetro"]})}),e.jsx(l,{className:"p-3 lg:p-6 pt-0 lg:pt-0 relative z-10",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 lg:h-32 bg-white/20 rounded-full mb-2 lg:mb-4"}),e.jsx("div",{className:"h-2 lg:h-4 bg-white/20 rounded w-3/4 mb-1 lg:mb-2"}),e.jsx("div",{className:"h-2 lg:h-4 bg-white/20 rounded w-1/2"})]})})]}):e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-teal-500 to-teal-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-600/20 to-teal-800/30 opacity-100 group-hover:from-teal-600/30 group-hover:to-teal-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-teal-400/30 to-teal-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 p-3 lg:p-6 relative z-10",children:[e.jsxs(i,{className:"text-xs lg:text-sm font-semibold text-white drop-shadow-md flex items-center gap-1 lg:gap-2",children:[e.jsx(h,{className:"h-3 w-3 lg:h-4 lg:w-4"}),"Visitômetro"]}),e.jsx("div",{className:"flex items-center gap-1 lg:gap-2",children:p&&e.jsx(d,{size:"sm",variant:"ghost",onClick:p,className:"h-5 w-5 lg:h-6 lg:w-6 p-0 text-white hover:bg-white/20",title:"Atualizar visitômetro",children:e.jsx(m,{className:"h-2 w-2 lg:h-3 lg:w-3"})})})]}),e.jsxs(l,{className:"h-auto lg:h-96 flex flex-col justify-center p-3 lg:p-6 pt-0 lg:pt-0 relative z-10",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"relative w-10 h-10",children:e.jsxs("svg",{width:"100%",height:"100%",className:"transform -rotate-90",viewBox:"0 0 40 40",children:[e.jsx("circle",{cx:"20",cy:"20",r:"15",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2",fill:"none"}),e.jsx("circle",{cx:"20",cy:"20",r:"15",stroke:"white",strokeWidth:"2",fill:"none",strokeDasharray:w,strokeDashoffset:j,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.8s ease-in-out, stroke 0.3s ease-in-out"}}),e.jsxs("text",{x:"20",y:"20",textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-white",style:{transform:"rotate(90deg)",transformOrigin:"20px 20px"},children:[g,"%"]})]})}),e.jsxs("div",{className:"flex-1 ml-2 text-left space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3 text-white/80"}),e.jsxs("span",{className:"text-[10px] font-medium text-white/80",children:["Pessoas visitadas: ",e.jsxs("span",{className:"font-bold text-white",children:[n||t,"/",s]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3 text-white/80"}),e.jsxs("span",{className:"text-[10px] font-medium text-white/80",children:["Total de visitas realizadas: ",e.jsx("span",{className:"font-bold text-white",children:o})]})]})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("svg",{width:"140",height:"140",className:"transform -rotate-90",children:[e.jsx("circle",{cx:"70",cy:"70",r:60,stroke:"rgba(255,255,255,0.3)",strokeWidth:8,fill:"none"}),e.jsx("circle",{cx:"70",cy:"70",r:60,stroke:"white",strokeWidth:8,fill:"none",strokeDasharray:b,strokeDashoffset:v,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.8s ease-in-out, stroke 0.3s ease-in-out"}}),e.jsxs("g",{stroke:"rgba(255,255,255,0.6)",strokeWidth:"2",children:[e.jsx("line",{x1:"70",y1:"10",x2:"70",y2:"20"}),e.jsx("line",{x1:"110",y1:"30",x2:"105",y2:"35"}),e.jsx("line",{x1:"130",y1:"70",x2:"120",y2:"70"}),e.jsx("line",{x1:"110",y1:"110",x2:"105",y2:"105"}),e.jsx("line",{x1:"70",y1:"130",x2:"70",y2:"120"})]}),e.jsxs("text",{x:"70",y:"70",textAnchor:"middle",dominantBaseline:"middle",className:"text-2xl font-bold fill-white",style:{transform:"rotate(90deg)",transformOrigin:"70px 70px"},children:[g,"%"]})]})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-white/80"}),e.jsx("span",{className:"text-sm font-medium text-white/80",children:"Pessoas Visitadas"})]}),e.jsxs("div",{className:"text-2xl font-bold text-white drop-shadow-lg",children:[n||t," / ",s]}),e.jsx("p",{className:"text-xs text-white/70",children:s-(n||t)>0?s-(n||t)+" pessoas pendentes":"Todas as pessoas foram visitadas!"})]}),e.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-white/80"}),e.jsx("span",{className:"text-sm font-medium text-white/80",children:"Visitas Realizadas"})]}),e.jsx("div",{className:"text-2xl font-bold text-white drop-shadow-lg",children:o}),e.jsx("p",{className:"text-xs text-white/70",children:o>(n||t)?`Média de ${(o/(n||t)).toFixed(1)} visitas por pessoa`:"Uma visita por pessoa"})]})]})]})})]})]})},G=({userData:t,showDetails:s=!1})=>{const o=x(),n=t||{engajamento:"Alto",classificacao:"Recorrente",dizimista:"Recorrente (8-12 meses)",ofertante:"Sazonal (4-7 meses)",tempoBatismo:15,cargos:["Líder de Jovens","Músico"],departamentos:["Jovens","Música","Evangelismo"],nomeUnidade:"Unidade Central",temLicao:!0,comunhao:12,missao:10,estudoBiblico:8,totalPresenca:25,batizouAlguem:!0,discipuladoPosBatismo:5,cpfValido:!0,camposVaziosACMS:!1};let c;if(t&&void 0!==t.actualPoints)c=t.actualPoints;else{c=$.calculateDetailedPoints(n).total}q(c);const h=M(c),m=z(c),u=A(c);return e.jsxs(a,{onClick:()=>o("/gamification"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||o("/gamification")},className:"group relative overflow-hidden bg-gradient-to-br from-yellow-500 to-purple-600 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer flex flex-col",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-600/20 to-purple-700/30 opacity-100 group-hover:from-yellow-600/30 group-hover:to-purple-700/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-400/30 to-purple-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm font-semibold text-white drop-shadow-md",children:"Minha Pontuação"}),e.jsx("div",{className:"p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(p,{className:"h-4 w-4"})})]}),e.jsx(l,{className:"relative z-10 flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Pontos atuais:"}),e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-lg",children:c})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Montanha atual:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{iconType:L(c),className:"h-6 w-6 text-white"}),e.jsx("span",{className:"text-sm font-semibold text-white drop-shadow-lg",children:K(c)})]})]}),h&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/70",children:[e.jsxs("span",{children:["Para ",h.mount]}),e.jsxs("span",{children:[Math.round(m),"%"]})]}),e.jsx(g,{value:m,className:"h-2"}),e.jsx("div",{className:"text-center text-xs text-white/70",children:u>0?`${u} pts restantes`:"Monte máximo!"})]})]})}),e.jsx("div",{className:"px-6 pb-4 mt-auto",children:e.jsx(d,{variant:"link",size:"sm",className:"p-0 text-white/90 hover:text-white",onClick:e=>{e.stopPropagation(),o("/gamification")},children:"Toque para ver mais detalhes"})})]})},Z=[{score:1,emoji:"🍃",label:"Distante",verse:"Tenho, porém, contra ti que deixaste o teu primeiro amor.",reference:"Apocalipse 2:4",description:"Quase não oro, minha Bíblia está fechada, e percebo que outras coisas têm ocupado o lugar de Deus na minha vida.",color:"from-gray-400 to-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-300",textColor:"text-gray-700"},{score:2,emoji:"🔍",label:"Buscando",verse:"Buscai ao Senhor enquanto se pode achar, invocai-o enquanto está perto.",reference:"Isaías 55:6",description:"Sinto falta de Deus, faço algumas orações rápidas, ouço mensagens e até abro a Bíblia, mas ainda sem constância.",color:"from-orange-400 to-orange-500",bgColor:"bg-orange-50",borderColor:"border-orange-300",textColor:"text-orange-700"},{score:3,emoji:"🌱",label:"Enraizando",verse:"Antes, tem o seu prazer na lei do Senhor, e na sua lei medita de dia e de noite.",reference:"Salmo 1:2",description:"Já leio a Bíblia com mais frequência, encontro respostas, começo a praticar e percebo mudanças no meu coração.",color:"from-green-400 to-green-500",bgColor:"bg-green-50",borderColor:"border-green-300",textColor:"text-green-700"},{score:4,emoji:"🌳",label:"Frutificando",verse:"Eu sou a videira, vós as varas; quem permanece em mim, e eu nele, esse dá muito fruto.",reference:"João 15:5",description:"Minha fé começa a transbordar em atitudes, ajudo pessoas, testemunho de Cristo e inspiro outros a segui-lo.",color:"from-blue-400 to-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-300",textColor:"text-blue-700"},{score:5,emoji:"✨",label:"Intimidade",verse:"E andou Enoque com Deus; e já não apareceu, porquanto Deus para si o tomou.",reference:"Gênesis 5:24",description:"Vivo em comunhão diária com Deus, oro constantemente, ouço Sua voz e procuro andar em plena sintonia com Ele.",color:"from-purple-400 to-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-300",textColor:"text-purple-700"}],X=({isOpen:s,onClose:r})=>{const{user:i}=u(),[n,m]=t.useState({score:0,prayerRequest:"",isPrivate:!1,allowChurchMembers:!1}),[x,p]=t.useState(!1),[g,y]=t.useState(null),{toast:k}=b(),D=e=>{m(t=>({...t,score:e}))},C=e=>{y(g===e?null:e)};t.useEffect(()=>{if(null!==g){const e=setTimeout(()=>{y(null)},5e3);return()=>clearTimeout(e)}},[g]);return e.jsx(_,{modalId:"spiritual-checkin-modal",open:s,onOpenChange:r,children:e.jsxs(Q,{className:"max-w-3xl mx-auto w-[90vw]",style:{maxHeight:"calc(100vh - 2rem)"},children:[e.jsx(O,{className:"text-center pb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",children:e.jsx(H,{className:"h-6 w-6 text-white"})}),e.jsx(v,{className:"h-5 w-5 text-purple-500"})]}),e.jsx(B,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Como está sua vida espiritual hoje?"}),e.jsx("p",{className:"text-gray-600 mt-3",children:"Compartilhe sua situação espiritual e, se desejar, um pedido de oração"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs(f,{className:"text-lg font-semibold text-gray-800 flex items-center justify-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-500"}),"Selecione sua situação espiritual"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Escolha de 1 a 5 estrelas"})]}),e.jsx("div",{className:"hidden lg:grid lg:grid-cols-5 gap-4",children:Z.map(t=>e.jsx("div",{className:"relative",children:e.jsx(a,{className:"cursor-pointer transition-all duration-300 hover:shadow-lg border-2 "+(n.score===t.score?`ring-2 ring-blue-500 shadow-lg ${t.bgColor} border-blue-300`:"hover:shadow-md border-gray-200"),children:e.jsxs(l,{className:"p-4 text-center",children:[e.jsxs("button",{onClick:()=>D(t.score),className:"w-full space-y-3",children:[e.jsx("div",{className:"text-3xl",children:t.emoji}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(t.score)].map((t,s)=>e.jsx(w,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},s))}),e.jsxs("div",{children:[e.jsx("div",{className:`font-semibold text-sm ${t.textColor}`,children:t.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Nível ",t.score]})]})]}),e.jsx("button",{onClick:()=>C(t.score),className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-xs hover:scale-110 transition-all duration-200 shadow-lg",title:"Ver explicação",children:e.jsx(V,{className:"h-3 w-3"})})]})})},t.score))}),e.jsx("div",{className:"lg:hidden grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map(t=>e.jsx("div",{className:"relative",children:e.jsx(a,{className:"cursor-pointer transition-all duration-300 hover:shadow-lg border-2 "+(n.score===t.score?`ring-2 ring-blue-500 shadow-lg ${t.bgColor} border-blue-300`:"hover:shadow-md border-gray-200"),children:e.jsxs(l,{className:"p-4",children:[e.jsxs("button",{onClick:()=>D(t.score),className:"w-full flex items-center space-x-4",children:[e.jsx("div",{className:"text-3xl",children:t.emoji}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:[...Array(t.score)].map((t,s)=>e.jsx(w,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},s))}),e.jsx("div",{className:`font-semibold text-base ${t.textColor}`,children:t.label}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Nível ",t.score]})]})]}),e.jsx("button",{onClick:()=>C(t.score),className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center text-xs hover:scale-110 transition-all duration-200 shadow-lg",title:"Ver explicação",children:e.jsx(V,{className:"h-3 w-3"})})]})})},t.score))}),g&&e.jsxs("div",{className:"mt-4 p-4 bg-white border border-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:Z[g-1].emoji}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-base text-gray-900",children:["Nível ",g," – ",Z[g-1].label]}),e.jsx("div",{className:"flex space-x-1",children:[...Array(g)].map((t,s)=>e.jsx(w,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},s))})]})]}),e.jsx("button",{onClick:()=>y(null),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(j,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:`${Z[g-1].bgColor} rounded-lg p-4 border ${Z[g-1].borderColor}`,children:[e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:Z[g-1].description}),e.jsxs("div",{className:"bg-white rounded-md p-3 border-l-4 border-blue-400",children:[e.jsxs("p",{className:"text-sm text-gray-600 italic mb-1",children:['"',Z[g-1].verse,'"']}),e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:Z[g-1].reference})]})]})]})]}),e.jsx(a,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-purple-50",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{htmlFor:"prayerRequest",className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[e.jsx(c,{className:"h-5 w-5 text-blue-500"}),"Pedido de Oração",e.jsx(o,{variant:"secondary",className:"text-xs",children:"Opcional"})]}),e.jsx(R,{id:"prayerRequest",placeholder:"Compartilhe seu pedido de oração, agradecimento ou testemunho...",value:n.prayerRequest,onChange:e=>m(t=>({...t,prayerRequest:e.target.value})),rows:4,className:"resize-none border-blue-200 focus:border-blue-400 focus:ring-blue-400"}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[n.prayerRequest.length,"/500 caracteres"]})]})})}),e.jsx(a,{className:"border-gray-200",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{className:"text-base font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-gray-600"}),"Configurações de Privacidade"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx(U,{id:"isPrivate",checked:n.isPrivate,onCheckedChange:e=>m(t=>({...t,isPrivate:e})),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(f,{htmlFor:"isPrivate",className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[e.jsx(N,{className:"h-4 w-4 text-red-500"}),"Apenas o pastor verá meus motivos de oração"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Seu pedido será mantido em total confidencialidade"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg transition-colors "+(n.isPrivate?"bg-gray-100 opacity-50":"bg-gray-50 hover:bg-gray-100"),children:[e.jsx(U,{id:"allowChurchMembers",checked:n.allowChurchMembers,onCheckedChange:e=>m(t=>({...t,allowChurchMembers:e})),disabled:n.isPrivate,className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(f,{htmlFor:"allowChurchMembers",className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[e.jsx(h,{className:"h-4 w-4 text-green-500"}),"Permitir que membros da igreja vejam meu pedido"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Outros membros poderão orar por você"})]})]})]})]})})}),e.jsx("div",{className:"pt-2",children:e.jsx(d,{onClick:async()=>{if(0!==n.score){p(!0);try{if(!(await fetch("/api/emotional-checkin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i?.id,score:n.score,prayerRequest:n.prayerRequest,isPrivate:n.isPrivate,allowChurchMembers:n.allowChurchMembers})})).ok)throw new Error("Erro ao enviar check-in");k({title:"Check-in espiritual enviado!",description:"Obrigado por compartilhar sua situação espiritual conosco."}),r(),m({score:0,prayerRequest:"",isPrivate:!1,allowChurchMembers:!1}),y(null)}catch(e){k({title:"Erro ao enviar check-in",description:"Não foi possível enviar seu check-in espiritual. Tente novamente.",variant:"destructive"})}finally{p(!1)}}else k({title:"Selecione como está espiritualmente",description:"Por favor, escolha uma situação espiritual de 1 a 5 para continuar.",variant:"destructive"})},disabled:x||0===n.score,className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Enviar Check-in Espiritual"]})})})]})]})})},ee=s.memo(()=>{const{user:o}=u(),c=x(),m=y(),{shouldShowCheckIn:p,markCheckInComplete:v}=(()=>{const[e,s]=t.useState(!1),[a,r]=t.useState(!0);t.useEffect(()=>{i()},[]);const i=async()=>{try{const e=(new Date).toDateString();localStorage.getItem("lastSpiritualCheckIn")!==e&&s(!0)}catch(e){}finally{r(!1)}};return{shouldShowCheckIn:e,isLoading:a,markCheckInComplete:()=>{const e=(new Date).toDateString();localStorage.setItem("lastSpiritualCheckIn",e),s(!1)},resetCheckIn:()=>{localStorage.removeItem("lastSpiritualCheckIn"),s(!0)}}})();b();const[f,w]=t.useState(!1);t.useEffect(()=>{m.removeQueries({queryKey:["tasks-from-sheets"]}),m.removeQueries({queryKey:["tasks"]}),m.invalidateQueries({queryKey:["tasks"]}),m.invalidateQueries({queryKey:["/api/dashboard/stats"]})},[m]);const{data:j}=D({queryKey:["/api/users"],queryFn:async()=>{const e=await fetch("/api/users");if(!e.ok)return[];return await e.json()},staleTime:12e4,refetchInterval:3e5,refetchOnWindowFocus:!1}),N="/api/google-sheets/proxy",C="1i-x-0KiciwACRztoKX-YHlXT4FsrAzaKwuH-hHkD8go",T="tarefas",{data:S,isLoading:E}=D({queryKey:["tasks"],queryFn:async()=>{const e=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":"1"},body:JSON.stringify({action:"getTasks",spreadsheetId:C,sheetName:T})});if(!e.ok)throw new Error("Erro ao buscar tarefas do Google Sheets");const t=((await e.json()).tasks||[]).map(e=>({id:e.id,title:e.titulo||"",description:e.descricao||"",status:"Concluída"===e.status?"completed":"Em Progresso"===e.status?"in_progress":"pending",priority:"Alta"===e.prioridade?"high":"Baixa"===e.prioridade?"low":"medium",assigned_to_name:e.responsavel||"",created_by_name:e.criador||"",church:e.igreja||"",created_at:e.data_criacao?new Date(e.data_criacao.split("/").reverse().join("-")).toISOString():(new Date).toISOString(),updated_at:(new Date).toISOString(),due_date:e.data_vencimento||"",completed_at:e.data_conclusao||"",tags:e.tags?e.tags.split(",").filter(Boolean):[]}));t.filter(e=>"pending"===e.status||"in_progress"===e.status).length,t.filter(e=>"completed"===e.status).length;return t.forEach((e,t)=>{}),t},staleTime:12e4,refetchInterval:3e5,refetchOnWindowFocus:!1}),{data:I,isLoading:P}=D({queryKey:["/api/dashboard/stats",o?.id],queryFn:async()=>{const e=await fetch("/api/dashboard/stats",{headers:{"x-user-id":o?.id?.toString()||""}});if(!e.ok)throw new Error("Failed to fetch dashboard stats");return e.json()},staleTime:12e4,refetchInterval:3e5,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!0,enabled:!!o?.id}),q=t.useMemo(()=>{const e=j?.length||0,t=j?.filter(e=>"member"===e.role||"admin"===e.role).length||0,s=j?.filter(e=>e.role?.includes("missionary")).length||0,a=j?.filter(e=>"interested"===e.role).length||0,r=j?.filter(e=>"approved"===e.status).length||0;let i=14,l=14,o=0;if(S&&Array.isArray(S)){const e=S.filter((e,t,s)=>s.findIndex(t=>t.id===e.id)===t);i=Math.min(e.length,14),l=Math.min(e.filter(e=>"pending"===e.status||"in_progress"===e.status).length,14),o=e.filter(e=>"completed"===e.status).length}return{totalUsers:e,totalMembers:t,totalMissionaries:s,totalInterested:a,approvedUsers:r,totalTasks:i,pendingTasks:l,completedTasks:o,totalPrayers:I?.totalPrayers||0,totalVisits:I?.totalVisits||0,totalActivities:I?.totalActivities||0,totalPoints:I?.totalPoints||0}},[I,S,j]),{data:M,isLoading:z}=D({queryKey:["/api/users/birthdays",o?.id,o?.role],queryFn:async()=>{const e={};o?.id&&(e["x-user-id"]=o.id.toString(),e["x-user-role"]=o.role);const t=await fetch("/api/users/birthdays",{headers:e});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},enabled:!!o,refetchInterval:3e4,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0}),{data:A,refetch:F,isLoading:L}=D({queryKey:["/api/dashboard/visits"],queryFn:async()=>{const e=await fetch("/api/dashboard/visits");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()},refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),{data:K,isLoading:$}=D({queryKey:["/api/relationships/missionary",o?.id],queryFn:async()=>{if(!o?.id||"missionary"!==o.role)return[];const e=await fetch(`/api/relationships/missionary/${o.id}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()},enabled:!!o?.id&&o.role.includes("missionary"),refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),{data:_,isLoading:Q}=D({queryKey:["/api/events",o?.role],queryFn:async()=>{if(!o?.role)return[];const e=await fetch(`/api/events?role=${o.role}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()},enabled:!!o?.role,refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),{data:O,isLoading:B}=D({queryKey:["/api/emotional-checkins/admin"],queryFn:async()=>{if("admin"!==o?.role)return[];const e=await fetch("/api/emotional-checkins/admin");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()},enabled:"admin"===o?.role,refetchInterval:6e4,staleTime:3e4,gcTime:3e5}),R=t.useMemo(()=>{if(!_||!Array.isArray(_)||0===_.length)return 0;const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,1),a=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t};return _.filter(e=>{if(!e||"object"!=typeof e)return!1;const r=e.startDate||e.date,i=e.endDate||e.end_date||e.date;return((e,t,s,a)=>{if(!e&&!t)return!1;const r=e??t??s;return r<a&&(t??e??r)>=s})(a(r),a(i),t,s)}).length},[_]),U=({events:t})=>{if(!t||!Array.isArray(t))return e.jsx("p",{className:"text-xs text-gray-500",children:"Sem próximos eventos"});const s=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t},a=[...t].filter(e=>e&&"object"==typeof e).map(e=>{const t=e.startDate||e.date;return{...e,_start:s(t)}}).filter(e=>e._start&&e._start>=new Date).sort((e,t)=>e._start.getTime()-t._start.getTime());if(0===a.length)return e.jsx("p",{className:"text-xs text-gray-500",children:"Sem próximos eventos"});const r=a[0],i=r._start.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"2-digit"});return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-blue-100/60 bg-gradient-to-br from-white to-blue-50/40 p-3 shadow-sm",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-blue-500/10 text-blue-700",children:e.jsx(n,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-blue-700/70",children:"Próximo evento"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:r.title||"Sem título"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Data"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:i})]})]})},V=({birthdays:t})=>{if(z)return e.jsx("p",{className:"text-xs text-gray-500",children:"Carregando..."});if(t.today&&t.today.length>0)return e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-pink-100/60 bg-gradient-to-br from-white to-pink-50/40 p-3 shadow-sm",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-pink-500/10 text-pink-700",children:e.jsx("span",{className:"text-lg",children:"🎂"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-pink-700/70",children:"Aniversariante do dia"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:t.today[0].name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Hoje"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"🎉"})]})]});{const s=le(t);return s?e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-pink-100/60 bg-gradient-to-br from-white to-pink-50/40 p-3 shadow-sm",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-pink-500/10 text-pink-700",children:e.jsx("span",{className:"text-lg",children:"🎂"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-pink-700/70",children:"Próximo aniversário"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Data"}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:oe(s.nextBirthday)})]})]}):e.jsx("p",{className:"text-xs text-gray-500",children:"Sem aniversários próximos"})}},{data:Z,isLoading:ee}=D({queryKey:["church-interested",o?.id],queryFn:async()=>{if(!o?.id||"member"!==o.role&&"missionary"!==o.role)return[];const e=await fetch("/api/my-interested",{headers:{"x-user-id":o.id.toString()}});if(!e.ok){await e.text();throw new Error(`HTTP error! status: ${e.status}`)}return await e.json()},enabled:!!o?.id&&("member"===o.role||"missionary"===o.role),refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),{data:te,isLoading:se}=D({queryKey:["my-relationships",o?.id],queryFn:async()=>{if(!o?.id||"member"!==o.role&&"missionary"!==o.role)return[];const e=await fetch(`/api/relationships/missionary/${o.id}`);if(!e.ok){await e.text();throw new Error(`HTTP error! status: ${e.status}`)}return await e.json()},enabled:!!o?.id&&("member"===o.role||"missionary"===o.role),refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),{data:ae,isLoading:re}=D({queryKey:["/api/users",o?.id,"points-details"],queryFn:async()=>{if(!o?.id)return null;const e=await fetch(`/api/users/${o.id}/points-details`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()},enabled:!!o?.id,refetchInterval:3e5,staleTime:24e4,gcTime:6e5}),ie=t.useMemo(()=>({totalUsers:q?.totalUsers||0,totalInterested:q?.totalInterested||0,totalMembers:q?.totalMembers||0,totalMissionaries:q?.totalMissionaries||0,approvedUsers:q?.approvedUsers||0,totalTasks:q?.totalTasks||0,pendingTasks:q?.pendingTasks||0,completedTasks:q?.completedTasks||0,interestedBeingDiscipled:I?.interestedBeingDiscipled||0,totalChurches:I?.totalChurches||0,pendingApprovals:I?.pendingApprovals||0,thisWeekEvents:I?.thisWeekEvents||0,totalEvents:I?.totalEvents||0,totalPrayers:q?.totalPrayers||0,totalVisits:q?.totalVisits||0,totalActivities:q?.totalActivities||0,totalPoints:q?.totalPoints||0}),[q,I]);s.useEffect(()=>{let e=!0;const t=t=>{try{if(!e)return;m.invalidateQueries({queryKey:["/api/dashboard/stats"]}),m.invalidateQueries({queryKey:["/api/dashboard/visits"]}),m.invalidateQueries({queryKey:["/api/users"]}),"missionary-assigned"!==t.detail?.type&&"missionary-removed"!==t.detail?.type||(m.invalidateQueries({queryKey:["/api/relationships"]}),m.invalidateQueries({queryKey:["/api/relationships/missionary"]})),"role-reverted"===t.detail?.type&&(m.invalidateQueries({queryKey:["/api/dashboard/stats"]}),m.invalidateQueries({queryKey:["/api/users"]})),"missionary-profile-deactivated"===t.detail?.type&&(m.invalidateQueries({queryKey:["/api/dashboard/stats"]}),m.invalidateQueries({queryKey:["/api/users"]}),m.invalidateQueries({queryKey:["/api/missionary-profiles"]}))}catch(s){}};return window.addEventListener("user-updated",t),window.addEventListener("user-approved",t),window.addEventListener("user-rejected",t),window.addEventListener("user-imported",t),window.addEventListener("relationship-updated",t),window.addEventListener("relationship-created",t),window.addEventListener("relationship-deleted",t),()=>{e=!1,window.removeEventListener("user-updated",t),window.removeEventListener("user-approved",t),window.removeEventListener("user-rejected",t),window.removeEventListener("user-imported",t),window.removeEventListener("relationship-updated",t),window.removeEventListener("relationship-created",t),window.removeEventListener("relationship-deleted",t)}},[m,F]),s.useEffect(()=>{if(!o||!q)return;const e=async()=>{try{await m.invalidateQueries({queryKey:["/api/dashboard/stats"]}),await m.invalidateQueries({queryKey:["/api/users"]})}catch(e){}},t=setInterval(e,3e4),s=()=>{e()};return window.addEventListener("focus",s),()=>{clearInterval(t),window.removeEventListener("focus",s)}},[o,q,m]),s.useEffect(()=>{if("admin"===o?.role&&q){const e=setTimeout(async()=>{try{const e=await fetch("/api/system/check-missionary-profiles",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){(await e.json()).correctedCount>0&&(m.invalidateQueries({queryKey:["/api/dashboard/stats"]}),m.invalidateQueries({queryKey:["/api/users"]}),m.invalidateQueries({queryKey:["/api/missionary-profiles"]}))}}catch(e){}},2e3);return()=>clearTimeout(e)}},[o?.role,q,m]);const le=e=>{if(!e||!e.all||!Array.isArray(e.all)||0===e.all.length)return null;const t=new Date,s=t.getFullYear(),a=e.all.filter(e=>e&&"object"==typeof e&&e.birthDate).map(e=>{const a=new Date(e.birthDate),r=new Date(s,a.getMonth(),a.getDate());return r<t&&r.setFullYear(s+1),{...e,nextBirthday:r}});return a.sort((e,t)=>e.nextBirthday-t.nextBirthday),a[0]},oe=e=>`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}`;if(!o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-200 via-blue-200 to-slate-300",children:e.jsxs("div",{className:"text-center p-8 rounded-2xl bg-white/90 backdrop-blur-sm shadow-xl border border-white/30",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-amber-600 bg-clip-text text-transparent",children:"Carregando..."}),e.jsx("p",{className:"text-gray-600",children:"Verificando autenticação"})]})});const ne="admin"===o?.role,de=ne?"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 relative":"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 relative",ce=ne?"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-transparent to-blue-400/5":"absolute inset-0 bg-gradient-to-br from-blue-100/30 via-transparent to-blue-50/20",he=ne?"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.15),transparent_50%)]":"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.05),transparent_50%)]";return e.jsx(k,{children:e.jsxs("div",{className:de,children:[e.jsx("div",{className:ce}),e.jsx("div",{className:he}),e.jsxs("div",{className:"relative space-y-4 lg:space-y-8 p-3 lg:p-6 max-w-7xl mx-auto",children:["admin"===o.role&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4 lg:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6",children:[e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-blue-500 to-blue-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-blue-800/30 opacity-100 group-hover:from-blue-600/30 group-hover:to-blue-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/30 to-blue-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Total de Usuários"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(h,{className:"h-3 w-3 lg:h-4 lg:w-4"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.totalUsers}),e.jsxs("p",{className:"text-xs lg:text-sm text-white/80 mt-1",children:[ie.approvedUsers," usuários aprovados"]}),e.jsxs(d,{onClick:()=>c("/users"),className:"mt-2 lg:mt-3 h-7 lg:h-9 px-3 lg:px-4 text-xs lg:text-sm bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white shadow-md hover:shadow-lg transition-all duration-200 border-0",children:[e.jsx(h,{className:"h-2 w-2 lg:h-3 lg:w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Gerenciar Usuários"}),e.jsx("span",{className:"sm:hidden",children:"Usuários"})]})]})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-red-500 to-red-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-600/20 to-red-800/30 opacity-100 group-hover:from-red-600/30 group-hover:to-red-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-red-400/30 to-red-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Pessoas interessadas"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(H,{className:"h-3 w-3 lg:h-4 lg:w-4"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6 space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.totalInterested}),e.jsx("span",{className:"text-xs lg:text-sm text-white/80",children:"Interessados"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-white/20",children:[e.jsx("div",{className:"text-lg lg:text-2xl font-bold text-white/90 drop-shadow",children:P?"...":ie.interestedBeingDiscipled||0}),e.jsx("span",{className:"text-xs lg:text-sm text-white/80 leading-tight",children:"Estão Sendo Discipuladas"})]})]})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-orange-500 to-orange-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600/20 to-orange-800/30 opacity-100 group-hover:from-orange-600/30 group-hover:to-orange-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/30 to-orange-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Tarefas"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(W,{className:"h-3 w-3 lg:h-4 lg:w-4"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6 space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.pendingApprovals}),e.jsx("span",{className:"text-xs lg:text-sm text-white/80",children:"Pendentes"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1 border-t border-white/20",children:[e.jsx("div",{className:"text-lg lg:text-2xl font-bold text-white/90 drop-shadow",children:P?"...":ie.completedTasks||0}),e.jsx("span",{className:"text-xs lg:text-sm text-white/80 leading-tight",children:"Concluídas"})]}),e.jsxs(d,{onClick:()=>c("/tasks"),className:"mt-2 lg:mt-3 h-7 lg:h-9 px-3 lg:px-4 text-xs lg:text-sm bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white shadow-md hover:shadow-lg transition-all duration-200 border-0 w-full",children:[e.jsx(W,{className:"h-2 w-2 lg:h-3 lg:w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Gerenciar Tarefas"}),e.jsx("span",{className:"sm:hidden",children:"Tarefas"})]})]})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-green-500 to-green-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-600/20 to-green-800/30 opacity-100 group-hover:from-green-600/30 group-hover:to-green-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-400/30 to-green-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Membros"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(h,{className:"h-3 w-3 lg:h-4 lg:w-4"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.totalMembers}),e.jsx("p",{className:"text-xs lg:text-sm text-white/80 mt-1",children:"Membros ativos da igreja"})]})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/20 to-purple-800/30 opacity-100 group-hover:from-purple-600/30 group-hover:to-purple-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-400/30 to-purple-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Missionários"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(H,{className:"h-3 w-3 lg:h-4 lg:w-4"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.totalMissionaries}),e.jsx("p",{className:"text-xs lg:text-sm text-white/80 mt-1",children:"Discipuladores ativos"})]})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-pink-500 to-pink-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-600/20 to-pink-800/30 opacity-100 group-hover:from-pink-600/30 group-hover:to-pink-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-400/30 to-pink-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-1 lg:pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Check-ins Espirituais"}),e.jsx("div",{className:"p-1 lg:p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx("span",{className:"text-sm lg:text-base filter brightness-0 invert",children:"🙏"})})]}),e.jsxs(l,{className:"relative z-10 p-3 lg:p-6",children:[e.jsx("div",{className:"text-xl lg:text-4xl font-bold text-white drop-shadow-lg",children:B?"...":O?.length||0}),e.jsx("p",{className:"text-xs lg:text-sm text-white/80 mt-1",children:"Últimos check-ins espirituais dos membros"}),e.jsxs(d,{onClick:()=>w(!0),className:"mt-2 lg:mt-3 h-7 lg:h-9 px-3 lg:px-4 text-xs lg:text-sm bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white shadow-md hover:shadow-lg transition-all duration-200 border-0",children:[e.jsx("span",{className:"mr-1 filter brightness-0 invert",children:"🙏"}),e.jsx("span",{className:"hidden sm:inline",children:"Fazer meu check-in"}),e.jsx("span",{className:"sm:hidden",children:"Check-in"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8",children:[e.jsx("div",{className:"group",children:e.jsx(J,{visitsCompleted:A?.completed||0,visitsExpected:A?.expected||0,totalVisits:A?.totalVisits||0,visitedPeople:A?.visitedPeople||0,percentage:A?.percentage||0,isLoading:P||L,onRefresh:F})}),e.jsx("div",{className:"group",children:e.jsx(Y,{birthdaysToday:M?.today||[],birthdaysThisMonth:M?.thisMonth||[],isLoading:z})})]})]})}),(o.role.includes("missionary")||o.role.includes("member"))&&(()=>{const t=Z&&Array.isArray(Z)?Z.length:0,s=te&&Array.isArray(te)?te.filter(e=>{const t=e&&"object"==typeof e&&e.missionaryId===o?.id&&"active"===e.status;return t}):[],h=te&&Array.isArray(te)?te.filter(e=>{const t=e&&"object"==typeof e&&e.missionaryId===o?.id&&"pending"===e.status;return t}):[],m=s.length+h.length;return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(a,{onClick:()=>c("/my-interested"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||c("/my-interested")},className:"group relative overflow-hidden bg-gradient-to-br from-purple-500 to-purple-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/20 to-purple-800/30 opacity-100 group-hover:from-purple-600/30 group-hover:to-purple-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-400/30 to-purple-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Interessados"}),e.jsx("div",{className:"p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(H,{className:"h-4 w-4"})})]}),e.jsx(l,{className:"relative z-10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm lg:text-base text-white/80",children:"Vinculados a você:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl lg:text-3xl font-bold text-white drop-shadow-lg",children:se?"...":m}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.length>0&&e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full",title:"Ativos"}),h.length>0&&e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full",title:"Pendentes"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm lg:text-base text-white/80",children:"Total da igreja:"}),e.jsx("span",{className:"text-lg lg:text-xl font-bold text-white drop-shadow-lg",children:ee?"...":t})]}),t>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/70",children:[e.jsx("span",{children:"Seu alcance"}),e.jsxs("span",{children:[t>0?Math.round(m/t*100):0,"%"]})]}),e.jsx(g,{value:t>0?m/t*100:0,className:"h-2"})]})]})}),e.jsx("div",{className:"px-6 pb-4 mt-auto",children:e.jsx(d,{variant:"link",size:"sm",className:"p-0 text-white/90 hover:text-white",onClick:e=>{e.stopPropagation(),c("/my-interested")},children:"Toque para ver mais detalhes"})})]}),e.jsxs(a,{onClick:()=>c("/calendar"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||c("/calendar")},className:"group relative overflow-hidden bg-gradient-to-br from-blue-500 to-blue-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-blue-800/30 opacity-100 group-hover:from-blue-600/30 group-hover:to-blue-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/30 to-blue-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Eventos do Mês"}),e.jsx("div",{className:"p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(n,{className:"h-4 w-4"})})]}),e.jsx(l,{className:"relative z-10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm lg:text-base text-white/80",children:"Eventos deste mês:"}),e.jsx("span",{className:"text-2xl lg:text-3xl font-bold text-white drop-shadow-lg",children:Q?"...":R})]}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{events:_||[]})}),e.jsx("div",{className:"mt-2",children:e.jsx(V,{birthdays:M})})]})}),e.jsx("div",{className:"px-6 pb-4 mt-auto",children:e.jsx(d,{variant:"link",size:"sm",className:"p-0 text-white/90 hover:text-white",onClick:e=>{e.stopPropagation(),c("/calendar")},children:"Toque para ver mais detalhes"})})]}),e.jsx(G,{showDetails:!0,userData:{...ae?.userData,actualPoints:ae?.points}})]})})})(),"interested"===o.role&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-cyan-500 to-cyan-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-600/20 to-cyan-800/30 opacity-100 group-hover:from-cyan-600/30 group-hover:to-cyan-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-cyan-400/30 to-cyan-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Eventos Disponíveis"}),e.jsx("div",{className:"p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(n,{className:"h-4 w-4"})})]}),e.jsx(l,{className:"relative z-10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm lg:text-base text-white/80",children:"Disponíveis para você:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl lg:text-3xl font-bold text-white drop-shadow-lg",children:Q?"...":_?.length||0}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full",title:"Eventos visíveis"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm lg:text-base text-gray-600",children:"Eventos desta semana:"}),e.jsx("span",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-green-600 to-green-800 bg-clip-text text-transparent",children:P?"...":_?.length||0})]}),ie.totalEvents>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Seu acesso"}),e.jsxs("span",{children:[ie.totalEvents>0?Math.round((_?.length||0)/ie.totalEvents*100):0,"%"]})]}),e.jsx(g,{value:ie.totalEvents>0?(_?.length||0)/ie.totalEvents*100:0,className:"h-2"})]})]})})]}),e.jsxs(a,{className:"group relative overflow-hidden bg-gradient-to-br from-indigo-500 to-indigo-700 border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/20 to-indigo-800/30 opacity-100 group-hover:from-indigo-600/30 group-hover:to-indigo-800/40 transition-all duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-400/30 to-indigo-600/40 rounded-full -translate-y-16 translate-x-16 group-hover:scale-110 transition-transform duration-500"}),e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(i,{className:"text-sm lg:text-base font-semibold text-white drop-shadow-md",children:"Total Usuários"}),e.jsx("div",{className:"p-2 rounded-full bg-white/20 backdrop-blur-sm text-white shadow-lg group-hover:bg-white/30 transition-all duration-300",children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsxs(l,{className:"relative z-10",children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-white drop-shadow-lg",children:P?"...":ie.totalUsers}),e.jsx("p",{className:"text-xs lg:text-sm text-white/80 mt-1",children:"Na comunidade"})]})]})]})}),e.jsx(X,{isOpen:f||p,onClose:()=>{w(!1),v()}})]})]})})});export{ee as default};
