import{j as e}from"./ui-CM4P41nz.js";import{r as a}from"./vendor-v6ZOr5pf.js";import{l as s,U as o,H as t,d as i,N as n,h as r,C as l,a as c,b as d,c as m,P as u,B as p,f as x,k as h,e as g,T as b}from"./index-B14_-j5m.js";import{T as f,a as j,b as N,c as v}from"./tabs-C9pgpUih.js";import{D as w,a as C,b as P,c as y}from"./dialog-IKBTKeKm.js";import{g as z,M as A,d as S,e as B,G as T,a as $,b as k,c as V,h as M}from"./mount-icon-DKUggKtl.js";import{T as E}from"./trending-up-DR6MVbLD.js";import{G as D,M as L}from"./mountain-DzoQfede.js";import{A as q}from"./award-Cmon80Tm.js";import{B as F,C as U}from"./crown-BY0mQAM0.js";import{T as O}from"./target-D6HdpmnV.js";import{A as R,u as I}from"./useUserPoints-_y01nw_l.js";import{C as G}from"./circle-alert-uMW-VWYV.js";import{R as J}from"./refresh-cw-BLOeDgSs.js";import"./charts-56rtB2he.js";import"./pointsCalculator-BwBrJ8sV.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=s("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),W=({userData:s,showDetails:x=!0})=>{const[h,g]=a.useState(null),[b,f]=a.useState(!0),j=h?{engajamento:h.engajamento||{baixo:0,medio:0,alto:0},classificacao:h.classificacao||{frequente:0,naoFrequente:0},dizimista:h.dizimista||{naoDizimista:0,pontual:0,sazonal:0,recorrente:0},ofertante:h.ofertante||{naoOfertante:0,pontual:0,sazonal:0,recorrente:0},tempoBatismo:h.tempoBatismo||{doisAnos:0,cincoAnos:0,dezAnos:0,vinteAnos:0,maisVinte:0},cargos:h.cargos||{umCargo:0,doisCargos:0,tresOuMais:0},nomeUnidade:h.nomeUnidade||{comUnidade:0},temLicao:h.temLicao||{comLicao:0},totalPresenca:h.totalPresenca||{zeroATres:0,quatroASete:0,oitoATreze:0},escolaSabatina:h.escolaSabatina||{comunhao:0,missao:0,estudoBiblico:0,batizouAlguem:0,discipuladoPosBatismo:0},cpfValido:h.cpfValido||{valido:0},camposVaziosACMS:h.camposVaziosACMS||{completos:0}}:null;a.useEffect(()=>{(async()=>{try{const e=await fetch("/api/system/points-config");if(e.ok){const a=await e.json();g(a)}}catch(e){}finally{f(!1)}})()},[]);const N=e=>{if(!h||!j)return[];const a=[];switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();e.includes("baixo")?(a.push("🔸 Participe mais ativamente dos cultos e eventos"),a.push("🔸 Envolva-se em grupos de estudo bíblico"),a.push("🔸 Ofereça-se para ajudar em atividades da igreja"),a.push(`🔸 Potencial de ganhar +${j.engajamento.medio-j.engajamento.baixo} pontos`)):(e.includes("médio")||e.includes("medio"))&&(a.push("🔸 Assuma mais responsabilidades na igreja"),a.push("🔸 Liderança em ministérios específicos"),a.push(`🔸 Potencial de ganhar +${j.engajamento.alto-j.engajamento.medio} pontos`))}else a.push("🔸 Informe seu nível de engajamento para receber pontos");break;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){s.classificacao.toLowerCase().includes("frequente")||(a.push("🔸 Aumente sua frequência nos cultos"),a.push("🔸 Participe regularmente das atividades"),a.push(`🔸 Potencial de ganhar +${j.classificacao.frequente-j.classificacao.naoFrequente} pontos`))}else a.push("🔸 Informe sua classificação para receber pontos");break;case"Fidelidade Regular com Dízimo":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();e.includes("não dizimista")||e.includes("nao dizimista")?(a.push("🔸 Comece a contribuir com dízimo"),a.push(`🔸 Potencial de ganhar +${j.dizimista.pontual-j.dizimista.naoDizimista} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se dizimista sazonal"),a.push(`🔸 Potencial de ganhar +${j.dizimista.sazonal-j.dizimista.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se dizimista recorrente"),a.push(`🔸 Potencial de ganhar +${j.dizimista.recorrente-j.dizimista.sazonal} pontos`))}else a.push("🔸 Informe seu status de dizimista para receber pontos");break;case"Fidelidade Regular com Ofertas":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();e.includes("não ofertante")||e.includes("nao ofertante")?(a.push("🔸 Comece a contribuir com ofertas"),a.push(`🔸 Potencial de ganhar +${j.ofertante.pontual-j.ofertante.naoOfertante} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se ofertante sazonal"),a.push(`🔸 Potencial de ganhar +${j.ofertante.sazonal-j.ofertante.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se ofertante recorrente"),a.push(`🔸 Potencial de ganhar +${j.ofertante.recorrente-j.ofertante.sazonal} pontos`))}else a.push("🔸 Informe seu status de ofertante para receber pontos");break;case"Tempo de Batismo":if(s.tempoBatismo){const e=s.tempoBatismo;"number"==typeof e&&(e<2?(a.push("🔸 Continue crescendo espiritualmente"),a.push(`🔸 Potencial de ganhar +${h.tempoBatismo?.doisAnos||0} pontos em 2 anos`)):e<5?a.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.cincoAnos||0)-(h.tempoBatismo?.doisAnos||0)} pontos em 3 anos`):e<10?a.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.dezAnos||0)-(h.tempoBatismo?.cincoAnos||0)} pontos em 5 anos`):e<20&&a.push(`🔸 Potencial de ganhar +${(h.tempoBatismo?.vinteAnos||0)-(h.tempoBatismo?.dezAnos||0)} pontos em 10 anos`))}else a.push("🔸 Informe seu tempo de batismo para receber pontos");break;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;0===e?(a.push("🔸 Candidate-se a um cargo na igreja"),a.push(`🔸 Potencial de ganhar +${j.cargos.umCargo} pontos`)):1===e?(a.push("🔸 Assuma um segundo cargo"),a.push(`🔸 Potencial de ganhar +${j.cargos.doisCargos-j.cargos.umCargo} pontos`)):2===e&&(a.push("🔸 Assuma um terceiro cargo"),a.push(`🔸 Potencial de ganhar +${j.cargos.tresOuMais-j.cargos.doisCargos} pontos`))}else a.push("🔸 Candidate-se a cargos na igreja para receber pontos");break;case"Nome da Unidade":s.nomeUnidade&&s.nomeUnidade.trim()||(a.push("🔸 Cadastre-se em uma unidade"),a.push(`🔸 Potencial de ganhar +${j.nomeUnidade.comUnidade} pontos`));break;case"Tem Lição":s.temLicao||(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${j.temLicao.comLicao} pontos`));break;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;e<=3?(a.push("🔸 Aumente sua frequência nos cultos"),a.push(`🔸 Potencial de ganhar +${j.totalPresenca.quatroASete-j.totalPresenca.zeroATres} pontos`)):e<=7&&(a.push("🔸 Continue aumentando sua presença"),a.push(`🔸 Potencial de ganhar +${j.totalPresenca.oitoATreze-j.totalPresenca.quatroASete} pontos`))}else a.push("🔸 Informe sua frequência para receber pontos");break;case"Batizou Alguém":s.batizouAlguem&&0!==s.batizouAlguem||(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"CPF Válido":s.cpfValido&&"Sim"===s.cpfValido||(a.push("🔸 Atualize seu CPF no sistema"),a.push(`🔸 Potencial de ganhar +${j.cpfValido.valido} pontos`));break;case"Campos Vazios ACMS":!0===s.camposVaziosACMS&&(a.push("🔸 Complete todos os campos do seu perfil"),a.push(`🔸 Potencial de ganhar +${j.camposVaziosACMS.completos} pontos`));break;case"Comunhão (ES)":s.escolaSabatina?.comunhao&&0!==s.escolaSabatina.comunhao?(a.push("🔸 Continue participando de comunhões"),a.push(`🔸 Cada atividade vale +${j.escolaSabatina.comunhao} pontos`)):(a.push("🔸 Participe de atividades de comunhão"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.comunhao} pontos por atividade`));break;case"Missão (ES)":s.escolaSabatina?.missao&&0!==s.escolaSabatina.missao?(a.push("🔸 Continue com o trabalho missionário"),a.push(`🔸 Cada atividade vale +${j.escolaSabatina.missao} pontos`)):(a.push("🔸 Envolva-se em atividades missionárias"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.missao} pontos por atividade`));break;case"Estudo Bíblico (ES)":s.escolaSabatina?.estudoBiblico&&0!==s.escolaSabatina.estudoBiblico?(a.push("🔸 Continue estudando a Bíblia"),a.push(`🔸 Cada estudo vale +${j.escolaSabatina.estudoBiblico} pontos`)):(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.estudoBiblico} pontos por estudo`));break;case"Batizou Alguém (ES)":s.escolaSabatina?.batizouAlguem&&0!==s.escolaSabatina.batizouAlguem?(a.push("🔸 Continue liderando batismos"),a.push(`🔸 Cada batismo vale +${j.escolaSabatina.batizouAlguem} pontos`)):(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"Discipulado Pós-Batismo (ES)":s.escolaSabatina?.discipuladoPosBatismo&&0!==s.escolaSabatina.discipuladoPosBatismo?(a.push("🔸 Continue o discipulado"),a.push(`🔸 Cada acompanhamento vale +${j.escolaSabatina.discipuladoPosBatismo} pontos`)):(a.push("🔸 Acompanhe novos batizados"),a.push(`🔸 Potencial de ganhar +${j.escolaSabatina.discipuladoPosBatismo} pontos por acompanhamento`))}return a},v=s.actualPoints||0,w=z(v),C=e=>{if(!h||!j)return 0;try{switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();if(e.includes("baixo"))return j.engajamento.baixo;if(e.includes("médio")||e.includes("medio"))return j.engajamento.medio;if(e.includes("alto"))return j.engajamento.alto}return 0;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){return s.classificacao.toLowerCase().includes("frequente")?j.classificacao.frequente:j.classificacao.naoFrequente}return 0;case"Dizimista":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();if(e.includes("não dizimista")||e.includes("nao dizimista"))return j.dizimista.naoDizimista;if(e.includes("pontual"))return j.dizimista.pontual;if(e.includes("sazonal"))return j.dizimista.sazonal;if(e.includes("recorrente"))return j.dizimista.recorrente}return 0;case"Ofertante":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();if(e.includes("não ofertante")||e.includes("nao ofertante"))return j.ofertante.naoOfertante;if(e.includes("pontual"))return j.ofertante.pontual;if(e.includes("sazonal"))return j.ofertante.sazonal;if(e.includes("recorrente"))return j.ofertante.recorrente}return 0;case"Tempo de Batismo":if(s.tempoBatismo)if("string"==typeof s.tempoBatismo&&s.tempoBatismo.length>0){if(s.tempoBatismo.includes("2 a 4"))return h.tempoBatismo?.doisAnos||0;if(s.tempoBatismo.includes("5 a 9"))return h.tempoBatismo?.cincoAnos||0;if(s.tempoBatismo.includes("10 a 14"))return h.tempoBatismo?.dezAnos||0;if(s.tempoBatismo.includes("15 a 19"))return h.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo.includes("20 a 29")||s.tempoBatismo.includes("30+"))return h.tempoBatismo?.maisVinte||0}else if("number"==typeof s.tempoBatismo){if(s.tempoBatismo>=2&&s.tempoBatismo<5)return h.tempoBatismo?.doisAnos||0;if(s.tempoBatismo>=5&&s.tempoBatismo<10)return h.tempoBatismo?.dezAnos||0;if(s.tempoBatismo>=10&&s.tempoBatismo<20)return h.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo>=20&&s.tempoBatismo<30)return h.tempoBatismo?.vinteAnos||0;if(s.tempoBatismo>=30)return h.tempoBatismo?.maisVinte||0}return 0;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;if(1===e)return h.cargos?.umCargo||0;if(2===e)return h.cargos?.doisCargos||0;if(e>=3)return h.cargos?.tresOuMais||0}return 0;case"Nome da Unidade":return s.nomeUnidade&&s.nomeUnidade.trim()?j.nomeUnidade.comUnidade:0;case"Tem Lição":return s.temLicao?j.temLicao.comLicao:0;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;if(e>=0&&e<=3)return j.totalPresenca.zeroATres;if(e>=4&&e<=7)return j.totalPresenca.quatroASete;if(e>=8&&e<=13)return j.totalPresenca.oitoATreze}return 0;case"Batizou Alguém":return s.batizouAlguem?"number"==typeof s.batizouAlguem?s.batizouAlguem>0?j.escolaSabatina.batizouAlguem:0:s.batizouAlguem?j.escolaSabatina.batizouAlguem:0:0;case"CPF Válido":return s.cpfValido?"string"==typeof s.cpfValido?"Sim"===s.cpfValido?j.cpfValido.valido:0:s.cpfValido?j.cpfValido.valido:0:0;case"Campos Vazios ACMS":return!1===s.camposVaziosACMS?j.camposVaziosACMS.completos:0;default:return 0}}catch(a){return 0}},P=e=>{if(!h||!j)return 0;if(!s.escolaSabatina)return 0;try{switch(e){case"comunhao":return(s.escolaSabatina.comunhao||0)*j.escolaSabatina.comunhao;case"missao":return(s.escolaSabatina.missao||0)*j.escolaSabatina.missao;case"estudoBiblico":return(s.escolaSabatina.estudoBiblico||0)*j.escolaSabatina.estudoBiblico;case"batizouAlguem":return(s.escolaSabatina.batizouAlguem||0)*j.escolaSabatina.batizouAlguem;case"discipuladoPosBatismo":return(s.escolaSabatina.discipuladoPosBatismo||0)*j.escolaSabatina.discipuladoPosBatismo;default:return 0}}catch(a){return 0}},y=[{name:"Engajamento",points:C("Engajamento"),icon:E,color:"text-blue-600",bgColor:"bg-blue-50",description:"Nível de participação e envolvimento"},{name:"Classificação",points:C("Classificação"),icon:o,color:"text-green-600",bgColor:"bg-green-50",description:"Status de frequência na igreja"},{name:"Fidelidade Regular com Dízimo",points:C("Dizimista"),icon:D,color:"text-purple-600",bgColor:"bg-purple-50",description:"Fidelidade regular com dízimo"},{name:"Fidelidade Regular com Ofertas",points:C("Ofertante"),icon:t,color:"text-red-600",bgColor:"bg-red-50",description:"Contribuição com ofertas"},{name:"Tempo de Batismo",points:C("Tempo de Batismo"),icon:i,color:"text-orange-600",bgColor:"bg-orange-50",description:"Anos desde o batismo"},{name:"Cargos",points:C("Cargos"),icon:q,color:"text-indigo-600",bgColor:"bg-indigo-50",description:"Funções na igreja"},{name:"Nome da Unidade",points:C("Nome da Unidade"),icon:n,color:"text-emerald-600",bgColor:"bg-emerald-50",description:"Unidade cadastrada"},{name:"Tem Lição",points:C("Tem Lição"),icon:F,color:"text-amber-600",bgColor:"bg-amber-50",description:"Participação em estudos"},{name:"Total de Presença",points:C("Total de Presença"),icon:i,color:"text-violet-600",bgColor:"bg-violet-50",description:"Frequência nos cultos"},{name:"CPF Válido",points:C("CPF Válido"),icon:n,color:"text-sky-600",bgColor:"bg-sky-50",description:"Documentação em dia"},{name:"Campos Vazios ACMS",points:C("Campos Vazios ACMS"),icon:L,color:"text-stone-600",bgColor:"bg-stone-50",description:"Perfil completo no sistema"}],T=[{name:"Comunhão (ES)",points:P("comunhao"),icon:o,color:"text-blue-600",bgColor:"bg-blue-50",description:"Participação em comunhão"},{name:"Missão (ES)",points:P("missao"),icon:O,color:"text-green-600",bgColor:"bg-green-50",description:"Atividades missionárias"},{name:"Estudo Bíblico (ES)",points:P("estudoBiblico"),icon:F,color:"text-purple-600",bgColor:"bg-purple-50",description:"Estudos bíblicos realizados"},{name:"Batizou Alguém (ES)",points:P("batizouAlguem"),icon:U,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Liderança em batismos"},{name:"Discipulado Pós-Batismo (ES)",points:P("discipuladoPosBatismo"),icon:r,color:"text-orange-600",bgColor:"bg-orange-50",description:"Acompanhamento pós-batismo"}],$=T.reduce((e,a)=>e+a.points,0),k=y.reduce((e,a)=>e+a.points,0)+$;return b?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando configuração de pontos..."})]})})})]}):h?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:v}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais do Usuário"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{iconType:S(v),className:"h-5 w-5"}),e.jsx("div",{className:"text-sm font-medium",children:B(v)})]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:w.name})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(v/1e3*100),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completude"}),e.jsx(u,{value:Math.round(v/1e3*100),className:"h-2 mt-2"})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Categorias Principais"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:y.map(a=>{const s=a.icon,o=N(a.name),t=o.length>0,i=(e=>{if(!h||!j)return 0;switch(e){case"Engajamento":return j.engajamento.alto;case"Classificação":return j.classificacao.frequente;case"Fidelidade Regular com Dízimo":case"Fidelidade regular com dízimo":return j.dizimista.recorrente;case"Fidelidade Regular com Ofertas":return j.ofertante.recorrente;case"Tempo de Batismo":{const e=j.tempoBatismo;return Math.max(e.doisAnos||0,e.cincoAnos||0,e.dezAnos||0,e.vinteAnos||0,e.maisVinte||0)}case"Cargos":return j.cargos.tresOuMais;case"Nome da Unidade":return j.nomeUnidade.comUnidade;case"Tem Lição":return j.temLicao.comLicao;case"Total de Presença":return j.totalPresenca.oitoATreze;case"CPF Válido":return j.cpfValido.valido;case"Campos Vazios ACMS":return j.camposVaziosACMS.completos;default:return 0}})(a.name),n=i>0&&a.points>=i;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0 ${n?"ring-2 ring-green-200 border-green-300":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),n&&e.jsx(p,{variant:"outline",className:"text-[10px] bg-green-50 text-green-700 border-green-200",children:"Máximo"}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Escola Sabatina"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:T.map(a=>{const s=a.icon,o=N(a.name),t=o.length>0;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resumo dos Totais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Calculado"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:$}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Escola Sabatina"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:v}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais"})]})]})]})]})]})]}):e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Erro ao carregar configuração de pontos"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-primary hover:underline",children:"Tentar novamente"})]})})]})},K=({userPoints:s=0,showCurrent:o=!0,className:t=""})=>{const i="number"==typeof s?s:s?.actualPoints||0,[n,u]=a.useState(null),[x,h]=a.useState(!1),g=T.find(e=>i>=e.minPoints&&(!e.maxPoints||i<=e.maxPoints));return e.jsxs(l,{className:`bg-gradient-to-br from-slate-50 to-blue-50 border-slate-200 ${t}`,children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-xl",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600"}),"Jornada dos Montes Espirituais"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sua ascensão espiritual através dos montes bíblicos"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-9 gap-2 md:gap-3",children:T.map((a,s)=>{const o=i>=a.minPoints&&(!a.maxPoints||i<=a.maxPoints),t=i>(a.maxPoints||a.minPoints),n=s===(g?.id||0)+1;return e.jsxs("div",{className:"relative group cursor-pointer transition-all duration-300 "+(o?"scale-110 z-10":t?"scale-105":"scale-100"),onClick:()=>(e=>{u(e),h(!0)})(a),children:[e.jsx(l,{className:`h-32 md:h-40 transition-all duration-300 border-2 ${o?"ring-4 ring-orange-400 border-orange-300 bg-gradient-to-b from-orange-50 to-orange-100 shadow-lg":t?"border-green-300 bg-gradient-to-b from-green-50 to-green-100 shadow-md":n?"border-blue-300 bg-gradient-to-b from-blue-50 to-blue-100 shadow-sm":"border-gray-200 bg-gradient-to-b from-gray-50 to-gray-100"} hover:shadow-lg hover:scale-105`,children:e.jsxs(m,{className:"p-2 md:p-3 h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-2xl md:text-4xl mb-2 transition-all duration-300 "+(o?"scale-125":"scale-100"),children:e.jsx(A,{iconType:a.icon,className:"h-8 w-8 md:h-12 md:w-12 "+(o?"text-orange-600":t?"text-green-600":"text-gray-600")})}),e.jsx("div",{className:"text-center font-bold text-xs md:text-sm mb-1 transition-colors duration-300 "+(o?"text-orange-700":t?"text-green-700":"text-gray-600"),children:a.mount}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:[a.minPoints,"+ pts"]})]})}),o&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-orange-500 text-white text-xs px-2 py-1 animate-pulse",children:[e.jsx(r,{className:"h-3 w-3 mr-1"}),"Atual"]})}),t&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-green-500 text-white text-xs px-2 py-1",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Concluído"]})})]},a.id)})})}),e.jsx(w,{open:x,onOpenChange:h,children:e.jsxs(C,{className:"max-w-2xl max-h-[85vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(P,{className:"pb-6",children:e.jsxs(y,{className:"text-center text-3xl font-bold text-amber-800",children:[n?.mount," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col items-center space-y-6 p-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-56 h-56 flex items-center justify-center bg-white rounded-2xl shadow-lg p-6",children:e.jsx(A,{iconType:n?.icon||"",className:"w-full h-full"})})}),e.jsxs("div",{className:"w-full text-center space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-3xl font-bold ${n?.color||"text-gray-600"}`,children:n?.mount}),e.jsx("div",{className:"text-xl text-amber-700 font-medium",children:n?.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-base",children:n?.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Necessários"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-800",children:[n?.minPoints," - ",n?.maxPoints||"∞"," pts"]})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Status Atual"}),e.jsx("div",{className:"text-base font-semibold text-amber-800",children:i>=n?.minPoints&&(!n?.maxPoints||i<=n.maxPoints)?"Conquistado":i>(n?.maxPoints||n?.minPoints||0)?"Superado":"Em Progresso"})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-5 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Situações espirituais alcançadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:(e=>{if(!e)return[];const a=(e.mount||"").toLowerCase();return a.includes("jordão")?["Compromisso público com Deus renovado","Início de jornada espiritual intencional","Decisão de seguir os passos de Jesus no cotidiano"]:a.includes("sinai")?["Aliança reafirmada com os princípios divinos","Obediência e reverência aprofundadas","Disciplina espiritual fortalecida"]:a.includes("carmelo")?["Fé provada e fortalecida diante de desafios","Ousadia em testemunhar","Confiança em milagres e providência de Deus"]:a.includes("oliveiras")?["Vida de oração constante","Comunhão diária cultivada","Entrega de ansiedades ao Senhor"]:a.includes("morias")||a.includes("moríah")||a.includes("moriá")?["Confiança plena nos planos de Deus","Entrega de áreas sensíveis do coração","Adoração mesmo em meio a provas"]:a.includes("tabor")?["Transformação do caráter em Cristo","Sensibilidade à voz do Espírito","Iluminação espiritual para novas etapas"]:a.includes("sião")?["Pertencimento ao povo de Deus","Alegria no culto e na adoração","Esperança consolidada nas promessas"]:a.includes("nebo")?["Visão do propósito e do futuro","Resiliência em períodos de espera","Gratidão pelas etapas vencidas"]:a.includes("canaã")?["Descanso nas promessas cumpridas","Frutificação e serviço abençoador","Novo ciclo de missão com maturidade espiritual"]:["Crescimento na fé e na comunhão","Perseverança em oração e estudo","Testemunho prático no dia a dia"]})(n).map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 mt-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 text-sm leading-relaxed",children:a})]},s))})]})]})]})]})})]})};function Q(){x();const{data:s,isLoading:o,error:t,refetch:i}=I(),[n,r]=a.useState("my-progress"),[p,T]=a.useState(!1);if(o)return e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando sua pontuação..."})]})})});if(t||!s)return e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||"Erro ao carregar dados de pontuação"}),e.jsxs(g,{onClick:i,className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Tentar novamente"]})]})})});const{total:E,breakdown:D,userData:q}=s,F=z(E),O=$(E),R=k(E),H=V(E);return e.jsxs(h,{children:[e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(b,{className:"h-8 w-8 text-yellow-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Minha Pontuação"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Acompanhe seu progresso na jornada espiritual"})]}),e.jsxs(f,{value:n,onValueChange:r,className:"w-full",children:[e.jsx(j,{className:"grid w-full grid-cols-1",children:e.jsx(N,{value:"my-progress",children:"Meu Progresso"})}),e.jsxs(v,{value:"my-progress",className:"space-y-6",children:[e.jsxs(l,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:[e.jsx(c,{className:"pb-3",children:e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),"Seu Monte Atual"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("div",{className:"cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>T(!0),children:e.jsx(A,{iconType:S(E),className:"h-72 w-72 mx-auto"})})}),e.jsx("div",{className:M(E)+" text-2xl font-bold mb-2",children:B(E)}),e.jsx("div",{className:"text-lg text-muted-foreground",children:F.name})]}),O&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progresso para ",O.mount]}),e.jsxs("span",{children:[Math.round(R),"%"]})]}),e.jsx(u,{value:R,className:"h-2"}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:H>0?`${H} pontos para ${O.mount}`:"Monte máximo alcançado!"})]}),E>=1e3&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 bg-yellow-50 rounded-lg",children:[e.jsx(U,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Status Máximo Alcançado!"})]})]})]}),e.jsx(K,{userPoints:E,showCurrent:!0}),e.jsx(W,{userData:q,showDetails:!0})]})]})]}),e.jsx(w,{open:p,onOpenChange:T,children:e.jsxs(C,{className:"max-w-5xl max-h-[95vh] overflow-y-auto bg-gradient-to-br from-amber-50 to-yellow-100 border-amber-200",children:[e.jsx(P,{className:"pb-6",children:e.jsxs(y,{className:"text-center text-3xl font-bold text-amber-800",children:[B(E)," - Detalhes da Conquista"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start space-y-8 lg:space-y-0 lg:space-x-12 p-8",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-80 h-80 lg:w-96 lg:h-96 flex items-center justify-center bg-white rounded-2xl shadow-lg p-8",children:e.jsx(A,{iconType:S(E),className:"w-full h-full"})})}),e.jsxs("div",{className:"flex-1 text-center lg:text-left space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:M(E)+" text-4xl font-bold",children:B(E)}),e.jsx("div",{className:"text-2xl text-amber-700 font-medium",children:F.name})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-3",children:"Significado Bíblico"}),e.jsx("p",{className:"text-amber-900 leading-relaxed text-lg",children:F.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Atuais"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:E})]}),e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Próximo Nível"}),e.jsx("div",{className:"text-lg font-semibold text-amber-800",children:$(E)?.name||"Máximo Alcançado"})]}),$(E)&&e.jsxs("div",{className:"bg-white/70 rounded-lg p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Pontos Restantes"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:V(E)})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl p-6 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800 mb-4",children:"Conquistas Desbloqueadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:F.benefits.map((a,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-600 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-amber-900 font-medium",children:a})]},s))})]})]})]})]})})]})}export{Q as default};
