import{j as e}from"./ui-CM4P41nz.js";import{r as a}from"./vendor-v6ZOr5pf.js";import{u as s}from"./useQuery-CbBdc4E2.js";import{l as t,j as r,k as n,e as i,A as l,L as o,I as c,p as d,q as h,r as u,s as m,t as x,C as g,c as p,a2 as j,a3 as f,K as v,B as y,v as w,D as b,w as N,x as S,O as k}from"./index-DmVxn7ZR.js";import{u as C}from"./useMutation-0JlAkC17.js";import{D as E,e as T,a as _,b as z,c as R}from"./dialog-C-BrZqwJ.js";import{T as D}from"./textarea-B2dFFk1_.js";import{T as U,a as P,b as L,c as O}from"./tabs-D5DxmYsa.js";import{n as F}from"./notificationService-Bb4GK-tC.js";import{S as I}from"./search-Bo2meC4M.js";import{C as q}from"./clock-DiLCqKo7.js";import{E as $}from"./ellipsis-vertical-BcVA75Cx.js";import{T as A}from"./trash-2-B_8Vf47p.js";import{C as M}from"./circle-alert-Bq1GhBlW.js";import"./charts-56rtB2he.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=t("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),B=t("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),K=t("SquareCheck",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),J=t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Q(){const{config:e,syncStatus:s}=function(){const[e,s]=a.useState(null),[t,r]=a.useState({isEnabled:!1,isRunning:!1}),n=a.useCallback(async()=>{try{const e=await fetch("/api/calendar/google-drive-config");if(e.ok){const a=await e.json();if(s(a),a.autoSync&&a.lastSync){const e=new Date(a.lastSync),s=new Date(e.getTime()+60*a.syncInterval*1e3),t=new Date;r(e=>({...e,isEnabled:!0,lastSync:a.lastSync,nextSync:s.toISOString(),isRunning:s<=t}))}else r(e=>({...e,isEnabled:a.autoSync||!1,lastSync:a.lastSync,isRunning:!1}))}}catch(e){r(e=>({...e,error:"Erro ao carregar configuração"}))}},[]),i=a.useCallback(async()=>{if(!e?.spreadsheetUrl)return r(e=>({...e,error:"URL da planilha não configurada"})),!1;r(e=>({...e,isRunning:!0,error:void 0}));try{const a=(e=>{let a="",s="0";const t=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);t&&(a=t[1]);const r=e.match(/\/file\/d\/([a-zA-Z0-9-_]+)/);r&&(a=r[1]);const n=e.match(/[?&]gid=(\d+)/);if(n&&(s=n[1]),!a)throw new Error("Não foi possível extrair o ID da planilha da URL fornecida");return`https://docs.google.com/spreadsheets/d/${a}/export?format=csv&gid=${s}`})(e.spreadsheetUrl),t=await fetch("/api/calendar/sync-google-drive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csvUrl:a,spreadsheetUrl:e.spreadsheetUrl})}),n=await t.json();if(n.success){const a=(new Date).toISOString();return r(s=>({...s,isRunning:!1,lastSync:a,nextSync:e.autoSync?new Date(Date.now()+60*e.syncInterval*1e3).toISOString():void 0,error:void 0})),s(e=>e?{...e,lastSync:a}:null),window.dispatchEvent(new CustomEvent("google-drive-sync-success",{detail:{imported:n.importedCount,total:n.totalEvents,errors:n.errorCount||0}})),!0}return r(e=>({...e,isRunning:!1,error:n.error||"Erro na sincronização"})),!1}catch(a){return r(e=>({...e,isRunning:!1,error:`Erro ao sincronizar: ${a.message}`})),!1}},[e]);return a.useEffect(()=>{if(!e?.autoSync||!t.nextSync)return;const a=()=>{const e=new Date;new Date(t.nextSync)<=e&&!t.isRunning&&i()};a();const s=setInterval(a,6e4);return()=>clearInterval(s)},[e?.autoSync,t.nextSync,t.isRunning,i]),a.useEffect(()=>{n()},[n]),a.useEffect(()=>{const e=()=>{n()};return window.addEventListener("google-drive-config-changed",e),()=>window.removeEventListener("google-drive-config-changed",e)},[n]),{config:e,syncStatus:t,syncNow:i,loadConfig:n}}(),[t,r]=a.useState({isEnabled:!1,isRunning:!1}),n=a.useCallback(e=>{let a="",s="0";const t=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);t&&(a=t[1]);const r=e.match(/\/file\/d\/([a-zA-Z0-9-_]+)/);r&&(a=r[1]);const n=e.match(/[?&]gid=(\d+)/);if(n&&(s=n[1]),!a)throw new Error("Não foi possível extrair o ID da planilha da URL fornecida");return`https://docs.google.com/spreadsheets/d/${a}/export?format=csv&gid=${s}`},[]),i=a.useCallback(async()=>{if(!e?.spreadsheetUrl)return r(e=>({...e,error:"URL da planilha não configurada"})),!1;r(e=>({...e,isRunning:!0,error:void 0}));try{const a=n(e.spreadsheetUrl),s=await fetch("/api/tasks/sync-google-drive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csvUrl:a,spreadsheetUrl:e.spreadsheetUrl})}),t=await s.json();if(t.success){const e=(new Date).toISOString();return r(a=>({...a,isRunning:!1,lastSync:e,error:void 0})),window.dispatchEvent(new CustomEvent("tasks-google-drive-sync-success",{detail:{imported:t.importedTasks,total:t.totalTasks,errors:t.errorCount||0}})),!0}return r(e=>({...e,isRunning:!1,error:t.error||"Erro na sincronização"})),!1}catch(a){return r(e=>({...e,isRunning:!1,error:`Erro ao sincronizar: ${a.message}`})),!1}},[e,n]),l=a.useCallback(async a=>{if(!e?.spreadsheetUrl)return r(e=>({...e,error:"URL da planilha não configurada"})),!1;try{const e=await fetch("/api/tasks/add-to-google-drive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tasks:a})}),s=await e.json();return s.success?(window.dispatchEvent(new CustomEvent("tasks-added-to-sheet",{detail:{added:s.addedCount,total:s.totalTasks}})),!0):(r(e=>({...e,error:s.message||"Erro ao adicionar tarefas à planilha"})),!1)}catch(s){return r(e=>({...e,error:`Erro ao adicionar tarefas: ${s.message}`})),!1}},[e]),o=a.useCallback(async(e,a)=>!0,[]);return a.useEffect(()=>{r(a=>({...a,isEnabled:!!e?.spreadsheetUrl,lastSync:e?.lastSync,isRunning:s.isRunning}))},[e,s]),{config:e,syncStatus:t,syncTasksNow:i,addTasksToSheet:l,configureSync:o,loadConfig:()=>{}}}const Z={high:{color:"bg-red-50 text-red-700 border-red-200",icon:e.jsx(M,{className:"h-3 w-3"}),label:"Alta"},medium:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:e.jsx(q,{className:"h-3 w-3"}),label:"Média"},low:{color:"bg-green-50 text-green-700 border-green-200",icon:e.jsx(j,{className:"h-3 w-3"}),label:"Baixa"}},H={pending:{color:"bg-gray-50 text-gray-700 border-gray-200",icon:e.jsx(j,{className:"h-3 w-3"}),label:"Pendente"},in_progress:{color:"bg-blue-50 text-blue-700 border-blue-200",icon:e.jsx(q,{className:"h-3 w-3"}),label:"Em Progresso"},completed:{color:"bg-green-50 text-green-700 border-green-200",icon:e.jsx(v,{className:"h-3 w-3"}),label:"Concluída"}};function G(){const[t,M]=a.useState(""),[G,W]=a.useState("all"),[X,Y]=a.useState("all"),[ee,ae]=a.useState(!1),[se,te]=a.useState(!1),[re,ne]=a.useState(null),[ie,le]=a.useState({title:"",description:"",priority:"medium",due_date:"",assigned_to:"none",tags:[]}),oe=r(),{config:ce,syncStatus:de,addTasksToSheet:he}=Q(),[ue,me]=a.useState(!1),{data:xe,isLoading:ge}=s({queryKey:["tasks",X,G],queryFn:async()=>{const e=new URLSearchParams;"all"!==X&&e.append("status",X),"all"!==G&&e.append("priority",G);const a=await fetch(`/api/tasks?${e.toString()}`,{headers:{"x-user-id":"1"}});if(!a.ok)throw new Error("Erro ao buscar tarefas");return a.json()}}),{data:pe}=s({queryKey:["tasks-users"],queryFn:async()=>{const e=await fetch("/api/tasks/users",{headers:{"x-user-id":"1"}});if(!e.ok)throw new Error("Erro ao buscar usuários");return e.json()}}),je=C({mutationFn:async e=>{const a=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":"1"},body:JSON.stringify({...e,assigned_to:e.assigned_to&&"none"!==e.assigned_to?parseInt(e.assigned_to):null})});if(!a.ok)throw new Error("Erro ao criar tarefa");return a.json()},onSuccess:async e=>{if(await oe.invalidateQueries({queryKey:["tasks"]}),ae(!1),e?.task&&ie.assigned_to&&"none"!==ie.assigned_to)try{await F.notifyTaskCreated(ie.title,parseInt(ie.assigned_to))}catch(a){}if(le({title:"",description:"",priority:"medium",due_date:"",assigned_to:"none",tags:[]}),ce?.spreadsheetUrl&&e?.task)try{await he([e.task]),f.success("Tarefa criada e sincronizada com sucesso!")}catch(a){f.success("Tarefa criada com sucesso!")}else f.success("Tarefa criada com sucesso!")},onError:()=>{f.error("Erro ao criar tarefa")}}),fe=C({mutationFn:async({id:e,...a})=>{const s=await fetch(`/api/tasks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":"1"},body:JSON.stringify(a)});if(!s.ok)throw new Error("Erro ao atualizar tarefa");return s.json()},onSuccess:async e=>{if(await oe.invalidateQueries({queryKey:["tasks"]}),te(!1),ne(null),ce?.spreadsheetUrl&&e?.task)try{await he([e.task]),f.success("Tarefa atualizada e sincronizada com sucesso!")}catch(a){f.success("Tarefa atualizada com sucesso!")}else f.success("Tarefa atualizada com sucesso!")},onError:()=>{f.error("Erro ao atualizar tarefa")}}),ve=C({mutationFn:async e=>{const a=await fetch(`/api/tasks/${e}`,{method:"DELETE",headers:{"x-user-id":"1"}});if(!a.ok)throw new Error("Erro ao deletar tarefa");return a.json()},onSuccess:async()=>{await oe.invalidateQueries({queryKey:["tasks"]}),f.success("Tarefa deletada com sucesso!")},onError:()=>{f.error("Erro ao deletar tarefa")}}),ye=xe?.tasks||[],we=pe?.users||[],be=ye.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.description?.toLowerCase().includes(t.toLowerCase())||e.assigned_to_name?.toLowerCase().includes(t.toLowerCase())),Ne=be.filter(e=>"pending"===e.status),Se=be.filter(e=>"in_progress"===e.status),ke=be.filter(e=>"completed"===e.status),Ce=({task:a})=>e.jsxs(g,{className:"group relative overflow-hidden bg-white border-0 shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1 mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-50/50 to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(p,{className:"p-6 relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("button",{onClick:()=>(e=>{const a="completed"===e.status?"pending":"completed";fe.mutate({...e,status:a})})(a),className:"flex-shrink-0 transition-all duration-200 hover:scale-110",children:"completed"===a.status?e.jsx(v,{className:"h-5 w-5 text-green-500"}):e.jsx(j,{className:"h-5 w-5 text-gray-300 hover:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:a.title})]}),a.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(y,{className:`${H[a.status].color} border`,children:[H[a.status].icon,e.jsx("span",{className:"ml-1",children:H[a.status].label})]}),e.jsxs(y,{className:`${Z[a.priority].color} border`,children:[Z[a.priority].icon,e.jsx("span",{className:"ml-1",children:Z[a.priority].label})]}),a.assigned_to_name&&e.jsxs(y,{className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),a.assigned_to_name]})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map((a,s)=>e.jsxs(y,{variant:"outline",className:"text-xs",children:[e.jsx(J,{className:"h-2 w-2 mr-1"}),a]},s))})]}),e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsxs(S,{align:"end",children:[e.jsxs(k,{onClick:()=>(e=>{ne(e),te(!0)})(a),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsxs(k,{onClick:()=>{return e=a.id,void(confirm("Tem certeza que deseja deletar esta tarefa?")&&ve.mutate(e));var e},className:"text-red-600",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Deletar"]})]})]})]})})]}),Ee=({icon:a,title:s,description:t})=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"p-4 rounded-full bg-gray-100 mb-4",children:e.jsx(a,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s}),e.jsx("p",{className:"text-gray-500 max-w-sm",children:t})]});return ge?e.jsx(n,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})})}):e.jsx(n,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-2",children:"Tarefas"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Organize e acompanhe suas tarefas de forma eficiente"}),ce?.spreadsheetUrl&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+(de.isRunning?"bg-yellow-500 animate-pulse":"bg-green-500")}),e.jsx("span",{children:de.isRunning?"Sincronizando automaticamente...":"Sincronização automática ativa"}),de.lastSync&&e.jsxs("span",{className:"text-xs",children:["(Última: ",new Date(de.lastSync).toLocaleString("pt-BR"),")"]})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>window.open("/settings","_blank"),className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4"}),"Configurar Sincronização"]}),e.jsxs(E,{open:ee,onOpenChange:ae,children:[e.jsx(T,{asChild:!0,children:e.jsxs(i,{className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),"Nova Tarefa"]})}),e.jsxs(_,{className:"max-w-md",children:[e.jsx(z,{children:e.jsx(R,{className:"text-xl font-semibold",children:"Nova Tarefa"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title",children:"Título *"}),e.jsx(c,{id:"title",value:ie.title,onChange:e=>le({...ie,title:e.target.value}),placeholder:"Digite o título da tarefa",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",children:"Descrição"}),e.jsx(D,{id:"description",value:ie.description,onChange:e=>le({...ie,description:e.target.value}),placeholder:"Descreva a tarefa em detalhes",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"priority",children:"Prioridade"}),e.jsxs(d,{value:ie.priority,onValueChange:e=>le({...ie,priority:e}),children:[e.jsx(h,{className:"mt-1",children:e.jsx(u,{})}),e.jsxs(m,{children:[e.jsx(x,{value:"low",children:"Baixa"}),e.jsx(x,{value:"medium",children:"Média"}),e.jsx(x,{value:"high",children:"Alta"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"due_date",children:"Data de Vencimento"}),e.jsx(c,{id:"due_date",type:"date",value:ie.due_date,onChange:e=>le({...ie,due_date:e.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"assigned_to",children:"Responsável"}),e.jsxs(d,{value:ie.assigned_to,onValueChange:e=>le({...ie,assigned_to:e}),children:[e.jsx(h,{className:"mt-1",children:e.jsx(u,{placeholder:"Selecione um responsável"})}),e.jsxs(m,{children:[e.jsx(x,{value:"none",children:"Sem responsável"}),we.map(a=>e.jsx(x,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>ae(!1),className:"px-6",children:"Cancelar"}),e.jsx(i,{onClick:()=>{ie.title.trim()?je.mutate(ie):f.error("Título é obrigatório")},disabled:je.isPending,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-6",children:je.isPending?"Criando...":"Criar Tarefa"})]})]})]})]})]})]}),e.jsx(g,{className:"mb-8 border-0 shadow-sm",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(c,{placeholder:"Buscar tarefas por título, descrição ou responsável...",value:t,onChange:e=>M(e.target.value),className:"pl-12 h-12 text-base"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(d,{value:X,onValueChange:Y,children:[e.jsx(h,{className:"w-40",children:e.jsx(u,{placeholder:"Status"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"Todos os Status"}),e.jsx(x,{value:"pending",children:"Pendentes"}),e.jsx(x,{value:"in_progress",children:"Em Progresso"}),e.jsx(x,{value:"completed",children:"Concluídas"})]})]}),e.jsxs(d,{value:G,onValueChange:W,children:[e.jsx(h,{className:"w-40",children:e.jsx(u,{placeholder:"Prioridade"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"Todas as Prioridades"}),e.jsx(x,{value:"high",children:"Alta"}),e.jsx(x,{value:"medium",children:"Média"}),e.jsx(x,{value:"low",children:"Baixa"})]})]})]})]})})}),e.jsxs(U,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(P,{className:"grid w-full grid-cols-3 bg-white border shadow-sm",children:[e.jsxs(L,{value:"pending",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Pendentes (",Ne.length,")"]}),e.jsxs(L,{value:"in_progress",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Em Progresso (",Se.length,")"]}),e.jsxs(L,{value:"completed",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Concluídas (",ke.length,")"]})]}),e.jsx(O,{value:"pending",className:"space-y-4",children:0===Ne.length?e.jsx(Ee,{icon:j,title:"Nenhuma tarefa pendente",description:"Crie uma nova tarefa para começar a organizar seu trabalho"}):Ne.map(a=>e.jsx(Ce,{task:a},a.id))}),e.jsx(O,{value:"in_progress",className:"space-y-4",children:0===Se.length?e.jsx(Ee,{icon:q,title:"Nenhuma tarefa em progresso",description:"Mova tarefas pendentes para em progresso quando começar a trabalhar nelas"}):Se.map(a=>e.jsx(Ce,{task:a},a.id))}),e.jsx(O,{value:"completed",className:"space-y-4",children:0===ke.length?e.jsx(Ee,{icon:K,title:"Nenhuma tarefa concluída",description:"Complete algumas tarefas para vê-las aparecer aqui"}):ke.map(a=>e.jsx(Ce,{task:a},a.id))})]}),e.jsx(E,{open:se,onOpenChange:te,children:e.jsxs(_,{className:"max-w-md",children:[e.jsx(z,{children:e.jsx(R,{className:"text-xl font-semibold",children:"Editar Tarefa"})}),re&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-title",children:"Título *"}),e.jsx(c,{id:"edit-title",value:re.title,onChange:e=>ne({...re,title:e.target.value}),placeholder:"Digite o título da tarefa",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-description",children:"Descrição"}),e.jsx(D,{id:"edit-description",value:re.description||"",onChange:e=>ne({...re,description:e.target.value}),placeholder:"Descreva a tarefa em detalhes",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-priority",children:"Prioridade"}),e.jsxs(d,{value:re.priority,onValueChange:e=>ne({...re,priority:e}),children:[e.jsx(h,{className:"mt-1",children:e.jsx(u,{})}),e.jsxs(m,{children:[e.jsx(x,{value:"low",children:"Baixa"}),e.jsx(x,{value:"medium",children:"Média"}),e.jsx(x,{value:"high",children:"Alta"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-due_date",children:"Data de Vencimento"}),e.jsx(c,{id:"edit-due_date",type:"date",value:re.due_date?re.due_date.split("T")[0]:"",onChange:e=>ne({...re,due_date:e.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-assigned_to",children:"Responsável"}),e.jsxs(d,{value:re.assigned_to?.toString()||"none",onValueChange:e=>ne({...re,assigned_to:"none"===e?void 0:parseInt(e)}),children:[e.jsx(h,{className:"mt-1",children:e.jsx(u,{placeholder:"Selecione um responsável"})}),e.jsxs(m,{children:[e.jsx(x,{value:"none",children:"Sem responsável"}),we.map(a=>e.jsx(x,{value:a.id.toString(),children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>te(!1),className:"px-6",children:"Cancelar"}),e.jsx(i,{onClick:()=>{re&&fe.mutate(re)},disabled:fe.isPending,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-6",children:fe.isPending?"Salvando...":"Salvar Alterações"})]})]})]})})]})})})}export{G as default};
