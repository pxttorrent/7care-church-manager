import{j as e}from"./ui-D1vmdbY6.js";import{r as s}from"./vendor-Ber6wfih.js";import{i as a,j as i,l as r,u as t,o as n,f as d,C as l,d as o,U as c,I as u,s as m,t as x,v as p,w as h,x as j,B as v,J as g,Q as f,m as y,M as b,X as N,H as w,a as q,b as C,p as I}from"./index-DtHhSAMi.js";import{A as k,a as E,b as S}from"./avatar-ChFaMUY3.js";import{u as z}from"./useQuery-rrOtt3FZ.js";import{u as K,B as A,C as M}from"./useMutation-BeDmOnfr.js";import{M as Q,d as R,e as D}from"./mount-icon-CHL4eerX.js";import{C as F}from"./circle-alert-Cizn2L6y.js";import{R as B}from"./refresh-cw-DIFDUmW4.js";import{S as L}from"./search-D0sy1BU9.js";import{C as T}from"./clock-DN60WSOx.js";import{M as P}from"./map-pin-DK6c9jly.js";import{T as $}from"./target-CNCei-m9.js";import"./charts-leMEfCN9.js";function O(){const{user:O}=a(),{toast:U}=i(),J=r(),V=t(),[G,H]=s.useState(""),[W,_]=s.useState("all"),[X,Y]=s.useState("my"),[Z,ee]=s.useState(!1),[se,ae]=s.useState(null),[ie,re]=s.useState(""),[te,ne]=s.useState("all"),[de,le]=s.useState(!1),[oe,ce]=s.useState(null),[ue,me]=s.useState(""),{data:xe=[],isLoading:pe}=z({queryKey:["church-interested",null==O?void 0:O.id],queryFn:async()=>{if(!(null==O?void 0:O.id))return[];const e=await fetch("/api/my-interested",{headers:{"x-user-id":O.id.toString()}});if(!e.ok)throw new Error("Erro ao buscar interessados da igreja");return e.json()},enabled:!!(null==O?void 0:O.id)&&"admin"!==(null==O?void 0:O.role)}),{data:he=[],isLoading:je}=z({queryKey:["my-relationships",null==O?void 0:O.id],queryFn:async()=>{if(!(null==O?void 0:O.id))return[];const e=await fetch(`/api/relationships?missionaryId=${O.id}`);if(!e.ok)throw new Error("Erro ao buscar relacionamentos");return e.json()},enabled:!!(null==O?void 0:O.id)}),{data:ve=[],isLoading:ge}=z({queryKey:["my-discipleship-requests",null==O?void 0:O.id],queryFn:async()=>{if(!(null==O?void 0:O.id))return[];const e=await fetch(`/api/discipleship-requests?missionaryId=${O.id}`);if(!e.ok)throw new Error("Erro ao buscar solicitações");return e.json()},enabled:!!(null==O?void 0:O.id)}),{data:fe=[],isLoading:ye}=z({queryKey:["all-discipleship-requests"],queryFn:async()=>{const e=await fetch("/api/discipleship-requests");if(!e.ok)throw new Error("Erro ao buscar solicitações");return e.json()}}),{data:be=[],isLoading:Ne}=z({queryKey:["all-relationships"],queryFn:async()=>{const e=await fetch("/api/relationships");if(!e.ok)throw new Error("Erro ao buscar relacionamentos");return e.json()}}),{data:we=[],isLoading:qe}=z({queryKey:["all-users"],queryFn:async()=>{const e=await fetch("/api/users");if(!e.ok)throw new Error("Erro ao buscar usuários");return e.json()}}),Ce="admin"===(null==O?void 0:O.role),Ie=Ce?(we||[]).filter(e=>"interested"===e.role):xe||[],ke=Array.from(new Set((Ie||[]).map(e=>e.church).filter(Boolean))).sort((e,s)=>String(e).localeCompare(String(s),"pt-BR",{sensitivity:"base"})),Ee=K({mutationFn:async e=>{const s=await fetch("/api/discipleship-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Erro ao criar solicitação");return s.json()},onSuccess:()=>{J.invalidateQueries({queryKey:["discipleship-requests"]}),J.invalidateQueries({queryKey:["all-discipleship-requests"]}),U({title:"✅ Solicitação enviada!",description:"Aguarde a aprovação do administrador."}),ee(!1),ae(null),re("")},onError:e=>{U({title:"❌ Erro ao enviar solicitação",description:e.message||"Não foi possível enviar a solicitação.",variant:"destructive"})}}),Se=K({mutationFn:async({requestId:e,status:s,adminNotes:a})=>{const i=await fetch(`/api/discipleship-requests/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,adminNotes:a,processedBy:(null==O?void 0:O.id)||1})});if(!i.ok)throw new Error("Erro ao atualizar solicitação");return i.json()},onSuccess:()=>{J.invalidateQueries({queryKey:["discipleship-requests"]}),J.invalidateQueries({queryKey:["relationships"]}),U({title:"✅ Solicitação processada!",description:"A solicitação foi processada com sucesso."}),le(!1),ce(null),me("")},onError:e=>{U({title:"❌ Erro ao processar",description:e.message||"Não foi possível processar a solicitação.",variant:"destructive"})}}),ze=Ie.filter(e=>{const s=e.name.toLowerCase().includes(G.toLowerCase())||e.email.toLowerCase().includes(G.toLowerCase()),a="all"===W||e.status===W,i=!Ce||"all"===te||e.church===te;return s&&a&&i}),Ke=Ce?[]:he.map(e=>{const s=Ie.find(s=>s.id===e.interestedId);return s?{...s,relationship:e}:null}).filter(Boolean),Ae=Ke.sort((e,s)=>e.name.localeCompare(s.name,"pt-BR",{sensitivity:"base"})),Me=ze.sort((e,s)=>e.name.localeCompare(s.name,"pt-BR",{sensitivity:"base"})),Qe=e=>fe.some(s=>s.interestedId===e&&"pending"===s.status),Re=e=>{oe&&Se.mutate({requestId:oe.id,status:e,adminNotes:ue.trim()})},De=e=>{const s=Ie.find(s=>s.id===e)||we.find(s=>s.id===e);return s?s.name:`Usuário ${e}`},Fe=e=>{const s=be.filter(s=>s.interestedId===e&&"active"===s.status).map(e=>{const s=xe.find(s=>s.id===e.missionaryId)||we.find(s=>s.id===e.missionaryId);return s&&s.name?String(s.name).split(" ")[0]:`Usuário ${e.missionaryId}`});return Array.from(new Set(s))},Be=e=>{switch(e){case"novo":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"contato-inicial":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"estudando":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"batizado":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},Le=e=>{switch(e){case"novo":return"Novo";case"contato-inicial":return"Contato Inicial";case"estudando":return"Estudando";case"batizado":return"Batizado";case"inativo":return"Inativo";default:return e}},Te=e=>be.some(s=>s.interestedId===e&&"active"===s.status),Pe=e=>fe.some(s=>s.interestedId===e&&"approved"===s.status),$e={totalMy:Ae.length,totalChurch:Me.length,pendingRequests:ve.filter(e=>"pending"===e.status).length,approvedRequests:ve.filter(e=>"approved"===e.status).length};s.useEffect(()=>{Ce&&"church"!==X&&Y("church")},[Ce,X]);const Oe=async e=>{try{const s=await fetch(`/api/users/${e}/points-details`);if(s.ok){return(await s.json()).points||0}}catch(s){}return 0},{data:Ue={},isLoading:Je}=z({queryKey:["interested-points",Ke.map(e=>null==e?void 0:e.id).filter(Boolean)],queryFn:async()=>{const e={};for(const s of Ke)if(s){const a=await Oe(s.id);e[s.id]=a}return e},enabled:Ke.length>0,staleTime:3e5});return O?e.jsxs(n,{children:[e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Meus Interessados"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie seus relacionamentos de discipulado"})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{J.invalidateQueries({queryKey:["discipleship-requests"]}),J.invalidateQueries({queryKey:["all-discipleship-requests"]}),J.invalidateQueries({queryKey:["relationships"]}),J.invalidateQueries({queryKey:["all-relationships"]}),J.invalidateQueries({queryKey:["my-interested"]}),J.invalidateQueries({queryKey:["all-users"]})},className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Atualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$e.totalMy}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Meus"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:$e.totalChurch}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Da Igreja"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:$e.pendingRequests}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pendentes"})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:$e.approvedRequests}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Aprovados"})]})})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsxs(d,{variant:"my"===X?"default":"ghost",onClick:()=>Y("my"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"Meus Interessados (",$e.totalMy,")"]}),e.jsxs(d,{variant:"church"===X?"default":"ghost",onClick:()=>Y("church"),className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Da Igreja (",$e.totalChurch,")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(u,{placeholder:"Buscar interessados...",value:G,onChange:e=>H(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx(d,{variant:"all"===W?"default":"outline",size:"sm",onClick:()=>_("all"),children:"Todos"}),e.jsx(d,{variant:"novo"===W?"default":"outline",size:"sm",onClick:()=>_("novo"),children:"Novos"}),e.jsx(d,{variant:"estudando"===W?"default":"outline",size:"sm",onClick:()=>_("estudando"),children:"Estudando"}),e.jsx(d,{variant:"batizado"===W?"default":"outline",size:"sm",onClick:()=>_("batizado"),children:"Batizados"})]}),Ce&&e.jsx("div",{className:"w-full md:w-80",children:e.jsxs(m,{value:te,onValueChange:ne,children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Filtrar por igreja"})}),e.jsxs(h,{children:[e.jsx(j,{value:"all",children:"Todas as igrejas"}),ke.map(s=>e.jsx(j,{value:s,children:s},s))]})]})}),(pe||je||ge||Je)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Carregando..."})]}),!pe&&!je&&!ge&&!Je&&e.jsx("div",{className:"space-y-4",children:("my"===X?Ae:Me).map(s=>{var a;const i=(e=>{const s=he.find(s=>s.interestedId===e&&"active"===s.status);if(s)return{label:"Discipulando",color:"bg-green-100 text-green-800",icon:f,missionaryId:s.missionaryId,type:"active",isMyRelationship:!0};const a=fe.find(s=>s.interestedId===e&&"approved"===s.status&&s.missionaryId===Number(null==O?void 0:O.id));if(a)return{label:"Aprovado",color:"bg-blue-100 text-blue-800",icon:f,missionaryId:a.missionaryId,type:"approved",isMyRelationship:!0};const i=fe.find(s=>s.interestedId===e&&"pending"===s.status&&s.missionaryId===Number(null==O?void 0:O.id));return i?{label:"Solicitado",color:"bg-yellow-100 text-yellow-800",icon:T,missionaryId:i.missionaryId,type:"pending",isMyRelationship:!0}:null})(s.id);var r;r=s.id,fe.some(e=>e.interestedId===r&&e.missionaryId===Number(null==O?void 0:O.id)&&"pending"===e.status)||(e=>fe.some(s=>s.interestedId===e&&s.missionaryId===Number(null==O?void 0:O.id)&&"approved"===s.status))(s.id)||(e=>{he.some(s=>s.interestedId===e&&"active"===s.status)})(s.id);const t="my"===X;return e.jsx(l,{className:"hover:shadow-md transition-shadow",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(k,{children:[e.jsx(E,{src:""}),e.jsx(S,{className:"bg-primary text-white",children:s.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[t&&e.jsx(v,{className:Be(s.status),children:Le(s.status)}),i&&e.jsxs(v,{className:i.color,children:[e.jsx(i.icon,{className:"h-3 w-3 mr-1"}),i.label]}),"church"===X&&e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[Te(s.id)&&e.jsxs("div",{className:"mb-1 flex items-center gap-1 justify-end",children:[e.jsx("span",{className:"font-medium mr-1",children:"Discipulado por:"}),Fe(s.id).map((s,a)=>e.jsx(v,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:s},a))]}),Pe(s.id)&&!Te(s.id)&&e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"font-medium",children:"Aprovado para discipulado"})}),fe.some(e=>e.interestedId===s.id&&"pending"===e.status)&&e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"font-medium",children:"Solicitação pendente"})}),!Te(s.id)&&!Pe(s.id)&&!fe.some(e=>e.interestedId===s.id&&"pending"===e.status)&&e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"font-medium",children:"Disponível para discipulado"})})]}),"admin"===(null==O?void 0:O.role)&&Qe(s.id)&&e.jsxs(v,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 cursor-pointer",onClick:()=>{const e=fe.find(e=>e.interestedId===s.id);e&&(e=>{ce(e),me(e.adminNotes||""),le(!0)})(e)},children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Autorizar"]})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:s.address})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Igreja:"})," ",s.church]}),s.studiesCompleted>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progresso dos Estudos"}),e.jsxs("span",{children:[s.studiesCompleted,"/",s.totalStudies]})]}),e.jsx("div",{className:"bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:s.studiesCompleted/s.totalStudies*100+"%"}})})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:null==(a=s.interests)?void 0:a.map((s,a)=>e.jsx(v,{variant:"outline",className:"text-xs",children:s},a))}),s.notes&&e.jsxs("div",{className:"text-sm text-muted-foreground bg-muted p-2 rounded",children:[e.jsx("strong",{children:"Observações:"})," ",s.notes]}),s.lastContact&&e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-2",children:["Último contato: ",(n=s.lastContact,new Date(n).toLocaleDateString("pt-BR"))]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[!i&&e.jsxs(d,{variant:"default",size:"sm",onClick:()=>(e=>{ae(e),ee(!0)})(s),className:"bg-green-600 hover:bg-green-700",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),"Discipular"]}),"pending"===(null==i?void 0:i.type)&&e.jsxs(d,{variant:"outline",size:"sm",disabled:!0,className:"bg-yellow-50 border-yellow-200 text-yellow-700 cursor-not-allowed",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Solicitado"]}),"approved"===(null==i?void 0:i.type)&&e.jsxs(d,{variant:"outline",size:"sm",disabled:!0,className:"bg-blue-50 border-blue-200 text-blue-700 cursor-not-allowed",children:[e.jsx(f,{className:"h-3 w-3 mr-1"}),"Aprovado"]}),"active"===(null==i?void 0:i.type)&&e.jsxs(d,{variant:"outline",size:"sm",disabled:!0,className:"bg-green-50 border-green-200 text-green-700 cursor-not-allowed",children:[e.jsx(c,{className:"h-3 w-3 mr-1"}),"Discipulando"]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>((e,s)=>{const a=`https://wa.me/55${e.replace(/\D/g,"")}?text=Olá ${s}! Tudo bem?`;window.open(a,"_blank")})(s.phone,s.name),className:"bg-green-50 hover:bg-green-100 border-green-200 text-green-700",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"WhatsApp"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>((e,s)=>{V(`/chat?user=${e}&name=${encodeURIComponent(s)}`)})(s.id,s.name),className:"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),"Mensagem"]}),"active"===(null==i?void 0:i.type)&&e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const s=he.find(s=>s.interestedId===e&&"active"===s.status);if(!s)return void U({title:"❌ Erro",description:"Relacionamento não encontrado.",variant:"destructive"});if(!confirm("Tem certeza que deseja desvincular este interessado? Esta ação não pode ser desfeita."))return;if(!(await fetch(`/api/relationships/${s.id}`,{method:"DELETE"})).ok)throw new Error("Erro ao desvincular relacionamento");J.invalidateQueries({queryKey:["relationships"]}),J.invalidateQueries({queryKey:["my-interested"]}),J.invalidateQueries({queryKey:["all-discipleship-requests"]}),U({title:"✅ Desvinculado com sucesso!",description:"O interessado foi desvinculado do seu discipulado."})}catch(s){U({title:"❌ Erro ao desvincular",description:s.message||"Não foi possível desvincular o relacionamento.",variant:"destructive"})}})(s.id),className:"bg-red-50 hover:bg-red-100 border-red-200 text-red-700",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),"Desvincular"]})]})]}),t&&e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:Je?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-200 rounded animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-purple-200 rounded animate-pulse mb-1"}),e.jsx("div",{className:"h-3 bg-purple-200 rounded animate-pulse w-20"})]}),e.jsx("div",{className:"h-5 w-12 bg-purple-200 rounded animate-pulse"})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{iconType:R(Ue[s.id]||0),className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:D(Ue[s.id]||0)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Ue[s.id]||0," pontos"]})]}),e.jsx(v,{variant:"outline",className:"text-xs border-purple-300 text-purple-700",children:"Monte"})]})})]})})},s.id);var n})}),!pe&&!je&&!ge&&!Je&&0===("my"===X?Ae:Me).length&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"my"===X?"Nenhum interessado vinculado":"Nenhum interessado encontrado"}),e.jsx("p",{className:"text-muted-foreground",children:"my"===X?"Você ainda não tem interessados vinculados. Solicite discipulado de interessados da igreja.":"Tente ajustar os filtros de busca."})]})]}),Z&&se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(l,{className:"w-full max-w-md",children:[e.jsxs(q,{children:[e.jsx(C,{children:"Solicitar Discipulado"}),e.jsxs(I,{children:["Solicite permissão para discipular ",se.name]})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Mensagem para o administrador:"}),e.jsx("textarea",{className:"w-full mt-1 p-2 border rounded-md",rows:3,placeholder:"Explique por que você gostaria de discipular esta pessoa...",value:ie,onChange:e=>re(e.target.value)})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(d,{variant:"outline",onClick:()=>ee(!1),children:"Cancelar"}),e.jsx(d,{onClick:()=>{se&&(null==O?void 0:O.id)&&ie.trim()&&Ee.mutate({missionaryId:Number(O.id),interestedId:se.id,status:"pending",notes:ie})},disabled:!ie.trim()||Ee.isPending,children:Ee.isPending?"Enviando...":"Enviar Solicitação"})]})]})]})}),de&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(l,{className:"w-full max-w-md",children:[e.jsxs(q,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-yellow-600"}),"Autorizar Discipulado"]}),e.jsx(I,{children:"Aprove ou rejeite a solicitação de discipulado"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Missionário:"}),e.jsx("div",{className:"font-medium",children:De(oe.missionaryId)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Interessado:"}),e.jsx("div",{className:"font-medium",children:De(oe.interestedId)})]})]}),oe.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"Observações do Missionário:"}),e.jsx("div",{className:"text-sm bg-muted/50 p-2 rounded mt-1",children:oe.notes})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Notas do Administrador:"}),e.jsx("textarea",{className:"w-full mt-1 p-2 border rounded-md",rows:3,placeholder:"Adicione observações sobre sua decisão...",value:ue,onChange:e=>me(e.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(d,{variant:"outline",onClick:()=>le(!1),children:"Cancelar"}),e.jsx(d,{variant:"destructive",onClick:()=>Re("rejected"),disabled:Se.isPending,children:Se.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})}),e.jsx(d,{onClick:()=>Re("approved"),disabled:Se.isPending,className:"bg-green-600 hover:bg-green-700",children:Se.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),"Aprovar"]})})]})]})]})})]}):e.jsx(n,{children:e.jsxs("div",{className:"container mx-auto p-4 text-center",children:[e.jsx(F,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Faça login para acessar esta página"})]})})}export{O as default};
