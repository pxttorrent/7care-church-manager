import{j as e}from"./ui-Dcxc0my-.js";import{r as a}from"./vendor-v6ZOr5pf.js";import{c as s,U as o,H as t,e as i,N as n,O as r,C as l,a as c,b as d,d as m,P as u,B as p,i as x,o as g,f as h,T as b}from"./index-kLixipXW.js";import{A as f,B as j,C as N,T as v,a as C,b as y,c as z}from"./tabs-DMxeHD6R.js";import{g as P,M as w,d as A,e as B,G as S,a as $,b as T,c as k,h as M}from"./mount-icon-CWOJc24I.js";import{T as V}from"./trending-up-CBTLCJ66.js";import{G as E,M as L}from"./mountain-B_kR6zmK.js";import{T as D,C as F}from"./target-CqxbY67D.js";import{A as U,u as q}from"./useUserPoints-DunCdDtX.js";import{R as O}from"./refresh-cw-hV3h4Cfj.js";import"./charts-56rtB2he.js";import"./pointsCalculator-BwBrJ8sV.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=s("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),I=({userData:s,showDetails:x=!0})=>{const[g,h]=a.useState(null),[b,v]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const e=await fetch("/api/system/points-config");if(e.ok){const a=await e.json();h(a)}}catch(e){}finally{v(!1)}})()},[]);const C=e=>{if(!g)return[];const a=[];switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();e.includes("baixo")?(a.push("🔸 Participe mais ativamente dos cultos e eventos"),a.push("🔸 Envolva-se em grupos de estudo bíblico"),a.push("🔸 Ofereça-se para ajudar em atividades da igreja"),a.push(`🔸 Potencial de ganhar +${g.engajamento.medio-g.engajamento.baixo} pontos`)):(e.includes("médio")||e.includes("medio"))&&(a.push("🔸 Assuma mais responsabilidades na igreja"),a.push("🔸 Liderança em ministérios específicos"),a.push(`🔸 Potencial de ganhar +${g.engajamento.alto-g.engajamento.medio} pontos`))}else a.push("🔸 Informe seu nível de engajamento para receber pontos");break;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){s.classificacao.toLowerCase().includes("frequente")||(a.push("🔸 Aumente sua frequência nos cultos"),a.push("🔸 Participe regularmente das atividades"),a.push(`🔸 Potencial de ganhar +${g.classificacao.frequente-g.classificacao.naoFrequente} pontos`))}else a.push("🔸 Informe sua classificação para receber pontos");break;case"Fidelidade Regular com Dízimo":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();e.includes("não dizimista")||e.includes("nao dizimista")?(a.push("🔸 Comece a contribuir com dízimo"),a.push(`🔸 Potencial de ganhar +${g.dizimista.pontual-g.dizimista.naoDizimista} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se dizimista sazonal"),a.push(`🔸 Potencial de ganhar +${g.dizimista.sazonal-g.dizimista.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se dizimista recorrente"),a.push(`🔸 Potencial de ganhar +${g.dizimista.recorrente-g.dizimista.sazonal} pontos`))}else a.push("🔸 Informe seu status de dizimista para receber pontos");break;case"Fidelidade Regular com Ofertas":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();e.includes("não ofertante")||e.includes("nao ofertante")?(a.push("🔸 Comece a contribuir com ofertas"),a.push(`🔸 Potencial de ganhar +${g.ofertante.pontual-g.ofertante.naoOfertante} pontos`)):e.includes("pontual")?(a.push("🔸 Torne-se ofertante sazonal"),a.push(`🔸 Potencial de ganhar +${g.ofertante.sazonal-g.ofertante.pontual} pontos`)):e.includes("sazonal")&&(a.push("🔸 Torne-se ofertante recorrente"),a.push(`🔸 Potencial de ganhar +${g.ofertante.recorrente-g.ofertante.sazonal} pontos`))}else a.push("🔸 Informe seu status de ofertante para receber pontos");break;case"Tempo de Batismo":if(s.tempoBatismo){const e=s.tempoBatismo;"number"==typeof e&&(e<2?(a.push("🔸 Continue crescendo espiritualmente"),a.push(`🔸 Potencial de ganhar +${g.tempoBatismo.doisAnos} pontos em 2 anos`)):e<5?a.push(`🔸 Potencial de ganhar +${g.tempoBatismo.cincoAnos-g.tempoBatismo.doisAnos} pontos em 3 anos`):e<10?a.push(`🔸 Potencial de ganhar +${g.tempoBatismo.dezAnos-g.tempoBatismo.cincoAnos} pontos em 5 anos`):e<20&&a.push(`🔸 Potencial de ganhar +${g.tempoBatismo.vinteAnos-g.tempoBatismo.dezAnos} pontos em 10 anos`))}else a.push("🔸 Informe seu tempo de batismo para receber pontos");break;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;0===e?(a.push("🔸 Candidate-se a um cargo na igreja"),a.push(`🔸 Potencial de ganhar +${g.cargos.umCargo} pontos`)):1===e?(a.push("🔸 Assuma um segundo cargo"),a.push(`🔸 Potencial de ganhar +${g.cargos.doisCargos-g.cargos.umCargo} pontos`)):2===e&&(a.push("🔸 Assuma um terceiro cargo"),a.push(`🔸 Potencial de ganhar +${g.cargos.tresOuMais-g.cargos.doisCargos} pontos`))}else a.push("🔸 Candidate-se a cargos na igreja para receber pontos");break;case"Nome da Unidade":s.nomeUnidade&&s.nomeUnidade.trim()||(a.push("🔸 Cadastre-se em uma unidade"),a.push(`🔸 Potencial de ganhar +${g.nomeUnidade.comUnidade} pontos`));break;case"Tem Lição":s.temLicao||(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${g.temLicao.comLicao} pontos`));break;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;e<=3?(a.push("🔸 Aumente sua frequência nos cultos"),a.push(`🔸 Potencial de ganhar +${g.totalPresenca.quatroASete-g.totalPresenca.zeroATres} pontos`)):e<=7&&(a.push("🔸 Continue aumentando sua presença"),a.push(`🔸 Potencial de ganhar +${g.totalPresenca.oitoATreze-g.totalPresenca.quatroASete} pontos`))}else a.push("🔸 Informe sua frequência para receber pontos");break;case"Batizou Alguém":s.batizouAlguem&&0!==s.batizouAlguem||(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"CPF Válido":s.cpfValido&&"Sim"===s.cpfValido||(a.push("🔸 Atualize seu CPF no sistema"),a.push(`🔸 Potencial de ganhar +${g.cpfValido.valido} pontos`));break;case"Campos Vazios ACMS":!0===s.camposVaziosACMS&&(a.push("🔸 Complete todos os campos do seu perfil"),a.push(`🔸 Potencial de ganhar +${g.camposVaziosACMS.completos} pontos`));break;case"Comunhão (ES)":s.escolaSabatina?.comunhao&&0!==s.escolaSabatina.comunhao?(a.push("🔸 Continue participando de comunhões"),a.push(`🔸 Cada atividade vale +${g.escolaSabatina.comunhao} pontos`)):(a.push("🔸 Participe de atividades de comunhão"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.comunhao} pontos por atividade`));break;case"Missão (ES)":s.escolaSabatina?.missao&&0!==s.escolaSabatina.missao?(a.push("🔸 Continue com o trabalho missionário"),a.push(`🔸 Cada atividade vale +${g.escolaSabatina.missao} pontos`)):(a.push("🔸 Envolva-se em atividades missionárias"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.missao} pontos por atividade`));break;case"Estudo Bíblico (ES)":s.escolaSabatina?.estudoBiblico&&0!==s.escolaSabatina.estudoBiblico?(a.push("🔸 Continue estudando a Bíblia"),a.push(`🔸 Cada estudo vale +${g.escolaSabatina.estudoBiblico} pontos`)):(a.push("🔸 Participe de estudos bíblicos"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.estudoBiblico} pontos por estudo`));break;case"Batizou Alguém (ES)":s.escolaSabatina?.batizouAlguem&&0!==s.escolaSabatina.batizouAlguem?(a.push("🔸 Continue liderando batismos"),a.push(`🔸 Cada batismo vale +${g.escolaSabatina.batizouAlguem} pontos`)):(a.push("🔸 Envolva-se em evangelismo"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.batizouAlguem} pontos por batismo`));break;case"Discipulado Pós-Batismo (ES)":s.escolaSabatina?.discipuladoPosBatismo&&0!==s.escolaSabatina.discipuladoPosBatismo?(a.push("🔸 Continue o discipulado"),a.push(`🔸 Cada acompanhamento vale +${g.escolaSabatina.discipuladoPosBatismo} pontos`)):(a.push("🔸 Acompanhe novos batizados"),a.push(`🔸 Potencial de ganhar +${g.escolaSabatina.discipuladoPosBatismo} pontos por acompanhamento`))}return a},y=s.actualPoints||0,z=P(y),S=e=>{if(!g)return 0;try{switch(e){case"Engajamento":if(s.engajamento&&"string"==typeof s.engajamento){const e=s.engajamento.toLowerCase();if(e.includes("baixo"))return g.engajamento.baixo;if(e.includes("médio")||e.includes("medio"))return g.engajamento.medio;if(e.includes("alto"))return g.engajamento.alto}return 0;case"Classificação":if(s.classificacao&&"string"==typeof s.classificacao){return s.classificacao.toLowerCase().includes("frequente")?g.classificacao.frequente:g.classificacao.naoFrequente}return 0;case"Dizimista":if(s.dizimista&&"string"==typeof s.dizimista){const e=s.dizimista.toLowerCase();if(e.includes("não dizimista")||e.includes("nao dizimista"))return g.dizimista.naoDizimista;if(e.includes("pontual"))return g.dizimista.pontual;if(e.includes("sazonal"))return g.dizimista.sazonal;if(e.includes("recorrente"))return g.dizimista.recorrente}return 0;case"Ofertante":if(s.ofertante&&"string"==typeof s.ofertante){const e=s.ofertante.toLowerCase();if(e.includes("não ofertante")||e.includes("nao ofertante"))return g.ofertante.naoOfertante;if(e.includes("pontual"))return g.ofertante.pontual;if(e.includes("sazonal"))return g.ofertante.sazonal;if(e.includes("recorrente"))return g.ofertante.recorrente}return 0;case"Tempo de Batismo":if(s.tempoBatismo)if("string"==typeof s.tempoBatismo&&s.tempoBatismo.length>0){if(s.tempoBatismo.includes("2 a 4"))return g.tempoBatismo.doisAnos;if(s.tempoBatismo.includes("5 a 9"))return g.tempoBatismo.cincoAnos;if(s.tempoBatismo.includes("10 a 14"))return g.tempoBatismo.dezAnos;if(s.tempoBatismo.includes("15 a 19"))return g.tempoBatismo.vinteAnos;if(s.tempoBatismo.includes("20 a 29")||s.tempoBatismo.includes("30+"))return g.tempoBatismo.maisVinte}else if("number"==typeof s.tempoBatismo){if(s.tempoBatismo>=2&&s.tempoBatismo<5)return g.tempoBatismo.doisAnos;if(s.tempoBatismo>=5&&s.tempoBatismo<10)return g.tempoBatismo.dezAnos;if(s.tempoBatismo>=10&&s.tempoBatismo<20)return g.tempoBatismo.vinteAnos;if(s.tempoBatismo>=20&&s.tempoBatismo<30)return g.tempoBatismo.vinteAnos;if(s.tempoBatismo>=30)return g.tempoBatismo.maisVinte}return 0;case"Cargos":if(s.cargos&&Array.isArray(s.cargos)){const e=s.cargos.length;if(1===e)return g.cargos.umCargo;if(2===e)return g.cargos.doisCargos;if(e>=3)return g.cargos.tresOuMais}return 0;case"Nome da Unidade":return s.nomeUnidade&&s.nomeUnidade.trim()?g.nomeUnidade.comUnidade:0;case"Tem Lição":return s.temLicao?g.temLicao.comLicao:0;case"Total de Presença":if(void 0!==s.totalPresenca){const e=s.totalPresenca;if(e>=0&&e<=3)return g.totalPresenca.zeroATres;if(e>=4&&e<=7)return g.totalPresenca.quatroASete;if(e>=8&&e<=13)return g.totalPresenca.oitoATreze}return 0;case"Batizou Alguém":return s.batizouAlguem?"number"==typeof s.batizouAlguem?s.batizouAlguem>0?g.escolaSabatina.batizouAlguem:0:s.batizouAlguem?g.escolaSabatina.batizouAlguem:0:0;case"CPF Válido":return s.cpfValido?"string"==typeof s.cpfValido?"Sim"===s.cpfValido?g.cpfValido.valido:0:s.cpfValido?g.cpfValido.valido:0:0;case"Campos Vazios ACMS":return!1===s.camposVaziosACMS?g.camposVaziosACMS.completos:0;default:return 0}}catch(a){return 0}},$=e=>{if(!g)return 0;if(!s.escolaSabatina)return 0;try{switch(e){case"comunhao":return(s.escolaSabatina.comunhao||0)*g.escolaSabatina.comunhao;case"missao":return(s.escolaSabatina.missao||0)*g.escolaSabatina.missao;case"estudoBiblico":return(s.escolaSabatina.estudoBiblico||0)*g.escolaSabatina.estudoBiblico;case"batizouAlguem":return(s.escolaSabatina.batizouAlguem||0)*g.escolaSabatina.batizouAlguem;case"discipuladoPosBatismo":return(s.escolaSabatina.discipuladoPosBatismo||0)*g.escolaSabatina.discipuladoPosBatismo;default:return 0}}catch(a){return 0}},T=[{name:"Engajamento",points:S("Engajamento"),icon:V,color:"text-blue-600",bgColor:"bg-blue-50",description:"Nível de participação e envolvimento"},{name:"Classificação",points:S("Classificação"),icon:o,color:"text-green-600",bgColor:"bg-green-50",description:"Status de frequência na igreja"},{name:"Fidelidade Regular com Dízimo",points:S("Dizimista"),icon:E,color:"text-purple-600",bgColor:"bg-purple-50",description:"Fidelidade regular com dízimo"},{name:"Fidelidade Regular com Ofertas",points:S("Ofertante"),icon:t,color:"text-red-600",bgColor:"bg-red-50",description:"Contribuição com ofertas"},{name:"Tempo de Batismo",points:S("Tempo de Batismo"),icon:i,color:"text-orange-600",bgColor:"bg-orange-50",description:"Anos desde o batismo"},{name:"Cargos",points:S("Cargos"),icon:f,color:"text-indigo-600",bgColor:"bg-indigo-50",description:"Funções na igreja"},{name:"Nome da Unidade",points:S("Nome da Unidade"),icon:n,color:"text-emerald-600",bgColor:"bg-emerald-50",description:"Unidade cadastrada"},{name:"Tem Lição",points:S("Tem Lição"),icon:j,color:"text-amber-600",bgColor:"bg-amber-50",description:"Participação em estudos"},{name:"Total de Presença",points:S("Total de Presença"),icon:i,color:"text-violet-600",bgColor:"bg-violet-50",description:"Frequência nos cultos"},{name:"CPF Válido",points:S("CPF Válido"),icon:n,color:"text-sky-600",bgColor:"bg-sky-50",description:"Documentação em dia"},{name:"Campos Vazios ACMS",points:S("Campos Vazios ACMS"),icon:L,color:"text-stone-600",bgColor:"bg-stone-50",description:"Perfil completo no sistema"}],k=[{name:"Comunhão (ES)",points:$("comunhao"),icon:o,color:"text-blue-600",bgColor:"bg-blue-50",description:"Participação em comunhão"},{name:"Missão (ES)",points:$("missao"),icon:D,color:"text-green-600",bgColor:"bg-green-50",description:"Atividades missionárias"},{name:"Estudo Bíblico (ES)",points:$("estudoBiblico"),icon:j,color:"text-purple-600",bgColor:"bg-purple-50",description:"Estudos bíblicos realizados"},{name:"Batizou Alguém (ES)",points:$("batizouAlguem"),icon:N,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Liderança em batismos"},{name:"Discipulado Pós-Batismo (ES)",points:$("discipuladoPosBatismo"),icon:r,color:"text-orange-600",bgColor:"bg-orange-50",description:"Acompanhamento pós-batismo"}],M=k.reduce((e,a)=>e+a.points,0),F=T.reduce((e,a)=>e+a.points,0)+M;return b?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando configuração de pontos..."})]})})})]}):g?e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:y}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais do Usuário"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{iconType:A(y),className:"h-5 w-5"}),e.jsx("div",{className:"text-sm font-medium",children:B(y)})]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:z.name})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(y/1e3*100),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completude"}),e.jsx(u,{value:Math.round(y/1e3*100),className:"h-2 mt-2"})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Categorias Principais"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:T.map(a=>{const s=a.icon,o=C(a.name),t=o.length>0,i=(e=>{if(!g)return 0;switch(e){case"Engajamento":return g.engajamento.alto;case"Classificação":return g.classificacao.frequente;case"Fidelidade Regular com Dízimo":case"Fidelidade regular com dízimo":return g.dizimista.recorrente;case"Fidelidade Regular com Ofertas":return g.ofertante.recorrente;case"Tempo de Batismo":{const e=g.tempoBatismo;return Math.max(e.doisAnos||0,e.cincoAnos||0,e.dezAnos||0,e.vinteAnos||0,e.maisVinte||0)}case"Cargos":return g.cargos.tresOuMais;case"Nome da Unidade":return g.nomeUnidade.comUnidade;case"Tem Lição":return g.temLicao.comLicao;case"Total de Presença":return g.totalPresenca.oitoATreze;case"CPF Válido":return g.cpfValido.valido;case"Campos Vazios ACMS":return g.camposVaziosACMS.completos;default:return 0}})(a.name),n=i>0&&a.points>=i;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0 ${n?"ring-2 ring-green-200 border-green-300":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),n&&e.jsx(p,{variant:"outline",className:"text-[10px] bg-green-50 text-green-700 border-green-200",children:"Máximo"}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Escola Sabatina"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:k.map(a=>{const s=a.icon,o=C(a.name),t=o.length>0;return e.jsxs("div",{className:`p-3 rounded-lg border ${a.bgColor} hover:shadow-md transition-shadow group min-w-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(s,{className:`h-4 w-4 ${a.color} flex-shrink-0`}),e.jsx("span",{className:"font-medium text-sm truncate",children:a.name})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs(p,{variant:"secondary",className:"text-xs",children:[a.points," pts"]}),t&&e.jsxs(p,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),"Dicas"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:a.description}),t&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"h-3 w-3 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"Como ganhar mais pontos:"})]}),e.jsx("div",{className:"space-y-1",children:o.map((a,s)=>e.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed line-clamp-2",children:a},s))})]})]},a.name)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resumo dos Totais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:F}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Calculado"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:M}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Escola Sabatina"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pontos Reais"})]})]})]})]})]})]}):e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-primary"}),"Detalhes da Pontuação"]})}),e.jsx(m,{children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Erro ao carregar configuração de pontos"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-primary hover:underline",children:"Tentar novamente"})]})})]})},G=({userPoints:a=0,showCurrent:s=!0,className:o=""})=>{const t="number"==typeof a?a:a?.actualPoints||0,i=S.find(e=>t>=e.minPoints&&(!e.maxPoints||t<=e.maxPoints));return e.jsxs(l,{className:`bg-gradient-to-br from-slate-50 to-blue-50 border-slate-200 ${o}`,children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-xl",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600"}),"Jornada dos Montes Espirituais"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sua ascensão espiritual através dos montes bíblicos"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-9 gap-2 md:gap-3",children:S.map((a,s)=>{const o=t>=a.minPoints&&(!a.maxPoints||t<=a.maxPoints),n=t>(a.maxPoints||a.minPoints),c=s===(i?.id||0)+1;return e.jsxs("div",{className:"relative group cursor-pointer transition-all duration-300 "+(o?"scale-110 z-10":n?"scale-105":"scale-100"),children:[e.jsx(l,{className:`h-32 md:h-40 transition-all duration-300 border-2 ${o?"ring-4 ring-orange-400 border-orange-300 bg-gradient-to-b from-orange-50 to-orange-100 shadow-lg":n?"border-green-300 bg-gradient-to-b from-green-50 to-green-100 shadow-md":c?"border-blue-300 bg-gradient-to-b from-blue-50 to-blue-100 shadow-sm":"border-gray-200 bg-gradient-to-b from-gray-50 to-gray-100"} hover:shadow-lg hover:scale-105`,children:e.jsxs(m,{className:"p-2 md:p-3 h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-2xl md:text-4xl mb-2 transition-all duration-300 "+(o?"scale-125":"scale-100"),children:e.jsx(w,{iconType:a.icon,className:"h-8 w-8 md:h-12 md:w-12 "+(o?"text-orange-600":n?"text-green-600":"text-gray-600")})}),e.jsx("div",{className:"text-center font-bold text-xs md:text-sm mb-1 transition-colors duration-300 "+(o?"text-orange-700":n?"text-green-700":"text-gray-600"),children:a.mount}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:[a.minPoints,"+ pts"]})]})}),o&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-orange-500 text-white text-xs px-2 py-1 animate-pulse",children:[e.jsx(r,{className:"h-3 w-3 mr-1"}),"Atual"]})}),n&&e.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:e.jsxs(p,{className:"bg-green-500 text-white text-xs px-2 py-1",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),"Concluído"]})}),s<S.length-1&&e.jsx("div",{className:"hidden md:block absolute top-1/2 -right-1.5 w-3 h-0.5 transform -translate-y-1/2 transition-all duration-300 "+(n?"bg-green-400":"bg-gray-300")}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-30 whitespace-nowrap",children:[e.jsx("div",{className:"font-bold mb-1",children:a.name}),e.jsxs("div",{className:"text-gray-300",children:[a.minPoints," - ",a.maxPoints||"∞"," pontos"]}),e.jsx("div",{className:"text-orange-300 mt-1",children:a.benefits.slice(0,2).join(", ")}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"})]})]},a.id)})})})]})};function H(){x();const{data:s,isLoading:o,error:t,refetch:i}=q(),[n,r]=a.useState("my-progress");if(o)return e.jsx(g,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando sua pontuação..."})]})})});if(t||!s)return e.jsx(g,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||"Erro ao carregar dados de pontuação"}),e.jsxs(h,{onClick:i,className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Tentar novamente"]})]})})});const{total:p,breakdown:f,userData:j}=s,S=P(p),V=$(p),E=T(p),D=k(p);return e.jsx(g,{children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(b,{className:"h-8 w-8 text-yellow-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Minha Pontuação"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Acompanhe seu progresso na jornada espiritual"})]}),e.jsxs(v,{value:n,onValueChange:r,className:"w-full",children:[e.jsx(C,{className:"grid w-full grid-cols-1",children:e.jsx(y,{value:"my-progress",children:"Meu Progresso"})}),e.jsxs(z,{value:"my-progress",className:"space-y-6",children:[e.jsxs(l,{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:[e.jsx(c,{className:"pb-3",children:e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(L,{className:"h-5 w-5 text-purple-600"}),"Seu Monte Atual"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx(w,{iconType:A(p),className:"h-24 w-24 mx-auto"})}),e.jsx("div",{className:M(p)+" text-2xl font-bold mb-2",children:B(p)}),e.jsx("div",{className:"text-lg text-muted-foreground",children:S.name})]}),V&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progresso para ",V.mount]}),e.jsxs("span",{children:[Math.round(E),"%"]})]}),e.jsx(u,{value:E,className:"h-2"}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:D>0?`${D} pontos para ${V.mount}`:"Monte máximo alcançado!"})]}),p>=1e3&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 p-2 bg-yellow-50 rounded-lg",children:[e.jsx(N,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Status Máximo Alcançado!"})]})]})]}),e.jsx(G,{userPoints:p,showCurrent:!0}),e.jsx(I,{userData:j,showDetails:!0})]})]})]})})}export{H as default};
