import{j as e}from"./ui-D1vmdbY6.js";import{r as s}from"./vendor-Ber6wfih.js";import{c as t,i as a,C as r,a as i,e as n,b as l,f as o,q as d,r as c,d as m,g as x,B as u,U as h,X as p,L as v,I as g,s as j,t as b,v as f,w as N,x as y,y as w,j as C,l as D,H as E,E as S,z as k,o as A,D as T,A as O,F as z,G as I}from"./index-DtHhSAMi.js";import{u as F}from"./useQuery-rrOtt3FZ.js";import{P as M}from"./plus-7BUzL6h5.js";import{C as $}from"./cake-DuNcP3Mv.js";import{C as R}from"./clock-DN60WSOx.js";import{M as L}from"./map-pin-DK6c9jly.js";import{D as q,a as P,b as V,c as B}from"./dialog-btQUui9q.js";import{T as U}from"./textarea-CYBeZ_MD.js";import{S as G,U as Q}from"./upload-v_97tXyL.js";import{T as K}from"./trash-2-DlKxqaye.js";import{S as J}from"./switch-BNtxM37h.js";import{S as Y}from"./shield-CRWbCi8m.js";import"./charts-leMEfCN9.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=t("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),_=t("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Z=t("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),W=()=>{const{data:e,isLoading:t,error:a}=F({queryKey:["system","event-permissions"],queryFn:async()=>{const e=await fetch("/api/system/event-permissions");if(!e.ok)throw new Error("Erro ao carregar permissões");return(await e.json()).permissions},staleTime:3e5}),r=s.useCallback(s=>{if(!e||!e[s])return["igreja-local","asr-geral","asr-administrativo","asr-pastores","visitas","reunioes","pregacoes"];return Object.keys(e[s]).filter(t=>e[s][t])},[e]),i=s.useCallback((s,t)=>!e||!e[s]||(e[s][t]||!1),[e]);return{permissions:e,isLoading:t,error:a,getAvailableEventTypes:r,canFilterEventType:i}},X=()=>{const[e,t]=s.useState({today:[],thisMonth:[],all:[]}),[r,i]=s.useState(!0),[n,l]=s.useState(null),{user:o}=a();return s.useEffect(()=>{o&&(async()=>{try{i(!0);const e={};(null==o?void 0:o.id)&&(e["x-user-id"]=o.id.toString(),e["x-user-role"]=o.role);const s=await fetch("/api/users/birthdays",{headers:e});if(!s.ok)throw new Error("Falha ao buscar aniversariantes");const a=await s.json();t(a),l(null)}catch(e){l(e instanceof Error?e.message:"Erro desconhecido")}finally{i(!1)}})()},[o]),{birthdays:e,isLoading:r,error:n}},ee=e=>{const[s,t,a]=e.split("-");return new Date(parseInt(s),parseInt(t)-1,parseInt(a)).toLocaleDateString("pt-BR")},se=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],te=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],ae={"igreja-local":"bg-red-500 text-white border-red-600","asr-geral":"bg-orange-500 text-white border-orange-600","asr-administrativo":"bg-cyan-500 text-white border-cyan-600","asr-pastores":"bg-purple-500 text-white border-purple-600",visitas:"bg-green-500 text-white border-green-600",reunioes:"bg-blue-500 text-white border-blue-600",pregacoes:"bg-indigo-500 text-white border-indigo-600"},re=e=>{if(e.type&&ae[e.type])return ae[e.type];const s=e.title.toLowerCase();return s.includes("igreja")&&s.includes("local")?ae["igreja-local"]:s.includes("asr")&&s.includes("geral")?ae["asr-geral"]:s.includes("asr")&&s.includes("administrativo")?ae["asr-administrativo"]:s.includes("asr")&&s.includes("pastores")?ae["asr-pastores"]:s.includes("visita")||s.includes("evangelismo")||s.includes("missao")?ae.visitas:s.includes("reuniao")||s.includes("reunião")?ae.reunioes:s.includes("prega")||s.includes("sermao")||s.includes("culto")?ae.pregacoes:ae.reunioes},ie={"igreja-local":"Igreja Local","asr-geral":"ASR Geral","asr-administrativo":"ASR Administrativo","asr-pastores":"ASR Pastores",visitas:"Visitas",reunioes:"Reuniões",pregacoes:"Pregações"};
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function ne({onEventClick:t,onNewEvent:p,onDateClick:v,activeFilters:g=[],eventTypes:j=[],showBirthdays:b=!1}){const{user:f}=a(),{canFilterEventType:N}=W(),[y,w]=s.useState(new Date),[C,D]=s.useState(null),{birthdays:E,isLoading:S}=X(),{data:k,isLoading:A,error:T}=F({queryKey:["events",null==f?void 0:f.role],queryFn:()=>(async e=>{try{const s=await fetch("/api/meetings"),t=await s.json(),a=await fetch(`/api/events?role=${e||"interested"}`),r=await a.json(),i=t.map(e=>{var s;return{id:e.id,title:e.title||`Visita - ${e.requesterName||"Usuário"}`,description:e.description||e.notes,startDate:e.scheduledAt?e.scheduledAt.split("T")[0]:"",time:e.scheduledAt?null==(s=e.scheduledAt.split("T")[1])?void 0:s.substring(0,5):"",duration:e.duration||60,location:e.location,type:"visitas",attendees:1,maxAttendees:5,status:e.status||"scheduled",organizer:e.organizer||"Sistema"}}),n=r.map(e=>{const s=e.date||e.start_date||e.startDate;let t="";s&&("string"==typeof s?t=s.split("T")[0]:s instanceof Date&&(t=s.toISOString().split("T")[0]));let a="";const r=e.end_date||e.endDate;return r&&("string"==typeof r?a=r.split("T")[0]:r instanceof Date&&(a=r.toISOString().split("T")[0])),{id:e.id,title:e.title,description:e.description,startDate:t,endDate:a||void 0,time:void 0,duration:void 0,location:e.location,type:e.type,attendees:void 0,maxAttendees:void 0,status:"confirmed",organizer:e.organizerId?`ID ${e.organizerId}`:"Sistema"}});return[...i,...n]}catch(T){return[]}})(null==f?void 0:f.role),enabled:!!(null==f?void 0:f.role)}),O=null==k?void 0:k.filter(e=>{if((null==f?void 0:f.role)&&!N(f.role,e.type))return!1;if(g.length>0){return g.includes(e.type)}return!0}),z=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),I=(e=>{const s=e.getFullYear(),t=e.getMonth(),a=new Date(s,t,1),r=new Date(s,t+1,0).getDate(),i=a.getDay(),n=[];for(let l=0;l<i;l++)n.push(null);for(let l=1;l<=r;l++){const e=`${s}-${String(t+1).padStart(2,"0")}-${String(l).padStart(2,"0")}`;n.push(e)}return n})(y),q=e=>{return e?(s=e,((null==O?void 0:O.filter(e=>{const t=e.startDate,a=e.endDate||e.startDate,r=new Date(s+"T00:00:00"),i=r>=new Date(t+"T00:00:00")&&r<=new Date(a+"T23:59:59");return e.endDate&&(e.startDate,e.endDate),i}))||[]).sort((e,s)=>{const t=P(e),a=P(s);if(t&&!a)return-1;if(!t&&a)return 1;if(t&&a){const t=new Date(e.endDate||e.startDate).getTime()-new Date(e.startDate).getTime();return new Date(s.endDate||s.startDate).getTime()-new Date(s.startDate).getTime()-t}return e.title.localeCompare(s.title)})):[];var s},P=e=>e.endDate&&e.startDate!==e.endDate,V=(e,s)=>P(e)&&e.startDate===s,B=(e,s)=>P(e)&&e.endDate===s,U=(e,s)=>P(e)&&e.endDate&&s>e.startDate&&s<e.endDate;return A?e.jsx("div",{className:"text-center py-8",children:"Carregando calendário..."}):T?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["Erro ao carregar eventos: ",T.message]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-5 w-5 text-primary"}),e.jsxs(l,{className:"text-lg",children:[se[y.getMonth()]," ",y.getFullYear()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{w(new Date(y.getFullYear(),y.getMonth()-1,1))},"data-testid":"previous-month",children:e.jsx(d,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{w(new Date(y.getFullYear(),y.getMonth()+1,1))},"data-testid":"next-month",children:e.jsx(c,{className:"h-4 w-4"})}),e.jsxs(o,{size:"sm",onClick:p,className:"bg-primary hover:bg-primary-dark","data-testid":"new-event",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Novo Evento"]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[te.map(s=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground border-b",children:s},s)),I.map((s,a)=>{const r=q(s),i=(e=>{if(!e)return!1;const s=new Date;return e===new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())).toISOString().split("T")[0]})(s),n=C===s;let l=[];if(s){const[e,t,a]=s.split("-");l=(e=>{if(!b)return[];const s=e.getUTCMonth(),t=e.getUTCDate();return(E.all||[]).filter(e=>{if(!e.birthDate)return!1;const[a,r,i]=e.birthDate.split("-"),n=parseInt(r)-1,l=parseInt(i);return n===s&&l===t})})(new Date(Date.UTC(parseInt(e),parseInt(t)-1,parseInt(a)))),l.length}return e.jsx("div",{className:x("min-h-[120px] p-1 border border-border cursor-pointer hover:bg-muted/50 transition-colors",i&&"bg-primary/10 border-primary",n&&"bg-primary/20",!s&&"bg-muted/20 cursor-not-allowed"),onClick:()=>(e=>{e&&(D(e),null==v||v(e))})(s),"data-testid":s?`calendar-day-${s}`:`empty-day-${a}`,children:s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x("text-sm font-medium mb-1",i&&"text-primary font-bold"),children:parseInt(s.split("-")[2])}),e.jsxs("div",{className:"space-y-0.5 mb-1 flex flex-col",children:[r.slice(0,3).map(a=>{const r=P(a),i=V(a,s),n=B(a,s),l=U(a,s);return e.jsxs("div",{className:x("text-xs p-0.5 rounded border cursor-pointer hover:opacity-80 shadow-sm relative",re(a),r&&"border-2",i&&"rounded-l-md rounded-r-none border-l-2 border-r-0",n&&"rounded-r-md rounded-l-none border-r-2 border-l-0",l&&"rounded-none border-l-0 border-r-0"),onClick:e=>{e.stopPropagation(),null==t||t(a)},"data-testid":`event-${a.id}`,title:r?`${a.title} (${a.startDate} - ${a.endDate})`:a.title,children:[e.jsxs("div",{className:"font-medium truncate flex items-center gap-1 text-xs",children:[r&&e.jsx(H,{className:"h-2 w-2"}),e.jsx("span",{className:"text-xs",children:r?i?`${a.title} (Início)`:n?`${a.title} (Fim)`:"...":a.title})]}),e.jsxs("div",{className:"text-xs opacity-75 text-xs",children:[a.time?z(a.time):"",r&&e.jsx("span",{className:"ml-1 text-xs",children:l&&"Continua"})]})]},a.id)}),r.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center py-0.5",children:["+",r.length-3," mais"]})]}),e.jsx("div",{className:"flex flex-col space-y-0.5",children:l.map(s=>e.jsxs("div",{className:"p-0.5 rounded text-xs cursor-pointer hover:opacity-80 transition-opacity shadow-sm bg-green-100 text-green-800 border border-green-200 flex-shrink-0","data-testid":`birthday-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-2 w-2"}),e.jsx("span",{className:"font-medium truncate text-xs",children:s.name})]}),e.jsx("div",{className:"text-xs text-green-600",children:"Aniversário"})]},`birthday-${s.id}`))})]})},a)})]})})]}),C&&e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs(l,{className:"text-lg",children:["Eventos do dia ",ee(C)]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:0===q(C).length?e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(n,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum evento neste dia"}),e.jsxs(o,{variant:"outline",size:"sm",className:"mt-2",onClick:p,"data-testid":"add-event-selected-date",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Adicionar Evento"]})]}):q(C).map(s=>{const a=P(s),r=V(s,C),i=B(s,C),n=U(s,C);return e.jsx("div",{className:x("p-2 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",a&&"border-2",r&&"border-l-4 border-l-green-500 rounded-l-lg",i&&"border-r-4 border-r-red-500 rounded-r-lg",n&&"border-t-2 border-b-2 border-t-blue-500 border-b-blue-500 rounded-none"),onClick:()=>null==t?void 0:t(s),"data-testid":`detailed-event-${s.id}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:a?r?`${s.title} (Início)`:i?`${s.title} (Fim)`:`${s.title} (Continua)`:s.title}),a&&e.jsxs(u,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),r?"Início":i?"Fim":"Continua"]})]}),s.description&&e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:[s.time?z(s.time):""," (",s.duration||60,"min)"]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:s.location})]}),s.attendees&&s.maxAttendees&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:[s.attendees,"/",s.maxAttendees]})]}),a&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:[r&&"Início",i&&"Fim",n&&"Continua"]})]})]})]}),e.jsx(u,{className:`${ae[s.type]} font-medium shadow-sm text-xs`,children:ie[s.type]})]})},s.id)})})})]}),b&&e.jsxs(r,{children:[e.jsx(i,{className:"pb-3",children:e.jsxs(l,{className:"text-base flex items-center gap-2 text-green-800",children:[e.jsx($,{className:"h-4 w-4 text-green-600"}),"Aniversariantes de ",se[y.getMonth()]]})}),e.jsx(m,{children:S?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Carregando aniversariantes..."}):(()=>{const s=(E.all||[]).filter(e=>{if(!e.birthDate)return!1;const[s,t]=e.birthDate.split("-");return parseInt(t)-1===y.getUTCMonth()});return 0===s.length?e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:["Nenhum aniversariante em ",se[y.getMonth()]]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.map(s=>{const t=s.birthDate;let a="",r="";if(t.includes("-")){const[e,s,i]=t.split("-");a=i,r=s}else if(t.includes("/")){const[e,s,i]=t.split("/");a=e,r=s}return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-green-50 border-green-200","data-testid":`birthday-card-${s.id}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:a}),e.jsx("div",{className:"text-xs text-green-500",children:se[parseInt(r)-1]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s.name}),s.church&&e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.church})]})]},s.id)})})})()})]})]})}const le=e=>{const[s,t,a]=e.split("-");return new Date(parseInt(s),parseInt(t)-1,parseInt(a)).toLocaleDateString("pt-BR")},oe=[{value:"estudos",label:"Estudos"},{value:"reunioes",label:"Reuniões"},{value:"visitas",label:"Visitas"},{value:"oracao",label:"Oração"},{value:"chamadas",label:"Chamadas"},{value:"cultos",label:"Cultos"},{value:"igreja-local",label:"Igreja Local"},{value:"asr-geral",label:"ASR Geral"},{value:"asr-administrativo",label:"ASR Administrativo"},{value:"regional-distrital",label:"Regional/Distrital"}],de=[{value:"scheduled",label:"Agendado"},{value:"confirmed",label:"Confirmado"},{value:"cancelled",label:"Cancelado"}],ce=({event:t,isOpen:a,onClose:r,onSave:i,onDelete:l,isEditing:d=!1,eventTypes:c})=>{var m,x,C,D;const E=c?c.map(e=>({value:e.id,label:e.label})):oe,[S,k]=s.useState(d||!t),[A,T]=s.useState(t||{title:"",description:"",startDate:(new Date).toISOString().split("T")[0],time:"09:00",duration:60,location:"",type:"cultos",maxAttendees:50,status:"scheduled",organizer:""}),O=e=>{const s=Math.floor(e/60),t=e%60;return 0===s?`${t}min`:0===t?`${s}h`:`${s}h ${t}min`};return e.jsx(q,{open:a,onOpenChange:e=>!e&&r(),children:e.jsxs(P,{className:"w-[90vw] max-w-md max-h-[80vh] overflow-y-auto p-2 sm:p-2","aria-describedby":"event-modal-description",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between sticky top-0 bg-background pt-1 pb-1 border-b z-10",children:[e.jsx(B,{className:"text-xs sm:text-sm",children:t?S?"Editar Evento":"Detalhes do Evento":"Novo Evento"}),e.jsx("div",{id:"event-modal-description",className:"sr-only",children:t?S?"Formulário para editar evento existente":"Visualização dos detalhes do evento":"Formulário para criar novo evento"}),e.jsx("div",{className:"flex gap-1",children:t&&!S?e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>k(!0),"data-testid":"button-edit-event",className:"h-6 px-2 text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Editar"]}):e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{t?(T(t),k(!1)):r()},"data-testid":"button-cancel-edit",className:"h-6 px-2 text-xs",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Cancelar"]}),e.jsxs(o,{size:"sm",onClick:()=>{i(A),k(!1),t||r()},"data-testid":"button-save-event",className:"h-6 px-2 text-xs",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"Salvar"]})]})})]}),e.jsxs("div",{className:"space-y-2 pt-1 pb-2",children:[!S&&t&&e.jsx("div",{className:"flex items-start space-x-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold mb-1","data-testid":"text-event-title",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.jsx(u,{className:`${(e=>{const s={estudos:"bg-blue-500 text-white border-blue-600",reunioes:"bg-emerald-500 text-white border-emerald-600",visitas:"bg-purple-500 text-white border-purple-600",oracao:"bg-amber-500 text-white border-amber-600",chamadas:"bg-rose-500 text-white border-rose-600",cultos:"bg-indigo-500 text-white border-indigo-600","igreja-local":"bg-red-500 text-white border-red-600","asr-geral":"bg-orange-500 text-white border-orange-600","asr-administrativo":"bg-cyan-500 text-white border-cyan-600","regional-distrital":"bg-slate-500 text-white border-slate-600"};return s[e]||s.estudos})(t.type)} text-xs`,"data-testid":"badge-event-type",children:null==(m=E.find(e=>e.value===t.type))?void 0:m.label}),e.jsx(u,{className:`${(e=>{const s={scheduled:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"};return s[e]||s.scheduled})(t.status)} text-xs`,"data-testid":"badge-event-status",children:null==(x=de.find(e=>e.value===t.status))?void 0:x.label}),t.isRecurring&&e.jsx(u,{variant:"outline","data-testid":"badge-recurring",className:"text-xs",children:"Recorrente"})]}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2","data-testid":"text-event-description",children:t.description})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"title",className:"text-xs",children:"Título"}),S?e.jsx(g,{id:"title",value:A.title,onChange:e=>T({...A,title:e.target.value}),placeholder:"Ex: Culto da Manhã","data-testid":"input-event-title",className:"mt-1 h-6 text-xs"}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:null==t?void 0:t.title})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"description",className:"text-xs",children:"Descrição"}),S?e.jsx(U,{id:"description",value:A.description,onChange:e=>T({...A,description:e.target.value}),placeholder:"Descrição opcional...",rows:2,"data-testid":"input-event-description",className:"mt-1 text-xs min-h-[60px]"}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(null==t?void 0:t.description)||"Nenhuma descrição"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"type",className:"text-xs",children:"Tipo"}),S?e.jsxs(j,{value:A.type,onValueChange:e=>T({...A,type:e}),children:[e.jsx(b,{"data-testid":"select-event-type",className:"mt-1 h-6 text-xs",children:e.jsx(f,{})}),e.jsx(N,{children:E.map(s=>e.jsx(y,{value:s.value,children:s.label},s.value))})]}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:null==(C=E.find(e=>e.value===(null==t?void 0:t.type)))?void 0:C.label})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"status",className:"text-xs",children:"Status"}),S?e.jsxs(j,{value:A.status,onValueChange:e=>T({...A,status:e}),children:[e.jsx(b,{"data-testid":"select-event-status",className:"mt-1 h-6 text-xs",children:e.jsx(f,{})}),e.jsx(N,{children:de.map(s=>e.jsx(y,{value:s.value,children:s.label},s.value))})]}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:null==(D=de.find(e=>e.value===(null==t?void 0:t.status)))?void 0:D.label})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"date",className:"text-xs",children:"Data"}),S?e.jsx(g,{id:"date",type:"date",value:A.startDate,onChange:e=>T({...A,startDate:e.target.value}),"data-testid":"input-event-date",className:"mt-1 h-6 text-xs"}):e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(n,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:(null==t?void 0:t.startDate)?le(t.startDate):""})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"time",className:"text-xs",children:"Horário"}),S?e.jsx(g,{id:"time",type:"time",value:A.time,onChange:e=>T({...A,time:e.target.value}),"data-testid":"input-event-time",className:"mt-1 h-6 text-xs"}):e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(R,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[null==t?void 0:t.time," (",O((null==t?void 0:t.duration)||0),")"]})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"duration",className:"text-xs",children:"Duração"}),S?e.jsx(g,{id:"duration",type:"number",min:"15",step:"15",value:A.duration,onChange:e=>T({...A,duration:parseInt(e.target.value)}),"data-testid":"input-event-duration",className:"mt-1 h-6 text-xs"}):e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:O((null==t?void 0:t.duration)||0)})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"maxAttendees",className:"text-xs",children:"Capacidade"}),S?e.jsx(g,{id:"maxAttendees",type:"number",min:"1",value:A.maxAttendees,onChange:e=>T({...A,maxAttendees:parseInt(e.target.value)}),"data-testid":"input-event-capacity",className:"mt-1 h-6 text-xs"}):e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(h,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(null==t?void 0:t.attendees)||0,"/",null==t?void 0:t.maxAttendees," pessoas"]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"location",className:"text-xs",children:"Local"}),S?e.jsx(g,{id:"location",value:A.location,onChange:e=>T({...A,location:e.target.value}),placeholder:"Ex: Igreja Central","data-testid":"input-event-location",className:"mt-1 h-6 text-xs"}):e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(L,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:(null==t?void 0:t.location)||"Local não informado"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"organizer",className:"text-xs",children:"Organizador"}),S?e.jsx(g,{id:"organizer",value:A.organizer,onChange:e=>T({...A,organizer:e.target.value}),placeholder:"Nome do organizador","data-testid":"input-event-organizer",className:"mt-1 h-7 text-xs"}):e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(w,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:(null==t?void 0:t.organizer)||"Organizador não informado"})]})]})]}),t&&!S&&l&&e.jsx("div",{className:"flex justify-end pt-3 border-t mt-4",children:e.jsxs(o,{variant:"destructive",size:"sm",onClick:()=>l(t.id),"data-testid":"button-delete-event",className:"h-7 px-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Excluir"]})})]})]})})};function me({isOpen:t,onClose:a,onImportComplete:r}){const[i,n]=s.useState(null),[l,d]=s.useState(!1),[c,m]=s.useState("");return e.jsx(q,{open:t,onOpenChange:a,children:e.jsxs(P,{className:"sm:max-w-md","aria-describedby":"import-excel-description",children:[e.jsx(V,{children:e.jsx(B,{children:"Importar Calendário Excel"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{id:"import-excel-description",className:"text-sm text-muted-foreground",children:"Selecione um arquivo Excel (.xlsx) com as colunas: Evento, Categoria, Data"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"file",children:"Selecionar arquivo Excel (.xlsx)"}),e.jsx(g,{id:"file",type:"file",accept:".xlsx",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&(n(t),m(""))},disabled:l})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:e.jsx("strong",{children:"Formato esperado:"})}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Coluna A: Evento"}),e.jsx("li",{children:"Coluna B: Categoria (Igreja Local, ASR Geral, ASR Administrativo, ASR Pastores, Visitas, Reuniões, Pregações)"}),e.jsx("li",{children:"Coluna C: Data (DD/MM ou DD/MM-DD/MM)"})]})]}),c&&e.jsx("div",{className:"p-3 rounded-md text-sm "+(c.includes("✅")?"bg-green-100 text-green-800":c.includes("❌")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:c}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{variant:"outline",onClick:a,disabled:l,children:"Cancelar"}),e.jsx(o,{onClick:async()=>{if(i){d(!0),m("Importando...");try{const e=new FormData;e.append("file",i);const s=await fetch("/api/calendar/import-simple",{method:"POST",body:e}),t=await s.json();t.success?(m(`✅ ${t.message||"Arquivo importado com sucesso!"}`),window.dispatchEvent(new CustomEvent("import-success",{detail:{imported:t.imported}})),setTimeout(()=>{null==r||r(),a()},2e3)):m(`❌ ${t.error||"Erro ao importar arquivo"}`)}catch(e){m("❌ Erro ao conectar com o servidor")}finally{d(!1)}}else m("Por favor, selecione um arquivo Excel")},disabled:!i||l,children:l?"Importando...":"Importar"})]})]})]})})}const xe=[{id:"igreja-local",label:"Igreja Local",color:"bg-red-500 text-white border-red-600"},{id:"asr-geral",label:"ASR Geral",color:"bg-orange-500 text-white border-orange-600"},{id:"asr-administrativo",label:"ASR Administrativo",color:"bg-cyan-500 text-white border-cyan-600"},{id:"asr-pastores",label:"ASR Pastores",color:"bg-purple-500 text-white border-purple-600"},{id:"visitas",label:"Visitas",color:"bg-green-500 text-white border-green-600"},{id:"reunioes",label:"Reuniões",color:"bg-blue-500 text-white border-blue-600"},{id:"pregacoes",label:"Pregações",color:"bg-indigo-500 text-white border-indigo-600"}],ue=[{id:"admin",label:"Administradores",icon:Y,color:"bg-red-500"},{id:"missionary",label:"Missionários",icon:E,color:"bg-purple-500"},{id:"member",label:"Membros",icon:h,color:"bg-blue-500"},{id:"interested",label:"Interessados",icon:w,color:"bg-green-500"}],he=({isOpen:t,onClose:a})=>{const{toast:n}=C(),d=D(),[c,x]=s.useState({}),[h,p]=s.useState(!1),[g,j]=s.useState(!1);s.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const e=await fetch("/api/system/event-permissions");if(e.ok){const s=await e.json();x(s.permissions||f())}else x(f())}catch(e){x(f())}},f=()=>{const e={};return ue.forEach(s=>{e[s.id]={},xe.forEach(t=>{"admin"===s.id?e[s.id][t.id]=!0:"missionary"===s.id?e[s.id][t.id]=["visitas","reunioes","pregacoes","igreja-local"].includes(t.id):"member"===s.id?e[s.id][t.id]=["reunioes","pregacoes","igreja-local","visitas"].includes(t.id):e[s.id][t.id]=["pregacoes","igreja-local"].includes(t.id)}),"admin"===s.id||"missionary"===s.id||"member"===s.id?e[s.id].aniversarios=!0:e[s.id].aniversarios=!1}),e},N=(e,s,t)=>{x(a=>({...a,[e]:{...a[e]||{},[s]:t}})),j(!0)};return e.jsx(q,{open:t,onOpenChange:a,children:e.jsxs(P,{className:"max-w-5xl max-h-[85vh] overflow-y-auto -mt-8",children:[e.jsxs(V,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-blue-600"}),"Gerenciar Permissões de Visualização"]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Filtros Automáticos"}),e.jsx("p",{className:"text-blue-700",children:"Os filtros de eventos na agenda serão automaticamente configurados baseados nas permissões definidas aqui. Usuários só poderão filtrar pelos tipos de eventos que têm permissão para visualizar."})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 bg-gray-50 rounded-lg border",children:[e.jsx("div",{className:"col-span-4",children:e.jsx(v,{className:"text-sm font-semibold text-gray-700",children:"Tipos de Eventos"})}),ue.map(s=>e.jsx("div",{className:"col-span-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-full ${s.color} text-white`,children:e.jsx(s.icon,{className:"h-3 w-3"})}),e.jsx(v,{className:"text-xs font-medium text-gray-700",children:s.label})]})},s.id))]}),xe.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.color}`}),e.jsx(v,{className:"text-sm font-medium text-gray-800",children:s.label})]}),ue.map(t=>{const a=(c[t.id]||{})[s.id]||!1;return e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a?e.jsx(S,{className:"h-4 w-4 text-green-600"}):e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsx(J,{checked:a,onCheckedChange:e=>N(t.id,s.id,e)})]})},t.id)})]},s.id)),e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 rounded-lg border hover:bg-gray-50 transition-colors bg-pink-50",children:[e.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-pink-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-pink-600"}),e.jsx(v,{className:"text-sm font-medium text-gray-800",children:"Aniversariantes do Mês"})]})]}),ue.map(s=>{const t=(c[s.id]||{}).aniversarios||!1;return e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(S,{className:"h-4 w-4 text-green-600"}):e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsx(J,{checked:t,onCheckedChange:e=>N(s.id,"aniversarios",e)})]})},s.id)})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 bg-blue-50 rounded-lg border",children:[e.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[e.jsx(Y,{className:"h-4 w-4 text-blue-600"}),e.jsx(v,{className:"text-sm font-semibold text-blue-800",children:"Controle Global"})]}),ue.map(s=>{const t=c[s.id]||{},a=Object.values(t).every(Boolean);return e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{checked:a,onCheckedChange:e=>((e,s)=>{if(!c||0===Object.keys(c).length)return;const t={...c};t[e]||(t[e]={}),xe.forEach(a=>{t[e][a.id]=s}),t[e].aniversarios=s,x(t),j(!0)})(s.id,e)}),e.jsx(v,{className:"text-xs text-blue-700 font-medium",children:a?"Ver tudo":"Ver selecionados"})]})},s.id)})]})]}),e.jsxs(r,{className:"bg-gray-50",children:[e.jsx(i,{children:e.jsx(l,{className:"text-base",children:"Resumo das Configurações"})}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ue.map(s=>{const t=c[s.id]||{},a=Object.values(t).filter(Boolean).length,r=xe.length+1;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a}),e.jsxs("div",{className:"text-xs text-gray-600",children:["de ",r," tipos"]}),e.jsx("div",{className:"text-xs font-medium text-gray-800",children:s.label})]},s.id)})})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>{x(f()),j(!0)},disabled:h,children:"Restaurar Padrões"}),g&&e.jsx(u,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Alterações não salvas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",onClick:a,disabled:h,children:"Cancelar"}),e.jsx(o,{onClick:async()=>{p(!0);try{if(!(await fetch("/api/system/event-permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissions:c})})).ok)throw new Error("Erro ao salvar permissões");n({title:"✅ Permissões salvas!",description:"As configurações de visualização foram atualizadas com sucesso."}),j(!1),d.invalidateQueries({queryKey:["system","event-permissions"]}),d.invalidateQueries({queryKey:["events"]}),a()}catch(e){n({title:"❌ Erro ao salvar",description:"Não foi possível salvar as permissões. Tente novamente.",variant:"destructive"})}finally{p(!1)}},disabled:!g||h,className:"bg-blue-600 hover:bg-blue-700",children:h?"Salvando...":"Salvar Permissões"})]})]})]})})};function pe(){const{toast:t}=C(),{user:r}=a(),i=D(),[n,l]=s.useState(null),[d,c]=s.useState(!1),[m,x]=s.useState(!1),[h,p]=s.useState(!1),[v,g]=s.useState(!1),[j,b]=s.useState([]),[f,N]=s.useState(!1),y="admin"===(null==r?void 0:r.role),{getAvailableEventTypes:w,canFilterEventType:E,permissions:S,isLoading:k}=W();s.useEffect(()=>{if((null==r?void 0:r.role)&&S&&!k){const e=w(r.role);b(e)}},[null==r?void 0:r.role,S,k,w]),s.useEffect(()=>{const e=e=>{e.detail&&e.detail.type};return window.addEventListener("import-success",e),()=>{window.removeEventListener("import-success",e)}},[]);return e.jsx(A,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Agenda"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie eventos e atividades"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs(T,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(o,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Filtros de Eventos"]})}),e.jsxs(z,{align:"start",className:"w-56",children:[e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tipos de Evento"}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{b([])},className:"h-auto p-1 text-xs",children:"Limpar"})]}),xe.filter(e=>!(null==r?void 0:r.role)||E(r.role,e.id)).map(s=>e.jsx(I,{checked:j.includes(s.id),onCheckedChange:e=>((e,s)=>{!(null==r?void 0:r.role)||E(r.role,e)?b(s?s=>[...s,e]:s=>s.filter(s=>s!==e)):t({title:"Acesso negado",description:"Você não tem permissão para filtrar este tipo de evento.",variant:"destructive"})})(s.id,e),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${s.color} shadow-sm`}),e.jsx("span",{children:s.label})]})},s.id))]})]}),e.jsxs(o,{variant:f?"default":"outline",size:"sm",className:f?"h-8 bg-pink-100 border-pink-300 text-pink-800 hover:bg-pink-200":"h-8 bg-pink-50 border-pink-200 text-pink-700 hover:bg-pink-100",onClick:()=>N(!f),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),f?"Ocultar Aniversariantes":"Mostrar Aniversariantes"]})]}),y&&e.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"Ações:"}),e.jsxs(o,{onClick:()=>p(!0),variant:"outline",size:"sm",className:"h-8 bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Gerenciar Permissões"]}),e.jsxs(o,{onClick:()=>x(!0),variant:"outline",size:"sm",className:"h-8",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Importar Excel"]}),e.jsxs(o,{onClick:async()=>{if(!window.confirm("⚠️ ATENÇÃO: Esta ação irá excluir TODOS os eventos da agenda permanentemente!\n\nIsso inclui:\n• Todos os eventos criados\n• Todos os eventos importados\n• Todos os tipos de eventos\n\nEsta ação NÃO PODE SER DESFEITA!\n\nTem certeza que deseja continuar?"))return;if(!window.confirm("ÚLTIMA CONFIRMAÇÃO:\n\nVocê tem ABSOLUTA CERTEZA que deseja excluir TODOS os eventos da agenda?\n\nDigite 'CONFIRMAR' no próximo prompt para prosseguir."))return;if("CONFIRMAR"===prompt("Para confirmar a exclusão de TODOS os eventos, digite exatamente: CONFIRMAR"))try{const e=await fetch("/api/events",{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await e.json();if(!e.ok)throw new Error(s.error||"Falha ao limpar eventos");i.invalidateQueries({queryKey:["events"]}),i.invalidateQueries({queryKey:["events",null==r?void 0:r.role]}),t({title:"Eventos removidos",description:s.message||"Todos os eventos foram removidos com sucesso."})}catch(e){t({title:"Erro ao limpar eventos",description:e instanceof Error?e.message:"Ocorreu um erro inesperado.",variant:"destructive"})}else t({title:"Operação cancelada",description:"A limpeza dos eventos foi cancelada."})},variant:"destructive",size:"sm",className:"h-8",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Limpar Eventos"]})]})]}),j.length>0&&j.length<xe.length&&e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtros ativos:"}),j.map(s=>{const t=xe.find(e=>e.id===s);return t?e.jsx(u,{variant:"secondary",className:`${t.color} font-medium shadow-sm hover:shadow-md transition-shadow`,children:t.label},s):null})]}),e.jsx(ne,{onEventClick:e=>{l(e),g(!1),c(!0)},onNewEvent:()=>{l(null),g(!0),c(!0)},activeFilters:j,eventTypes:xe,showBirthdays:f}),e.jsx(ce,{event:n||void 0,isOpen:d,onClose:()=>c(!1),onSave:async e=>{try{if(v){if(!(await fetch("/api/calendar/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:[{title:e.title,description:e.description,startDate:e.startDate,endDate:e.endDate||e.startDate,type:e.type||"reunioes",location:e.location,time:e.time,duration:e.duration,organizer:e.organizer||"Sistema"}]})})).ok)throw new Error("Erro ao criar evento");i.invalidateQueries({queryKey:["events"]}),t({title:"Evento criado",description:"O novo evento foi criado com sucesso."})}else t({title:"Evento atualizado",description:"O evento foi atualizado com sucesso."});c(!1)}catch(s){t({title:"Erro",description:"Não foi possível salvar o evento. Tente novamente.",variant:"destructive"})}},onDelete:e=>{t({title:"Evento excluído",description:"O evento foi removido do calendário.",variant:"destructive"}),c(!1)},isEditing:v,eventTypes:xe}),e.jsx(me,{isOpen:m,onClose:()=>x(!1),onImportComplete:()=>{i.invalidateQueries({queryKey:["events"]}),t({title:"Agenda atualizada",description:"Os eventos foram importados e a agenda foi atualizada."})}}),e.jsx(he,{isOpen:h,onClose:()=>p(!1)})]})})}export{pe as default};
