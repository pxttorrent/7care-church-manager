import{j as e}from"./ui-D1vmdbY6.js";import{r as s}from"./vendor-Ber6wfih.js";import{i as a,o as t,m as i,f as n,C as l,d as r,a as c,b as o,L as d,I as m,U as x,B as h}from"./index-DtHhSAMi.js";import{T as j}from"./textarea-CYBeZ_MD.js";import{P as u}from"./plus-7BUzL6h5.js";import{S as p}from"./send-CY4UNziD.js";import{C as N}from"./clock-DN60WSOx.js";import"./charts-leMEfCN9.js";const v=[{id:1,title:"Convite para Culto de Natal",content:"Queridos irmãos, convidamos todos para o culto especial de Natal...",recipients:["Todos os membros"],sentBy:"Pastor João",sentAt:"2024-12-22 14:00",status:"sent",type:"broadcast"},{id:2,title:"Lembrete: Reunião de Oração",content:"Lembramos sobre a reunião de oração amanhã às 20h...",recipients:["Líderes"],sentBy:"Maria Santos",sentAt:"2024-12-21 16:30",status:"sent",type:"group"},{id:3,title:"Estudo Bíblico Cancelado",content:"O estudo bíblico de hoje foi cancelado devido...",recipients:["Ana Costa","Pedro Lima"],sentBy:"Maria Santos",sentAt:"2024-12-20 10:00",status:"draft",type:"individual"}],f=[{id:1,name:"Convite para Culto",content:"Querido(a) [NOME], convidamos você para participar do nosso culto no dia [DATA] às [HORA]. Será uma bênção tê-lo(a) conosco!"},{id:2,name:"Lembrete de Reunião",content:"Olá [NOME], lembramos sobre a reunião de [TIPO] marcada para [DATA] às [HORA]. Sua presença é importante!"},{id:3,name:"Boas-vindas",content:"Seja bem-vindo(a) à nossa igreja, [NOME]! Estamos felizes em tê-lo(a) em nossa comunidade de fé."}],g=()=>{const{user:g}=a(),[b]=s.useState(v),[y]=s.useState(f),[C,w]=s.useState(!1),[S,A]=s.useState(""),[T,k]=s.useState({title:"",content:"",recipients:"all",scheduleTime:""}),E="admin"===(null==g?void 0:g.role)||"missionary"===(null==g?void 0:g.role);return E?e.jsx(t,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Mensagens"}),e.jsx("p",{className:"text-muted-foreground",children:"Comunique-se com a igreja"})]}),e.jsxs(n,{onClick:()=>w(!0),className:"bg-gradient-primary hover:opacity-90",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Nova"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(l,{className:"text-center shadow-sm",children:e.jsxs(r,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total enviadas"})]})}),e.jsx(l,{className:"text-center shadow-sm",children:e.jsxs(r,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.filter(e=>"sent"===e.status).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enviadas"})]})}),e.jsx(l,{className:"text-center shadow-sm",children:e.jsxs(r,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:b.filter(e=>"draft"===e.status).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rascunhos"})]})})]}),C&&e.jsxs(l,{className:"shadow-divine border-primary",children:[e.jsx(c,{children:e.jsxs(o,{className:"flex justify-between items-center",children:["Nova Mensagem",e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>w(!1),children:"×"})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Templates"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 mt-2",children:y.map(s=>e.jsx(n,{variant:S===s.id.toString()?"default":"outline",size:"sm",onClick:()=>(e=>{k(s=>({...s,title:e.name,content:e.content})),A(e.id.toString())})(s),className:"justify-start h-auto p-3",children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs opacity-70 truncate",children:[s.content.substring(0,50),"..."]})]})},s.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"title",children:"Título"}),e.jsx(m,{id:"title",value:T.title,onChange:e=>k(s=>({...s,title:e.target.value})),placeholder:"Título da mensagem"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"content",children:"Mensagem"}),e.jsx(j,{id:"content",value:T.content,onChange:e=>k(s=>({...s,content:e.target.value})),placeholder:"Digite sua mensagem aqui...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Destinatários"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(n,{variant:"all"===T.recipients?"default":"outline",size:"sm",onClick:()=>k(e=>({...e,recipients:"all"})),children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Todos"]}),e.jsx(n,{variant:"members"===T.recipients?"default":"outline",size:"sm",onClick:()=>k(e=>({...e,recipients:"members"})),children:"Membros"}),e.jsx(n,{variant:"leaders"===T.recipients?"default":"outline",size:"sm",onClick:()=>k(e=>({...e,recipients:"leaders"})),children:"Líderes"}),e.jsx(n,{variant:"interested"===T.recipients?"default":"outline",size:"sm",onClick:()=>k(e=>({...e,recipients:"interested"})),children:"Interessados"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",className:"flex-1",onClick:()=>{},children:"Salvar Rascunho"}),e.jsxs(n,{className:"flex-1 bg-gradient-primary hover:opacity-90",onClick:()=>{w(!1),k({title:"",content:"",recipients:"all",scheduleTime:""}),A("")},children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Mensagens Enviadas"}),b.map(s=>e.jsx(l,{className:"shadow-sm",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.content})]}),e.jsx(h,{className:"sent"===s.status?"bg-green-500":"bg-yellow-500",children:"sent"===s.status?"Enviada":"Rascunho"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),s.recipients.join(", ")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),new Date(s.sentAt).toLocaleDateString("pt-BR")]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Enviado por: ",s.sentBy]})]})})},s.id))]})]})}):e.jsx(t,{children:e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(i,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-muted-foreground",children:"Apenas administradores e missionários podem enviar mensagens."})]})})};export{g as default};
